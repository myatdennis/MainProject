### .env.example --- copy to .env or .env.local and replace placeholder values.
# Keep this file committed so the contract between demo mode and Supabase mode stays documented.

# =====================
# Local frontend (Vite)
# =====================
# Leave BASE_URL blank in dev to use the Vite proxy (recommended). Set it only when pointing to a remote API.
VITE_API_BASE_URL=
# Toggle realtime WebSocket syncing. Keep false unless the ws server is running locally.
VITE_ENABLE_WS=false
# Optional override when VITE_ENABLE_WS=true. Defaults to ws://localhost:8888/ws when omitted.
VITE_WS_URL=ws://localhost:8888/ws
# Optional overrides when Vite's websocket HMR needs a fixed host/port (e.g., VPN or HTTPS tunnels)
VITE_HMR_HOST=localhost
VITE_HMR_CLIENT_PORT=5174
VITE_HMR_PROTOCOL=ws
# Optional â€“ only if the browser needs to talk to Supabase directly (RLS safe operations only)
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=public-anon-key-here
VITE_SUPABASE_DOCUMENTS_BUCKET=course-resources

# =====================
# Server defaults (local/demo)
# =====================
NODE_ENV=development
PORT=8888
DEV_FALLBACK=false       # Set true only if you explicitly want in-memory demo data + demo logins.
DEMO_MODE=false          # Enable true only when using the built-in demo credentials.
E2E_TEST_MODE=false
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_ROLE_KEY=service-role-secret-NOT-IN-CLIENT
SUPABASE_VIDEOS_BUCKET=course-videos
SUPABASE_DOCUMENTS_BUCKET=course-resources
CORS_ALLOWED_ORIGINS=http://localhost:5174
BROADCAST_API_KEY=replace-with-long-random-secret

# =====================
# Production overrides
# =====================
# Copy these to your hosting provider (Railway/Netlify/Vercel) and be sure to disable demo fallback.
# NODE_ENV=production
# DEV_FALLBACK=false
# DEMO_MODE=false
# VITE_API_BASE_URL=https://your-production-api-host
# VITE_ENABLE_WS=true
# VITE_WS_URL=wss://your-production-api-host/ws
# CORS_ALLOWED_ORIGINS=https://your-site.netlify.app,https://www.yourdomain.com

# =====================
# Auth + security
# =====================
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
JWT_SECRET=your-very-secret-key-minimum-32-characters-long-change-this
JWT_EXPIRES_IN=15m
REFRESH_TOKEN_EXPIRES_IN=7d
LOG_MEMORY=false
DEMO_DATA_MAX_BYTES=26214400

# =====================
# Supabase Postgres (optional for local; required for prod)
# =====================
DATABASE_URL=postgresql://postgres:[YOUR_PASSWORD]@db.miqzywzuqzeffqpiupjm.supabase.co:5432/postgres?sslmode=verify-full&sslrootcert=/path/to/root.crt
# Use the above form when connecting with psql/Prisma to enforce TLS verification.

# =====================
# Data retention (analytics/progress)
# =====================
ANALYTICS_RETENTION_DAYS=30

# Notes:
# - Never expose SUPABASE_SERVICE_ROLE_KEY or JWT_SECRET in client bundles.
# - Keep DEV_FALLBACK=false in any environment that uses real customer data.
# - Update CORS_ALLOWED_ORIGINS whenever you add new domains.
