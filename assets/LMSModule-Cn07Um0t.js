var Es=Object.defineProperty,Ts=Object.defineProperties;var As=Object.getOwnPropertyDescriptors;var gs=Object.getOwnPropertySymbols;var Is=Object.prototype.hasOwnProperty,Ms=Object.prototype.propertyIsEnumerable;var fs=(a,g,b)=>g in a?Es(a,g,{enumerable:!0,configurable:!0,writable:!0,value:b}):a[g]=b,te=(a,g)=>{for(var b in g||(g={}))Is.call(g,b)&&fs(a,b,g[b]);if(gs)for(var b of gs(g))Ms.call(g,b)&&fs(a,b,g[b]);return a},ae=(a,g)=>Ts(a,As(g));var H=(a,g,b)=>new Promise((F,M)=>{var P=N=>{try{T(b.next(N))}catch(Q){M(Q)}},I=N=>{try{T(b.throw(N))}catch(Q){M(Q)}},T=N=>N.done?F(N.value):Promise.resolve(N.value).then(P,I);T((b=b.apply(a,g)).next())});import{r as s,b2 as K,j as e,ab as ps,ak as Ds,b3 as Ps,b4 as Os,b5 as Fs,b6 as Us,b7 as zs,h as Qs,b8 as Vs,b9 as qs,ba as Bs,bb as Ae,c as Ie,bc as Ys,ap as Ks,Z as ws,b as Cs,t as X,a7 as We,g as Me,f as De,aP as Be,aG as Ws,aH as Gs,G as Hs,q as Js,D as qe,bd as Xs,R as Ge,d as Zs,u as et,J as Qe,a2 as bs,ah as Ve,e as st,ac as tt,P as rt,T as nt,A as vs,p as js,V as at,as as ys}from"./vendor-react-GSJsE769.js";import{s as ge,c as Ke,b as Ns}from"./admin-secondary-MiwxjpAM.js";import"./supabase-CqkleIqs.js";import"./vendor-BQbvXGuC.js";import"./vendor-react-dom-CAPOXzwn.js";import"./admin-courses-8eYVdzC7.js";const ot=(a={})=>{const{userId:g,channels:b=["course_assignments","user_progress","enrollments"],onEvent:F,onError:M,enabled:P=!0}=a,I=s.useRef([]),T=s.useRef(),N=s.useRef(0),Q=s.useCallback((x,l,v)=>{const j={type:l,payload:x,timestamp:Date.now(),userId:x.user_id||g};switch(console.log(`[RealtimeSync] Event received on ${v}:`,j),F==null||F(j),j.type){case"course_assigned":K.success(`New course assigned: ${x.course_name||"Course"}`);break;case"course_updated":K(`Course updated: ${x.course_name||"Course"}`,{icon:"â„¹ï¸"});break;case"enrollment_changed":x.status==="enrolled"?K.success(`Successfully enrolled in ${x.course_name||"course"}`):x.status==="unenrolled"&&K(`Unenrolled from ${x.course_name||"course"}`,{icon:"â„¹ï¸"});break;case"user_status_changed":x.status==="suspended"?K.error("Your account has been suspended. Please contact support."):x.status==="activated"&&K.success("Your account has been activated!");break}},[F,g]),z=s.useCallback(()=>H(void 0,null,function*(){if(!P||!ge){console.log("[RealtimeSync] Connection disabled or Supabase not available");return}try{console.log("[RealtimeSync] Establishing realtime connections..."),I.current.forEach(x=>{ge.removeChannel(x)}),I.current=[];for(const x of b){const l=ge.channel(x).on("postgres_changes",{event:"*",schema:"public",table:x,filter:g?`user_id=eq.${g}`:void 0},v=>{Q(v.new||v.old,v.eventType,x)}).on("broadcast",{event:"sync_update"},v=>{Q(v,"progress_sync",x)}).subscribe(v=>{console.log(`[RealtimeSync] Channel ${x} status:`,v),v==="SUBSCRIBED"?(N.current=0,K.success("Real-time sync connected",{id:"realtime-status",duration:2e3})):(v==="CLOSED"||v==="CHANNEL_ERROR")&&L()});I.current.push(l)}}catch(x){console.error("[RealtimeSync] Connection error:",x),M==null||M(x),L()}}),[P,b,g,Q,M]),L=s.useCallback(()=>{if(N.current<5){N.current++;const v=1e3*Math.pow(2,N.current-1);console.log(`[RealtimeSync] Reconnecting in ${v}ms (attempt ${N.current}/5)`),T.current&&clearTimeout(T.current),T.current=setTimeout(()=>{z()},v),K.loading(`Reconnecting... (${N.current}/5)`,{id:"realtime-reconnect"})}else K.error("Real-time sync disconnected. Please refresh the page.",{id:"realtime-error",duration:5e3})},[z]),w=s.useCallback(()=>{console.log("[RealtimeSync] Disconnecting..."),T.current&&clearTimeout(T.current),I.current.forEach(x=>{var l;(l=ge)==null||l.removeChannel(x)}),I.current=[],K.dismiss("realtime-status"),K.dismiss("realtime-reconnect"),K.dismiss("realtime-error")},[]),A=s.useCallback((x,l)=>H(void 0,null,function*(){if(!ge||I.current.length===0){console.warn("[RealtimeSync] Cannot broadcast - no active connections");return}try{yield I.current[0].send({type:"broadcast",event:"sync_update",payload:{type:x,data:l,timestamp:Date.now(),userId:g}}),console.log("[RealtimeSync] Broadcast sent:",{eventType:x,data:l})}catch(v){console.error("[RealtimeSync] Broadcast error:",v),M==null||M(v)}}),[g,M]);return s.useEffect(()=>(P&&z(),()=>{w()}),[P,z,w]),s.useEffect(()=>()=>{w()},[w]),{connect:z,disconnect:w,broadcastUpdate:A,isConnected:I.current.length>0,reconnectAttempts:N.current}},lt=(a={})=>{const{userId:g="demo-user",enabled:b=!0,saveInterval:F=3e4,maxRetries:M=3,onSaveSuccess:P,onSaveError:I}=a,[T,N]=s.useState(!1),[Q,z]=s.useState(null),[L,w]=s.useState(0),[A,x]=s.useState(navigator.onLine),l=s.useRef([]),v=s.useRef(),j=s.useRef(new Map);s.useEffect(()=>{const i=()=>{x(!0),k()},n=()=>{x(!1)};return window.addEventListener("online",i),window.addEventListener("offline",n),()=>{window.removeEventListener("online",i),window.removeEventListener("offline",n)}},[]);const E=s.useCallback(i=>`${i.courseId}_${i.moduleId}_${i.lessonId}`,[]),C=s.useCallback(i=>{try{const n=`autosave_${g}_${E(i)}`,y=ae(te({},i),{lastAccessed:i.lastAccessed.toISOString()});localStorage.setItem(n,JSON.stringify(y)),console.log("[AutoSave] Saved to local storage:",n)}catch(n){console.error("[AutoSave] Failed to save to local storage:",n)}},[g,E]),B=s.useCallback((i,n,y)=>{try{const _=`autosave_${g}_${i}_${n}_${y}`,J=localStorage.getItem(_);if(J){const ie=JSON.parse(J);return ae(te({},ie),{lastAccessed:new Date(ie.lastAccessed)})}}catch(_){console.error("[AutoSave] Failed to load from local storage:",_)}return null},[g]),q=s.useCallback((i,n,y)=>{try{const _=`autosave_${g}_${i}_${n}_${y}`;localStorage.removeItem(_),console.log("[AutoSave] Cleared stored progress:",_)}catch(_){console.error("[AutoSave] Failed to clear stored progress:",_)}},[g]),Y=s.useCallback(i=>H(void 0,null,function*(){if(!ge)return console.warn("[AutoSave] Supabase not available"),!1;try{const{error:n}=yield ge.from("user_progress").upsert({user_id:g,course_id:i.courseId,module_id:i.moduleId,lesson_id:i.lessonId,progress:i.progress,time_spent:i.timeSpent,completed:i.completed,reflection:i.reflection,quiz_scores:i.quizScores,video_progress:i.videoProgress,last_accessed:i.lastAccessed.toISOString(),updated_at:new Date().toISOString()},{onConflict:"user_id,course_id,module_id,lesson_id"});return n?(console.error("[AutoSave] Database save error:",n),!1):(console.log("[AutoSave] Successfully saved to database:",E(i)),!0)}catch(n){return console.error("[AutoSave] Database save exception:",n),!1}}),[g,E]),k=s.useCallback(()=>H(void 0,null,function*(){if(!A||l.current.length===0||T)return;N(!0);const i=[...l.current];l.current=[];for(const n of i)try{(yield Y(n.data))?(P==null||P(n.data),q(n.data.courseId,n.data.moduleId,n.data.lessonId)):n.attempts<M?l.current.push(ae(te({},n),{attempts:n.attempts+1})):(console.error("[AutoSave] Max retries exceeded for:",n.id),I==null||I(new Error("Max retries exceeded"),n.data))}catch(y){console.error("[AutoSave] Queue processing error:",y),I==null||I(y,n.data)}N(!1),z(new Date)}),[A,T,Y,M,P,I,q]),p=s.useCallback(i=>{if(!b)return;const n=E(i);j.current.set(n,i),w(j.current.size),C(i),A?(l.current=l.current.filter(y=>y.id!==n),l.current.push({id:n,data:i,timestamp:Date.now(),attempts:0})):K("Progress saved offline. Will sync when connection restored.",{icon:"ðŸ’¾",id:"offline-save"})},[b,E,C,A]),h=s.useCallback(i=>H(void 0,null,function*(){return i&&p(i),A?(yield k(),l.current.length===0):(K.error("Cannot save - you are offline"),!1)}),[p,A,k]);return s.useEffect(()=>{if(!(!b||!A))return v.current=setInterval(()=>{j.current.size>0&&k()},F),()=>{v.current&&clearInterval(v.current)}},[b,A,F,k]),s.useEffect(()=>{A&&l.current.length>0&&k()},[A,k]),s.useEffect(()=>()=>{v.current&&clearInterval(v.current)},[]),{scheduleProgressSave:p,forceSave:h,loadFromStorage:B,clearStoredProgress:q,isSaving:T,isOnline:A,lastSaved:Q,pendingChanges:L,queueLength:l.current.length}},it=(a={})=>{const{maxRetries:g=3,retryDelay:b=2e3,maxQueueSize:F=100,onSync:M,onSyncError:P,onQueueFull:I}=a,[T,N]=s.useState(navigator.onLine),[Q,z]=s.useState(!1),[L,w]=s.useState(0),[A,x]=s.useState(null),l=s.useRef([]),v=s.useRef(!1),j=s.useRef();s.useEffect(()=>{try{const i=localStorage.getItem("offline_progress_queue");if(i){const n=JSON.parse(i);l.current=n.filter(y=>{const _=Date.now()-6048e5;return y.timestamp>_}),w(l.current.length),console.log(`[OfflineQueue] Loaded ${l.current.length} items from storage`)}}catch(i){console.error("[OfflineQueue] Failed to load queue from storage:",i),l.current=[]}},[]);const E=s.useCallback(()=>{try{localStorage.setItem("offline_progress_queue",JSON.stringify(l.current))}catch(i){console.error("[OfflineQueue] Failed to save queue to storage:",i)}},[]);s.useEffect(()=>{const i=()=>{N(!0),K.success("Connection restored. Syncing progress...",{duration:3e3,id:"connection-restored"}),setTimeout(()=>q(),1e3)},n=()=>{N(!1),K("You're offline. Progress will be saved locally.",{icon:"ðŸ’¾",duration:4e3,id:"connection-lost"})};return window.addEventListener("online",i),window.addEventListener("offline",n),()=>{window.removeEventListener("online",i),window.removeEventListener("offline",n)}},[]);const C=s.useCallback(()=>`queue_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,[]),B=s.useCallback(i=>{l.current.length>=F&&(console.warn("[OfflineQueue] Queue size limit reached"),I==null||I(),l.current=l.current.filter(y=>y.priority!=="low").slice(-(F-1)));const n=ae(te({},i),{id:C(),timestamp:Date.now(),attempts:0});return l.current=l.current.filter(y=>!(y.userId===i.userId&&y.courseId===i.courseId&&y.lessonId===i.lessonId&&y.action===i.action)),l.current.push(n),l.current.sort((y,_)=>{const J={high:3,medium:2,low:1};return J[_.priority]-J[y.priority]||y.timestamp-_.timestamp}),w(l.current.length),E(),console.log("[OfflineQueue] Added item to queue:",n.id,n.action),T?setTimeout(()=>q(),500):K("Progress saved offline",{icon:"ðŸ’¾",duration:2e3,id:"offline-save"}),n.id},[F,T,C,E,I]),q=s.useCallback(()=>H(void 0,null,function*(){if(!T||v.current||l.current.length===0)return;v.current=!0,z(!0),console.log(`[OfflineQueue] Processing ${l.current.length} queued items`);const i=[...l.current],n=[],y=[];for(const _ of i){try{(yield Y(_))?(n.push(_.id),M==null||M(_),console.log("[OfflineQueue] Successfully synced:",_.id,_.action)):_.attempts<g?y.push(ae(te({},_),{attempts:_.attempts+1})):(console.error("[OfflineQueue] Max retries exceeded:",_.id),P==null||P(_,new Error("Max retries exceeded")))}catch(J){console.error("[OfflineQueue] Sync error for item:",_.id,J),_.attempts<g?y.push(ae(te({},_),{attempts:_.attempts+1})):P==null||P(_,J)}yield new Promise(J=>setTimeout(J,100))}l.current=l.current.filter(_=>!n.includes(_.id)).concat(y),w(l.current.length),E(),v.current=!1,z(!1),x(new Date),n.length>0&&K.success(`Synced ${n.length} progress updates`,{duration:3e3}),y.length>0&&(K("Some items will retry later",{icon:"âš ï¸",duration:2e3}),j.current&&clearTimeout(j.current),j.current=setTimeout(()=>{q()},b)),console.log("[OfflineQueue] Processing complete. Remaining items:",l.current.length)}),[T,g,b,M,P,E]),Y=i=>H(void 0,null,function*(){try{if(yield new Promise(y=>setTimeout(y,200+Math.random()*300)),!(Math.random()>.1))throw new Error("Simulated API error");switch(i.action){case"progress_update":break;case"lesson_complete":break;case"quiz_submit":break;case"reflection_save":break}return!0}catch(n){return console.error(`[OfflineQueue] Failed to sync ${i.action}:`,n),!1}}),k=s.useCallback(()=>{l.current=[],w(0),E(),console.log("[OfflineQueue] Queue cleared")},[E]),p=s.useCallback(i=>{l.current=l.current.filter(n=>n.id!==i),w(l.current.length),E()},[E]),h=s.useCallback(()=>({total:l.current.length,byPriority:{high:l.current.filter(n=>n.priority==="high").length,medium:l.current.filter(n=>n.priority==="medium").length,low:l.current.filter(n=>n.priority==="low").length},byAction:l.current.reduce((n,y)=>(n[y.action]=(n[y.action]||0)+1,n),{}),oldestTimestamp:l.current.length>0?Math.min(...l.current.map(n=>n.timestamp)):null,failedItems:l.current.filter(n=>n.attempts>0).length}),[]);return s.useEffect(()=>{if(T&&l.current.length>0){const i=setTimeout(()=>q(),2e3);return()=>clearTimeout(i)}},[T,q]),s.useEffect(()=>()=>{j.current&&clearTimeout(j.current)},[]),{addToQueue:B,processQueue:q,clearQueue:k,removeItem:p,getQueueStats:h,isOnline:T,isProcessing:Q,queueSize:L,lastSync:A,queue:l.current}},ct=(a,g={})=>{const{userId:b="demo-user",enableAutoSave:F=!0,enableRealtime:M=!0,autoSaveInterval:P=3e4}=g,[I,T]=s.useState(null),[N,Q]=s.useState({}),[z,L]=s.useState({}),[w,A]=s.useState(!0),[x,l]=s.useState(null),[v,j]=s.useState("synced"),[E,C]=s.useState(null),B=s.useRef(new Date),q=s.useRef(new Set),Y=lt({userId:b,enabled:F,saveInterval:P,onSaveSuccess:c=>{console.log("[CourseProgress] Auto-save successful:",c),j("synced"),q.current.delete(`${c.courseId}_${c.lessonId}`)},onSaveError:(c,U)=>{console.error("[CourseProgress] Auto-save failed:",c,U),j("error")}}),k=it({onSync:c=>{console.log("[CourseProgress] Offline item synced:",c),K.success(`Progress synced: ${c.action}`)},onSyncError:(c,U)=>{console.error("[CourseProgress] Offline sync failed:",c,U),K.error("Failed to sync some progress data")}}),p=s.useCallback(c=>{c.type==="course_updated"&&c.payload.course_id===a?(console.log("[CourseProgress] Course updated via realtime:",c.payload),i()):c.type==="progress_sync"&&c.payload.course_id===a&&(console.log("[CourseProgress] Progress sync event:",c.payload),c.userId!==b&&J(c.payload))},[a,b]),h=ot({userId:b,enabled:M,onEvent:p,onError:c=>{console.error("[CourseProgress] Realtime error:",c)}}),i=s.useCallback(()=>H(void 0,null,function*(){try{if(A(!0),l(null),!""||!""){console.log("[CourseProgress] Running in demo mode");const re={id:`enrollment_demo_${Date.now()}`,user_id:b,course_id:a,enrolled_at:new Date().toISOString(),progress_percentage:0,completed_at:void 0,last_accessed_at:new Date().toISOString()};T(re),Q({}),L({}),A(!1);return}const{data:{user:V}}=yield ge.auth.getUser(),W=(V==null?void 0:V.id)||b,{data:se,error:Z}=yield ge.from("user_course_enrollments").select("*").eq("user_id",W).eq("course_id",a).limit(1);if(Z){console.error("Error loading enrollment:",Z),l("Failed to load enrollment data");return}if(se&&se.length>0)T(se[0]);else{const re={id:`enrollment_${Date.now()}`,user_id:W,course_id:a,enrolled_at:new Date().toISOString(),progress_percentage:0,last_accessed_at:new Date().toISOString(),completed_at:void 0};T(re)}const{data:G,error:ue}=yield ge.from("user_lesson_progress").select("*").eq("user_id",W).eq("course_id",a);if(ue&&console.error("Error loading progress:",ue),G){const re=G.reduce((pe,ee)=>(pe[ee.lesson_id]=ee,pe),{});Q(re)}const{data:ce,error:oe}=yield ge.from("user_reflections").select("*").eq("user_id",W).eq("course_id",a);if(oe&&console.error("Error loading reflections:",oe),ce){const re=ce.reduce((pe,ee)=>(pe[ee.lesson_id]=ee,pe),{});L(re)}}catch(c){console.error("Error in loadProgressData:",c),l("Failed to load progress data")}finally{A(!1)}}),[a,b]),n=s.useCallback((c,U,V)=>H(void 0,null,function*(){try{const W="",se="",Z=N[c]||{},G=te(ae(te({},Z),{id:Z.id||`progress_${Date.now()}`,user_id:b,lesson_id:c,time_spent:Z.time_spent||0,completed:Z.completed||!1,progress_percentage:Z.progress_percentage||0,last_accessed_at:new Date().toISOString(),completed_at:Z.completed_at}),V);if(Q(ce=>ae(te({},ce),{[c]:G})),!W||!se){console.log("[CourseProgress] Demo mode - progress updated locally only"),j("synced");return}const ue=`${a}_${c}`;q.current.add(ue),j("pending"),B.current=new Date,F&&Y.scheduleProgressSave({courseId:a,lessonId:c,moduleId:U,progress:G.progress_percentage,timeSpent:G.time_spent,completed:G.completed,lastAccessed:new Date(G.last_accessed_at),quizScores:void 0,videoProgress:G.progress_percentage}),navigator.onLine||k.addToQueue({userId:b,courseId:a,lessonId:c,moduleId:U,action:"progress_update",data:G,priority:"medium"}),navigator.onLine&&M&&h.isConnected&&(yield h.broadcastUpdate("progress_update",{course_id:a,lesson_id:c,progress:G.progress_percentage,completed:G.completed,timestamp:Date.now()}))}catch(W){console.error("Error updating lesson progress:",W),l("Failed to update progress"),j("error")}}),[a,b,N,F,M,Y,k,h]),y=s.useCallback((c,U,V)=>H(void 0,null,function*(){const W={completed:!0,completed_at:new Date().toISOString(),progress_percentage:100,last_accessed_at:new Date().toISOString()};yield n(c,U,W),k.addToQueue({userId:b,courseId:a,lessonId:c,moduleId:U,action:"lesson_complete",data:{lesson_id:c,completed_at:W.completed_at,quiz_score:V},priority:"high"}),K.success("Lesson completed!",{duration:3e3})}),[n,k,b,a]),_=s.useCallback((c,U)=>H(void 0,null,function*(){var V,W;try{const se="",Z="",G={id:((V=z[c])==null?void 0:V.id)||`reflection_${Date.now()}`,user_id:b,lesson_id:c,content:U,created_at:((W=z[c])==null?void 0:W.created_at)||new Date().toISOString(),updated_at:new Date().toISOString()};if(L(ue=>ae(te({},ue),{[c]:G})),!se||!Z){console.log("[CourseProgress] Demo mode - reflection saved locally only");return}k.addToQueue({userId:b,courseId:a,lessonId:c,moduleId:"reflection",action:"reflection_save",data:G,priority:"low"}),K.success("Reflection saved")}catch(se){console.error("Error saving reflection:",se),K.error("Failed to save reflection")}}),[a,b,z,k]),J=s.useCallback(c=>{c.lesson_id&&c.progress!==void 0&&Q(U=>{const V=U[c.lesson_id]||{},W=new Date(c.timestamp||0),se=new Date(V.last_accessed_at||0);return W>se?ae(te({},U),{[c.lesson_id]:ae(te({},V),{progress:c.progress,completed:c.completed||V.completed,last_accessed_at:c.timestamp||V.last_accessed_at})}):U})},[]),ie=s.useCallback(()=>{const c=Object.values(N);if(c.length===0)return 0;const U=c.reduce((V,W)=>V+W.progress_percentage,0);return Math.round(U/c.length)},[N]),fe=s.useCallback(()=>{const c=Object.values(N).filter(V=>V.completed),U=Object.keys(N).length;return{completed:c.length,total:U,percentage:U>0?Math.round(c.length/U*100):0}},[N]);s.useEffect(()=>{i()},[i]);const ye=s.useCallback(c=>{C(c),c&&N[c]&&n(c,"module_1",{last_accessed_at:new Date().toISOString()})},[N,n]);return{enrollmentData:I,lessonProgress:N,reflections:z,loading:w,error:x,updateLessonProgress:n,markLessonComplete:y,saveReflection:_,setActiveLessonTracking:ye,calculateCourseProgress:ie,getCompletionStats:fe,syncStatus:v,isOnline:k.isOnline,isSaving:Y.isSaving,isProcessingQueue:k.isProcessing,pendingChanges:Y.pendingChanges,queueSize:k.queueSize,lastSaved:Y.lastSaved,forceSave:Y.forceSave,processQueue:k.processQueue,loadFromStorage:Y.loadFromStorage,reloadData:i,isRealtimeConnected:h.isConnected,reconnectRealtime:h.connect,activeLesson:E}},dt=({src:a,title:g,thumbnail:b,onProgress:F,onComplete:M,initialTime:P=0,className:I="",autoPlay:T=!1,showTranscript:N=!1,transcript:Q="",captions:z=[]})=>{const L=s.useRef(null),w=s.useRef(null),A=s.useRef(null),[x,l]=s.useState(!1),[v,j]=s.useState(!0),[E,C]=s.useState(0),[B,q]=s.useState(0),[Y,k]=s.useState(1),[p,h]=s.useState(!1),[i,n]=s.useState(1),[y,_]=s.useState(!1),[J,ie]=s.useState(!0),[fe,ye]=s.useState(!1),[c,U]=s.useState(!1),[V]=s.useState(!1),[W,se]=s.useState(!1),[Z]=s.useState(0),[G,ue]=s.useState(0),[ce,oe]=s.useState(""),re=s.useRef();s.useEffect(()=>{const o=L.current;if(!o)return;const $=()=>j(!0),de=()=>{j(!1),P>0&&(o.currentTime=P)},ke=()=>{q(o.duration)},be=()=>{const xe=o.currentTime;if(C(xe),!V&&F&&F(xe/o.duration*100),z.length>0&&c){const Fe=z.find(Ue=>xe>=Ue.start&&xe<=Ue.end);oe(Fe?Fe.text:"")}Math.floor(xe)%10===0&&localStorage.setItem(`video-progress-${a}`,xe.toString())},_e=()=>{if(o.buffered.length>0){const xe=o.buffered.end(o.buffered.length-1);ue(xe/o.duration*100)}},$e=()=>{l(!1),C(B),M&&M(),localStorage.removeItem(`video-progress-${a}`)},Re=()=>{l(!0),se(!0)},we=()=>l(!1);return o.addEventListener("loadstart",$),o.addEventListener("canplay",de),o.addEventListener("loadedmetadata",ke),o.addEventListener("timeupdate",be),o.addEventListener("progress",_e),o.addEventListener("ended",$e),o.addEventListener("play",Re),o.addEventListener("pause",we),()=>{o.removeEventListener("loadstart",$),o.removeEventListener("canplay",de),o.removeEventListener("loadedmetadata",ke),o.removeEventListener("timeupdate",be),o.removeEventListener("progress",_e),o.removeEventListener("ended",$e),o.removeEventListener("play",Re),o.removeEventListener("pause",we)}},[a,P,F,M,V,B,z,c]),s.useEffect(()=>{const o=localStorage.getItem(`video-progress-${a}`);if(o&&L.current){const $=parseFloat(o);L.current.currentTime=$,C($)}},[a]),s.useEffect(()=>{let o;return x&&!V&&(o=setInterval(()=>{console.log(`Watch time: ${Z+1}s`)},1e3)),()=>{o&&clearInterval(o)}},[x,V]);const pe=s.useCallback(()=>{re.current&&clearTimeout(re.current),ie(!0),x&&(re.current=setTimeout(()=>{ie(!1)},3e3))},[x]),ee=()=>{const o=L.current;o&&(x?o.pause():o.play())},Pe=o=>{const $=L.current;if(!$||!B)return;const de=o/100*B;$.currentTime=de,C(de)},Ne=o=>{const $=L.current;$&&($.currentTime=Math.max(0,Math.min(B,E+o)))},u=o=>{const $=L.current;$&&($.volume=o,k(o),h(o===0))},Oe=()=>{const o=L.current;o&&(p?(o.volume=Y||.5,h(!1)):(o.volume=0,h(!0)))},S=o=>{const $=L.current;$&&($.playbackRate=o,n(o),ye(!1))},t=()=>H(void 0,null,function*(){const o=w.current;o&&(y?document.exitFullscreen&&(yield document.exitFullscreen()):o.requestFullscreen&&(yield o.requestFullscreen()))});s.useEffect(()=>{const o=()=>{_(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",o),()=>document.removeEventListener("fullscreenchange",o)},[]);const Ye=o=>{const $=A.current;if(!$||!B)return;const de=$.getBoundingClientRect(),ke=(o.clientX-de.left)/de.width*100;Pe(Math.max(0,Math.min(100,ke)))};s.useEffect(()=>{const o=$=>{if(W)switch($.key){case" ":$.preventDefault(),ee();break;case"ArrowLeft":$.preventDefault(),Ne(-10);break;case"ArrowRight":$.preventDefault(),Ne(10);break;case"ArrowUp":$.preventDefault(),u(Math.min(1,Y+.1));break;case"ArrowDown":$.preventDefault(),u(Math.max(0,Y-.1));break;case"m":$.preventDefault(),Oe();break;case"f":$.preventDefault(),t();break;case"c":$.preventDefault(),U(!c);break}};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[W,Y,c]);const Se=o=>{const $=Math.floor(o/60),de=Math.floor(o%60);return`${$}:${de.toString().padStart(2,"0")}`};return e.jsxs("div",{ref:w,className:`relative bg-black rounded-lg overflow-hidden ${I}`,onMouseMove:pe,onMouseLeave:()=>x&&ie(!1),children:[e.jsx("video",{ref:L,src:a,poster:b,className:"w-full h-full",autoPlay:T,playsInline:!0,preload:"metadata",onClick:ee}),v&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white"})}),!x&&!v&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("button",{onClick:ee,className:"bg-orange-500 bg-opacity-90 hover:bg-opacity-100 rounded-full p-6 transition-all duration-200 transform hover:scale-105",children:e.jsx(ps,{className:"h-8 w-8 text-white ml-1",fill:"white"})})}),c&&ce&&e.jsx("div",{className:"absolute bottom-20 left-1/2 transform -translate-x-1/2 bg-black bg-opacity-75 text-white px-4 py-2 rounded max-w-md text-center",children:ce}),e.jsxs("div",{className:`absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black via-black to-transparent p-4 transition-opacity duration-300 ${J?"opacity-100":"opacity-0"}`,children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{ref:A,className:"w-full h-2 bg-gray-600 rounded-full cursor-pointer relative overflow-hidden",onClick:Ye,children:[e.jsx("div",{className:"absolute top-0 left-0 h-full bg-gray-400 rounded-full",style:{width:`${G}%`}}),e.jsx("div",{className:"absolute top-0 left-0 h-full bg-orange-500 rounded-full transition-all duration-100",style:{width:`${E/B*100}%`}}),e.jsx("div",{className:"absolute top-1/2 transform -translate-y-1/2 w-4 h-4 bg-orange-500 rounded-full border-2 border-white shadow-lg transition-all duration-100",style:{left:`${E/B*100}%`,marginLeft:"-8px"}})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:ee,className:"text-white hover:text-orange-400 transition-colors duration-200",children:x?e.jsx(Ds,{className:"h-6 w-6"}):e.jsx(ps,{className:"h-6 w-6"})}),e.jsx("button",{onClick:()=>Ne(-10),className:"text-white hover:text-orange-400 transition-colors duration-200",children:e.jsx(Ps,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>Ne(10),className:"text-white hover:text-orange-400 transition-colors duration-200",children:e.jsx(Os,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:Oe,className:"text-white hover:text-orange-400 transition-colors duration-200",children:p||Y===0?e.jsx(Fs,{className:"h-5 w-5"}):e.jsx(Us,{className:"h-5 w-5"})}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:p?0:Y,onChange:o=>u(parseFloat(o.target.value)),className:"w-20 h-1 bg-gray-600 rounded-lg appearance-none cursor-pointer slider"})]}),e.jsxs("div",{className:"text-white text-sm font-medium",children:[Se(E)," / ",Se(B)]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[z.length>0&&e.jsx("button",{onClick:()=>U(!c),className:`transition-colors duration-200 ${c?"text-orange-400":"text-white hover:text-orange-400"}`,children:e.jsx(zs,{className:"h-5 w-5"})}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>ye(!fe),className:"text-white hover:text-orange-400 transition-colors duration-200",children:e.jsx(Qs,{className:"h-5 w-5"})}),fe&&e.jsxs("div",{className:"absolute bottom-8 right-0 bg-black bg-opacity-90 rounded-lg p-3 min-w-[120px]",children:[e.jsx("div",{className:"text-white text-sm font-medium mb-2",children:"Playback Speed"}),[.5,.75,1,1.25,1.5,2].map(o=>e.jsxs("button",{onClick:()=>S(o),className:`block w-full text-left px-2 py-1 text-sm rounded transition-colors ${i===o?"bg-orange-500 text-white":"text-gray-300 hover:bg-gray-700"}`,children:[o,"x"]},o))]})]}),e.jsx("button",{onClick:t,className:"text-white hover:text-orange-400 transition-colors duration-200",children:y?e.jsx(Vs,{className:"h-5 w-5"}):e.jsx(qs,{className:"h-5 w-5"})})]})]})]}),g&&J&&e.jsx("div",{className:"absolute top-4 left-4 text-white font-medium text-lg bg-black bg-opacity-50 px-3 py-1 rounded",children:g}),E>=B-1&&B>0&&e.jsx("div",{className:"absolute top-4 right-4",children:e.jsxs("button",{onClick:()=>Pe(0),className:"bg-orange-500 bg-opacity-90 hover:bg-opacity-100 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-all duration-200",children:[e.jsx(Bs,{className:"h-4 w-4"}),e.jsx("span",{children:"Restart"})]})}),N&&Q&&e.jsxs("div",{className:"absolute right-0 top-0 bottom-0 w-80 bg-white bg-opacity-95 overflow-y-auto p-4 text-sm",children:[e.jsx("h3",{className:"font-semibold mb-4 text-gray-900",children:"Transcript"}),e.jsx("div",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:Q})]})]})},mt=({currentProgress:a,totalLessons:g,completedLessons:b,currentLessonTitle:F,onPrevious:M,onNext:P,hasPrevious:I=!1,hasNext:T=!1,estimatedTimeRemaining:N,visible:Q=!0,className:z=""})=>{const[L,w]=s.useState(!1),[A,x]=s.useState(a),[l,v]=s.useState(!1);s.useEffect(()=>{a>A&&[25,50,75,100].find(q=>A<q&&a>=q)&&(w(!0),setTimeout(()=>w(!1),3e3)),x(a)},[a,A]),s.useEffect(()=>{const C=()=>{v(window.scrollY>100)};return window.addEventListener("scroll",C),()=>window.removeEventListener("scroll",C)},[]);const j=()=>a>=100?"ðŸŽ‰ Congratulations! Course completed!":a>=75?"ðŸš€ Almost there! You're doing great!":a>=50?"ðŸ’ª Halfway through! Keep it up!":a>=25?"â­ Great progress! You're on track!":"",E=()=>a>=100?"from-green-400 to-emerald-500":a>=75?"from-blue-400 to-indigo-500":a>=50?"from-purple-400 to-pink-500":a>=25?"from-yellow-400 to-orange-500":"from-orange-400 to-red-500";return Q?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50 transition-all duration-300 translate-y-0 ${z}`,children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-200 p-4 min-w-[400px] max-w-2xl backdrop-blur-sm bg-opacity-95",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full bg-gradient-to-r ${E()}`}),e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:[b," of ",g," lessons"]})]}),a===100&&e.jsx(Ae,{className:"h-5 w-5 text-yellow-500 animate-pulse"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[N&&e.jsxs("div",{className:"flex items-center text-xs text-gray-600",children:[e.jsx(Ie,{className:"h-4 w-4 mr-1"}),N," left"]}),e.jsxs("div",{className:"text-sm font-bold text-gray-900",children:[Math.round(a),"%"]})]})]}),e.jsxs("div",{className:"relative mb-3",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:`h-3 rounded-full bg-gradient-to-r ${E()} transition-all duration-500 relative`,style:{width:`${a}%`},children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-30 animate-pulse"})})}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-3 flex justify-between items-center",children:[25,50,75,100].map(C=>e.jsx("div",{className:`w-1 h-5 -mt-1 rounded-full transition-colors duration-300 ${a>=C?"bg-white shadow-md":"bg-gray-300"}`,style:{marginLeft:"25%"}},C))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:F}),L&&e.jsx("div",{className:"text-xs text-green-600 font-medium animate-bounce mt-1",children:j()})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsx("button",{onClick:M,disabled:!I,className:`p-2 rounded-lg transition-all duration-200 ${I?"text-gray-600 hover:text-gray-900 hover:bg-gray-100":"text-gray-300 cursor-not-allowed"}`,title:"Previous lesson",children:e.jsx(Ys,{className:"h-5 w-5"})}),e.jsx("button",{onClick:P,disabled:!T,className:`p-2 rounded-lg transition-all duration-200 ${T?"text-white bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 shadow-lg":"text-gray-300 cursor-not-allowed bg-gray-200"}`,title:T?"Next lesson":"Course complete",children:a>=100?e.jsx(Ae,{className:"h-5 w-5"}):e.jsx(Ks,{className:"h-5 w-5"})})]})]})]})}),L&&a>=100&&e.jsx("div",{className:"fixed inset-0 z-60 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-3xl p-8 max-w-md mx-4 text-center animate-bounce-in",children:[e.jsx("div",{className:"mb-6",children:e.jsx(Ae,{className:"h-16 w-16 text-yellow-500 mx-auto animate-pulse"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"ðŸŽ‰ Congratulations!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"You've successfully completed the course! Your certificate is ready for download."}),e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsx("button",{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white px-6 py-3 rounded-xl font-semibold hover:from-green-600 hover:to-emerald-700 transition-all duration-200 shadow-lg",children:"Download Certificate"}),e.jsx("button",{onClick:()=>w(!1),className:"text-gray-600 hover:text-gray-900 px-6 py-3 font-medium",children:"Continue"})]})]})}),l&&e.jsx("div",{className:"fixed top-0 left-0 right-0 z-40",children:e.jsx("div",{className:`h-1 bg-gradient-to-r ${E()} transition-all duration-300`,style:{width:`${a}%`}})}),L&&a<100&&e.jsx("div",{className:"fixed top-6 right-6 z-50 animate-slide-in-right",children:e.jsx("div",{className:"bg-white rounded-xl shadow-xl border border-gray-200 p-4 max-w-sm",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:a>=75?e.jsx(ws,{className:"h-8 w-8 text-blue-500"}):a>=50?e.jsx(Cs,{className:"h-8 w-8 text-purple-500"}):e.jsx(X,{className:"h-8 w-8 text-orange-500"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900 text-sm",children:"Milestone Reached!"}),e.jsx("div",{className:"text-xs text-gray-600",children:j()})]})]})})})]}):null},ut=({course:a,completionData:g,keyTakeaways:b=[],nextSteps:F=[],recommendedCourses:M=[],onClose:P,onCertificateDownload:I,onShareComplete:T,className:N=""})=>{var Y,k;const[Q,z]=s.useState(!0),[L,w]=s.useState("summary"),[A,x]=s.useState(""),[l,v]=s.useState(!1);s.useEffect(()=>{const p=`${window.location.origin}/course/${a.id}/completed`;x(p);const h=setTimeout(()=>z(!1),5e3);return()=>clearTimeout(h)},[a.id]);const j=p=>{const h=Math.floor(p/60),i=p%60;return h>0?`${h}h ${i}m`:`${i}m`},E=p=>{switch(p==null?void 0:p.toUpperCase()){case"A":case"A+":case"A-":return"text-green-600 bg-green-50";case"B":case"B+":case"B-":return"text-blue-600 bg-blue-50";case"C":case"C+":case"C-":return"text-yellow-600 bg-yellow-50";default:return"text-gray-600 bg-gray-50"}},C=p=>H(void 0,null,function*(){const h=`Just completed "${a.title}"! ðŸŽ“ #Learning #ProfessionalDevelopment`;switch(p){case"linkedin":window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(A)}&summary=${encodeURIComponent(h)}`,"_blank");break;case"twitter":window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(h)}&url=${encodeURIComponent(A)}`,"_blank");break;case"email":window.open(`mailto:?subject=${encodeURIComponent(`Course Completion: ${a.title}`)}&body=${encodeURIComponent(`${h}

${A}`)}`,"_blank");break;case"copy":try{yield navigator.clipboard.writeText(A),v(!0),setTimeout(()=>v(!1),2e3)}catch(i){console.error("Failed to copy link:",i)}break}T&&T(p)}),B=((Y=a.modules)==null?void 0:Y.reduce((p,h)=>p+h.lessons.length,0))||0,q=((k=a.modules)==null?void 0:k.reduce((p,h)=>p+h.lessons.filter(i=>i.completed).length,0))||0;return e.jsxs("div",{className:`min-h-screen bg-gradient-to-br from-orange-50 via-red-50 to-pink-50 ${N}`,children:[Q&&e.jsx("div",{className:"fixed inset-0 pointer-events-none z-10",children:e.jsx("div",{className:"confetti-animation",children:Array.from({length:50}).map((p,h)=>e.jsx("div",{className:"confetti-piece",style:{left:`${Math.random()*100}%`,animationDelay:`${Math.random()*3}s`,backgroundColor:["#FF8895","#D72638","#3A7FFF","#2D9B66"][Math.floor(Math.random()*4)]}},h))})}),e.jsxs("div",{className:"container mx-auto px-4 py-12 relative z-20",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("div",{className:"mb-6",children:e.jsx(Ae,{className:"h-20 w-20 text-yellow-500 mx-auto animate-bounce"})}),e.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-gray-900 mb-4",children:"Congratulations!"}),e.jsxs("p",{className:"text-xl text-gray-600 mb-6 max-w-2xl mx-auto",children:["You've successfully completed ",e.jsxs("span",{className:"font-semibold text-gray-900",children:['"',a.title,'"']})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-6 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ie,{className:"h-4 w-4"}),e.jsxs("span",{children:["Completed in ",j(g.timeSpent)]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{className:"h-4 w-4 text-green-500"}),e.jsxs("span",{children:[q,"/",B," lessons"]})]}),g.grade&&e.jsxs("div",{className:`flex items-center space-x-2 px-3 py-1 rounded-full ${E(g.grade)}`,children:[e.jsx(We,{className:"h-4 w-4"}),e.jsxs("span",{className:"font-medium",children:["Grade: ",g.grade]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Cs,{className:"h-4 w-4 text-blue-500"}),e.jsxs("span",{children:["Completed ",g.completedAt.toLocaleDateString()]})]})]})]}),e.jsx("div",{className:"flex justify-center mb-8",children:e.jsx("div",{className:"bg-white rounded-xl p-1 shadow-lg border border-gray-200",children:[{id:"summary",label:"Summary",icon:Me},{id:"certificate",label:"Certificate",icon:De},{id:"next-steps",label:"Next Steps",icon:Be}].map(({id:p,label:h,icon:i})=>e.jsxs("button",{onClick:()=>w(p),className:`px-6 py-3 rounded-lg font-medium transition-all duration-200 flex items-center space-x-2 ${L===p?"bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-md":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[e.jsx(i,{className:"h-4 w-4"}),e.jsx("span",{children:h})]},p))})}),e.jsxs("div",{className:"max-w-4xl mx-auto",children:[L==="summary"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg border border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Course Summary"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[a.thumbnail&&e.jsx("img",{src:a.thumbnail,alt:a.title,className:"w-16 h-16 rounded-lg object-cover"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:a.title}),a.instructor&&e.jsxs("p",{className:"text-sm text-gray-600",children:["by ",a.instructor]}),a.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:a.description})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:q}),e.jsx("div",{className:"text-sm text-green-600",children:"Lessons Completed"})]}),e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:j(g.timeSpent)}),e.jsx("div",{className:"text-sm text-blue-600",children:"Time Invested"})]})]}),g.score&&e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[g.score,"%"]}),e.jsx("div",{className:"text-sm text-purple-600",children:"Overall Score"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg border border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Key Takeaways"}),b.length>0?e.jsx("ul",{className:"space-y-4",children:b.map((p,h)=>e.jsxs("li",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-gradient-to-r from-orange-400 to-red-500 rounded-full flex items-center justify-center text-white text-sm font-bold",children:h+1}),e.jsx("span",{className:"text-gray-700",children:p})]},h))}):e.jsxs("div",{className:"text-center text-gray-500 py-8",children:[e.jsx(Me,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No specific takeaways recorded for this course."})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Share Your Achievement"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("button",{onClick:()=>C("linkedin"),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Ws,{className:"h-4 w-4"}),e.jsx("span",{children:"LinkedIn"})]}),e.jsxs("button",{onClick:()=>C("twitter"),className:"flex items-center space-x-2 px-4 py-2 bg-sky-500 text-white rounded-lg hover:bg-sky-600 transition-colors",children:[e.jsx(Gs,{className:"h-4 w-4"}),e.jsx("span",{children:"Twitter"})]}),e.jsxs("button",{onClick:()=>C("email"),className:"flex items-center space-x-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[e.jsx(Hs,{className:"h-4 w-4"}),e.jsx("span",{children:"Email"})]}),e.jsxs("button",{onClick:()=>C("copy"),className:"flex items-center space-x-2 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors",children:[e.jsx(Js,{className:"h-4 w-4"}),e.jsx("span",{children:l?"Copied!":"Copy Link"})]})]})]})]})]}),L==="certificate"&&e.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg border border-gray-200 text-center",children:[e.jsx(De,{className:"h-16 w-16 text-yellow-500 mx-auto mb-6"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Your Certificate"}),g.certificateUrl?e.jsxs("div",{className:"space-y-6",children:[e.jsx("p",{className:"text-gray-600",children:"Congratulations! Your certificate is ready for download."}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 rounded-xl p-6 border border-orange-200",children:[e.jsx("div",{className:"font-semibold text-gray-900 mb-2",children:"Certificate of Completion"}),e.jsx("div",{className:"text-sm text-gray-600 mb-4",children:a.title}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Certificate ID: ",g.certificateId]})]}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsxs("button",{onClick:I,className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white px-8 py-3 rounded-xl font-semibold hover:from-green-600 hover:to-emerald-700 transition-all duration-200 shadow-lg flex items-center space-x-2",children:[e.jsx(qe,{className:"h-5 w-5"}),e.jsx("span",{children:"Download Certificate"})]}),e.jsxs("a",{href:g.certificateUrl,target:"_blank",rel:"noopener noreferrer",className:"bg-white border border-gray-300 text-gray-700 px-8 py-3 rounded-xl font-medium hover:bg-gray-50 transition-all duration-200 flex items-center space-x-2",children:[e.jsx(Xs,{className:"h-5 w-5"}),e.jsx("span",{children:"View Certificate"})]})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("p",{className:"text-gray-600",children:"Your certificate is being generated. Please check back in a few minutes."}),e.jsxs("button",{onClick:()=>window.location.reload(),className:"bg-gradient-to-r from-orange-500 to-red-500 text-white px-8 py-3 rounded-xl font-semibold hover:from-orange-600 hover:to-red-600 transition-all duration-200 shadow-lg flex items-center space-x-2 mx-auto",children:[e.jsx(Ge,{className:"h-5 w-5"}),e.jsx("span",{children:"Check Again"})]})]})]}),L==="next-steps"&&e.jsxs("div",{className:"space-y-8",children:[F.length>0&&e.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg border border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Recommended Next Steps"}),e.jsx("div",{className:"grid gap-6",children:F.map((p,h)=>e.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 rounded-xl",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-gradient-to-r from-orange-400 to-red-500 rounded-full flex items-center justify-center text-white font-bold",children:h+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:p.title}),e.jsx("p",{className:"text-gray-600 mb-3",children:p.description}),(p.action||p.href)&&e.jsxs("button",{onClick:p.action,className:"text-orange-600 hover:text-orange-700 font-medium text-sm flex items-center space-x-1",children:[e.jsx("span",{children:"Get Started"}),e.jsx(Be,{className:"h-4 w-4"})]})]})]},h))})]}),M.length>0&&e.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg border border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Continue Learning"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:M.map(p=>e.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden hover:shadow-md transition-shadow",children:[e.jsx("img",{src:p.thumbnail,alt:p.title,className:"w-full h-32 object-cover"}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:p.title}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-4",children:[e.jsx("span",{children:p.duration}),e.jsx("span",{className:"bg-gray-100 px-2 py-1 rounded",children:p.difficulty})]}),e.jsx("button",{className:"w-full bg-gradient-to-r from-orange-500 to-red-500 text-white py-2 rounded-lg font-medium hover:from-orange-600 hover:to-red-600 transition-all duration-200",children:"Start Course"})]})]},p.id))})]})]})]}),e.jsx("div",{className:"text-center mt-12",children:e.jsx("div",{className:"space-y-4",children:e.jsx("button",{onClick:P,className:"bg-white text-gray-700 border border-gray-300 px-8 py-3 rounded-xl font-medium hover:bg-gray-50 transition-all duration-200",children:"Return to Courses"})})})]}),e.jsx("style",{children:`
        .confetti-animation {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          overflow: hidden;
        }
        
        .confetti-piece {
          position: absolute;
          width: 8px;
          height: 8px;
          animation: confetti-fall 3s linear infinite;
        }
        
        @keyframes confetti-fall {
          0% {
            transform: translateY(-100vh) rotate(0deg);
            opacity: 1;
          }
          100% {
            transform: translateY(100vh) rotate(720deg);
            opacity: 0;
          }
        }
        
        @keyframes bounce-in {
          0% {
            transform: scale(0.3);
            opacity: 0;
          }
          50% {
            transform: scale(1.05);
            opacity: 1;
          }
          70% {
            transform: scale(0.9);
          }
          100% {
            transform: scale(1);
          }
        }
        
        .animate-bounce-in {
          animation: bounce-in 0.6s ease-out;
        }
      `})]})},yt=()=>{var Ze,es;const[a,g]=s.useState({clicks:0,timeSpent:0,interactions:0,completionPrediction:0}),[b,F]=s.useState([]),[M,P]=s.useState(!1),[I,T]=s.useState(null),N=s.useRef(),Q=s.useCallback(r=>H(void 0,null,function*(){N.current&&clearTimeout(N.current),N.current=setTimeout(()=>H(void 0,null,function*(){P(!0);try{T(new Date)}catch(m){}finally{P(!1)}}),2e3)}),[]),[z]=s.useState(Date.now()),L=s.useCallback((r,m)=>{g(d=>ae(te({},d),{clicks:d.clicks+(r==="click"?1:0),interactions:d.interactions+1,timeSpent:Date.now()-z}))},[z]),{moduleId:w,lessonId:A}=Zs(),x=et(),[l,v]=s.useState(0),[j,E]=s.useState(0),[C,B]=s.useState(""),[q,Y]=s.useState(0),[k,p]=s.useState({}),[h,i]=s.useState(!1),[n,y]=s.useState(null),[_,J]=s.useState({}),[ie,fe]=s.useState(!1),[ye,c]=s.useState(0),[U,V]=s.useState(0),[W,se]=s.useState(!0),Z=s.useRef(null),G=s.useRef(),[ue,ce]=s.useState(Date.now()),[oe,re]=s.useState(!1),[pe,ee]=s.useState(!1),[Pe,Ne]=s.useState(!1),u=s.useMemo(()=>{const r=w?Ke.getCourse(w):null;return console.log("ðŸ“– Loading course data for ID:",w,"Found:",!!r,"Refresh time:",ue),r},[w,ue]),Oe=r=>{var d;if(!r)return{isValid:!1,issues:["Course not found"]};const m=[];return(!r.modules||r.modules.length===0)&&m.push("No modules found"),r.title||m.push("Course title missing"),(d=r.modules)==null||d.forEach((O,R)=>{var D;(!O.lessons||O.lessons.length===0)&&m.push(`Module ${R+1} has no lessons`),(D=O.lessons)==null||D.forEach((me,Ce)=>{var Ee;me.type==="video"&&!((Ee=me.content)!=null&&Ee.videoUrl)&&m.push(`Module ${R+1}, Lesson ${Ce+1}: Video lesson missing videoUrl`),me.title||m.push(`Module ${R+1}, Lesson ${Ce+1}: Missing title`)})}),{isValid:m.length===0,issues:m}},S=(Ze=u==null?void 0:u.modules)==null?void 0:Ze[l],t=S==null?void 0:S.lessons[j],Ye=Oe(u);console.log("ðŸ” Course Data Validation:",Ye),console.log("ðŸ“š LMS Module Debug:",{moduleIdParam:w,lessonIdParam:A,course:u,courseModules:u==null?void 0:u.modules,currentModuleIndex:l,currentLessonIndex:j,currentModule:S,currentLessonData:t}),s.useEffect(()=>{const r=()=>{se(!0),G.current=setInterval(()=>{V(d=>d+1)},1e3)},m=()=>{se(!1),G.current&&clearInterval(G.current)};return window.addEventListener("focus",r),window.addEventListener("blur",m),r(),()=>{window.removeEventListener("focus",r),window.removeEventListener("blur",m),G.current&&clearInterval(G.current)}},[]),s.useEffect(()=>{w&&!u&&(console.log("ðŸ”„ Course not found, forcing store refresh for ID:",w),window.location.reload())},[w,u]);const Se=s.useCallback(()=>H(void 0,null,function*(){if(!oe){re(!0);try{console.log("ðŸ”„ Manually refreshing course data..."),yield Ke.init(),ce(Date.now()),setTimeout(()=>{re(!1),ee(!0),console.log("âœ… Course data refreshed successfully"),setTimeout(()=>{ee(!1)},3e3)},1e3)}catch(r){console.error("âŒ Failed to refresh course data:",r),re(!1)}}}),[oe]);s.useEffect(()=>{const r=setInterval(()=>H(void 0,null,function*(){!oe&&document.visibilityState==="visible"&&(console.log("ðŸ”„ Auto-refreshing course data..."),yield Ke.init(),ce(Date.now()))}),3e4);return()=>clearInterval(r)},[oe]),s.useEffect(()=>{const r=Ns.subscribeToCourseUpdates(d=>{console.log("ðŸ”„ Real-time course update received:",d),(d.courseId===w||d.manual)&&(ce(Date.now()),d.manual&&(ee(!0),setTimeout(()=>ee(!1),3e3)))}),m=Ns.subscribeToRefresh(d=>{console.log("ðŸ”„ Global refresh received:",d),ce(Date.now()),d.manual&&(ee(!0),setTimeout(()=>ee(!1),3e3))});return()=>{r(),m()}},[w]),s.useEffect(()=>{const r=()=>{document.visibilityState==="visible"&&!oe&&(console.log("ðŸ‘ï¸ Page became visible, checking for course updates..."),Se())};return document.addEventListener("visibilitychange",r),()=>document.removeEventListener("visibilitychange",r)},[Se,oe]);const{lessonProgress:o,reflections:$,loading:de,error:ke,updateLessonProgress:be,markLessonComplete:_e,saveReflection:$e,setActiveLessonTracking:Re}=ct(w||"",{enableAutoSave:!0,enableRealtime:!0,autoSaveInterval:3e4});s.useEffect(()=>{t!=null&&t.id&&$[t.id]?B($[t.id].content):B("")},[l,j,$,t]),s.useEffect(()=>{t!=null&&t.id&&Re&&Re(t.id)},[t==null?void 0:t.id,Re]),s.useEffect(()=>{if(u&&A)for(let r=0;r<(u.modules||[]).length;r++){const d=(u.modules||[])[r].lessons.findIndex(O=>O.id===A);if(d!==-1){v(r),E(d);return}}},[A,u]);const we=s.useCallback(()=>H(void 0,null,function*(){const r=o[(t==null?void 0:t.id)||""];if(!((r==null?void 0:r.completed)||!1)&&t&&S&&(yield _e(t.id,S.id)),S&&j<S.lessons.length-1){const d=j+1;E(d),x(`/lms/module/${w}/lesson/${S.lessons[d].id}`)}else if(u&&l<(u.modules||[]).length-1){const d=l+1;v(d),E(0),x(`/lms/module/${w}/lesson/${(u.modules||[])[d].lessons[0].id}`)}p({}),i(!1),y(null),J({}),fe(!1)}),[j,l,u,S,t,o,_e,w,x]),xe=s.useCallback(()=>{if(S&&j>0){const r=j-1;E(r),x(`/lms/module/${w}/lesson/${S.lessons[r].id}`)}else if(u&&l>0){const r=l-1,m=(u.modules||[])[r];v(r),E(m.lessons.length-1),x(`/lms/module/${w}/lesson/${m.lessons[m.lessons.length-1].id}`)}p({}),i(!1),y(null),J({}),fe(!1)},[j,l,u,S,w,x]),Fe=s.useCallback(r=>H(void 0,null,function*(){if(!(!t||!S))return be(t.id,S.id,r)}),[t,S,be]),Ue=s.useCallback(()=>H(void 0,null,function*(){if(!(!C.trim()||!t))try{yield $e(t.id,C)}catch(r){console.error("Error saving reflection:",r)}}),[C,t,$e]),He=s.useCallback(()=>{if(!S||!t)return;const r=[],m=o[t.id],d=(m==null?void 0:m.completed)||!1;ye<50&&a.timeSpent>3e5&&r.push({type:"speed",title:"Try adjusting video speed",description:"Consider increasing playback speed to 1.25x for better engagement",action:()=>{Z.current&&(Z.current.playbackRate=1.25)}}),d&&j<((S==null?void 0:S.lessons.length)||0)-1&&r.push({type:"next",title:"Continue momentum",description:"You're doing great! Ready for the next lesson?",action:we}),C.length>0&&C.length<50&&r.push({type:"reflect",title:"Expand your reflection",description:"Add more details to deepen your learning experience",action:()=>{var O;return(O=document.querySelector("textarea"))==null?void 0:O.focus()}}),F(r)},[ye,a,j,S,C,o,t,we]);s.useEffect(()=>{a.interactions>0&&He()},[a.interactions,He]);const Le=s.useMemo(()=>{var D;if(!u||a.timeSpent<6e4)return null;const r=((D=u.modules)==null?void 0:D.reduce((me,Ce)=>me+Ce.lessons.length,0))||0,m=Object.values(o).filter(me=>me.completed).length,d=a.timeSpent/Math.max(m,1),O=r-m,R=O*d;return{totalLessons:r,completedLessons:m,remainingLessons:O,estimatedTimeRemaining:R,completionPercentage:Math.round(m/r*100)}},[u,o,a.timeSpent]),je=(()=>{const r=(u.modules||[]).reduce((d,O)=>d+O.lessons.length,0),m=Object.values(o).filter(d=>d.completed).length;return r>0?Math.round(m/r*100):0})();if(s.useEffect(()=>{je>=100&&Ne(!0)},[je]),!u)return e.jsxs("div",{className:"p-6 max-w-4xl mx-auto text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Course Not Found"}),e.jsx(Qe,{to:"/lms/courses",className:"text-orange-500 hover:text-orange-600",children:"â† Back to Courses"})]});if(de)return e.jsxs("div",{className:"p-6 max-w-4xl mx-auto text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Loading course..."})]});if(ke)return e.jsx("div",{className:"p-6 max-w-4xl mx-auto text-center",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-red-900 mb-2",children:"Unable to Load Course"}),e.jsx("p",{className:"text-red-700 mb-4",children:"Please make sure you're logged in and try again."}),e.jsx(Qe,{to:"/lms/login",className:"inline-flex items-center bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700",children:"Go to Login"})]})});if(!S||!t)return e.jsx("div",{className:"p-6",children:"Loading..."});const ne=o[t.id],Je=(ne==null?void 0:ne.completed)||!1,Xe=()=>H(void 0,null,function*(){if(!t.content.questions)return;const r=t.content.questions;let m=0;const d=r.length;r.forEach(D=>{k[D.id]===D.correctAnswerIndex&&m++});const R=Math.round(m/d*100)>=(t.content.passingScore||80);y({score:m,maxScore:d,passed:R}),i(!0)}),Ss=()=>{fe(!0),Object.entries(_).some(([m,d])=>{var R,D;if(!d)return!1;const O=(D=(R=t.content)==null?void 0:R.options)==null?void 0:D[parseInt(m)];return O==null?void 0:O.isCorrect})&&Fe({completed:!0,progress_percentage:100})},ks=r=>{switch(r){case"video":return e.jsx(at,{className:"h-5 w-5"});case"interactive":return e.jsx(Ve,{className:"h-5 w-5"});case"quiz":return e.jsx(X,{className:"h-5 w-5"});case"download":return e.jsx(qe,{className:"h-5 w-5"});case"text":return e.jsx(Me,{className:"h-5 w-5"});default:return e.jsx(Me,{className:"h-5 w-5"})}},_s=()=>{var r,m;return e.jsxs("div",{className:"bg-orange-50 p-6 rounded-lg",children:[(r=t.content.questions)==null?void 0:r.map((d,O)=>e.jsxs("div",{className:"mb-8 last:mb-6",children:[e.jsxs("h4",{className:"font-medium text-orange-900 mb-4 text-lg",children:["Question ",O+1,": ",d.text]}),e.jsx("div",{className:"space-y-3",children:d.options.map((R,D)=>e.jsx("button",{onClick:()=>{h||p(me=>ae(te({},me),{[d.id]:D}))},disabled:h,className:`w-full text-left p-4 border-2 rounded-lg transition-all duration-200 ${h?D===d.correctAnswerIndex?"border-green-500 bg-green-50":k[d.id]===D?"border-red-500 bg-red-50":"border-gray-200 bg-gray-50":k[d.id]===D?"border-orange-500 bg-orange-50":"border-orange-200 hover:border-orange-300 hover:bg-orange-50"} ${h?"cursor-default":"cursor-pointer"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${h?D===d.correctAnswerIndex?"border-green-500 bg-green-500":k[d.id]===D?"border-red-500 bg-red-500":"border-gray-300":k[d.id]===D?"border-orange-500 bg-orange-500":"border-orange-300"}`,children:(h&&D===d.correctAnswerIndex||!h&&k[d.id]===D)&&e.jsx("div",{className:"w-full h-full rounded-full bg-white scale-50"})}),e.jsx("span",{className:"text-orange-900",children:R})]})},D))}),h&&d.explanation&&e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h5",{className:"font-medium text-blue-900 mb-2",children:"Explanation:"}),e.jsx("p",{className:"text-blue-800 text-sm",children:d.explanation})]})]},d.id)),!h&&e.jsx("div",{className:"text-center",children:e.jsxs("button",{onClick:Xe,disabled:Object.keys(k).length!==((m=t.content.questions)==null?void 0:m.length),className:"bg-orange-600 text-white px-8 py-3 rounded-lg hover:bg-orange-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center mx-auto space-x-2",children:[e.jsx(ys,{className:"h-5 w-5"}),e.jsx("span",{children:"Submit Quiz"})]})}),h&&n&&e.jsx("div",{className:`mt-6 p-6 rounded-lg border-2 ${n.passed?"border-green-500 bg-green-50":"border-red-500 bg-red-50"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:`text-3xl font-bold mb-2 ${n.passed?"text-green-600":"text-red-600"}`,children:[Math.round(n.score/n.maxScore*100),"%"]}),e.jsx("p",{className:`text-lg font-medium mb-2 ${n.passed?"text-green-800":"text-red-800"}`,children:n.passed?"Congratulations! You passed!":"Keep studying and try again"}),e.jsxs("p",{className:`text-sm ${n.passed?"text-green-700":"text-red-700"}`,children:["You scored ",n.score," out of ",n.maxScore," questions correctly"]}),n.passed&&e.jsxs("div",{className:"mt-4 flex items-center justify-center space-x-2 text-green-700",children:[e.jsx(De,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Lesson completed!"})]})]})})]})},Rs=()=>{var R,D,me,Ce,Ee,ss,ts,rs,ns,as,os,ls,is,cs,ds,ms,us;if(console.log("ðŸŽ¥ Rendering lesson content:",{lessonData:t,type:t.type,content:t.content,videoUrl:(R=t.content)==null?void 0:R.videoUrl}),console.log("ðŸ” Video Debug Details:",{lessonType:t.type,content:t.content,videoUrl:(D=t.content)==null?void 0:D.videoUrl,videoSourceType:(me=t.content)==null?void 0:me.videoSourceType,hasContent:!!t.content}),((Ce=t.content)==null?void 0:Ce.videoUrl)||t.type==="video"||t.type==="video"){const f=(Ee=t.content)==null?void 0:Ee.videoUrl;console.log("ðŸŽ¯ Current Lesson Debug:",{lessonId:t.id,lessonTitle:t.title,lessonType:t.type,courseId:u==null?void 0:u.id,courseTitle:u==null?void 0:u.title,moduleId:S==null?void 0:S.id,moduleTitle:S==null?void 0:S.title,contentKeys:Object.keys(t.content||{}),videoUrl:f});const ve=f&&f.trim()!==""&&f!=="undefined"&&f!=="null"&&!f.includes("placeholder")&&(f.startsWith("http")||f.startsWith("blob:")||f.startsWith("data:"));(f==null?void 0:f.startsWith("blob:"))&&console.log("âš ï¸ Warning: Blob URL detected - this may not work after page reload:",f),console.log("ðŸ” Video URL Validation:",{rawVideoUrl:f,isValidVideoUrl:ve,urlLength:f==null?void 0:f.length,trimmed:f==null?void 0:f.trim()});const ze=ve?f:"https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",Te=!ve,$s=f==null?void 0:f.startsWith("uploaded:");return console.log("ðŸŽ¬ Video URL Decision:",{videoUrl:f,finalVideoUrl:ze,isUsingFallback:Te}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(dt,{src:ze,title:t.title,onProgress:le=>{var hs;if(c(le),le>((ne==null?void 0:ne.progress_percentage)||0)){const Ls={progress_percentage:le,time_spent:Math.round(le/100*(((hs=Z.current)==null?void 0:hs.duration)||0))};Q({lessonId:t.id,moduleId:S.id,progress:Ls})}(le===25||le===50||le===75)&&L("progress_milestone",{milestone:le})},onComplete:()=>{L("video_complete"),be(t.id,S.id,{completed:!0,progress_percentage:100});const le=new CustomEvent("show-notification",{detail:{type:"success",message:"ðŸŽ‰ Lesson completed! Great job!",duration:3e3}});window.dispatchEvent(le)},initialTime:(ne==null?void 0:ne.time_spent)||0,autoPlay:!1,showTranscript:!!((ss=t.content)!=null&&ss.transcript),transcript:((ts=t.content)==null?void 0:ts.transcript)||"",captions:((ns=(rs=t.content)==null?void 0:rs.captions)==null?void 0:ns.map(le=>({start:le.startTime||0,end:le.endTime||0,text:le.text||""})))||[],className:"aspect-video"}),Te&&e.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:e.jsxs("p",{className:"text-yellow-800 text-sm",children:[e.jsx("strong",{children:"ðŸš§ Demo Video:"})," Using fallback video for demonstration."]})}),!Te&&e.jsx("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:e.jsxs("p",{className:"text-green-800 text-sm",children:[e.jsx("strong",{children:"âœ… Course Video:"})," Playing actual lesson video content."]})}),Te&&e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[e.jsx("p",{className:"text-yellow-800 text-sm",children:$s?e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"ðŸš§ Demo Video (File Upload):"})," You uploaded a video file (",f==null?void 0:f.replace("uploaded:",""),"), but file uploads require cloud storage setup. Playing demo video for now."]}):e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"ðŸš§ Demo Video:"})," No valid video URL found in lesson content. Playing fallback video for demonstration."]})}),e.jsx("div",{className:"mt-3 text-xs text-yellow-700 bg-yellow-100 p-2 rounded",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("strong",{children:"Debug Info:"}),e.jsx("br",{}),"Course ID: ",(u==null?void 0:u.id)||"undefined",e.jsx("br",{}),"Lesson ID: ",(t==null?void 0:t.id)||"undefined",e.jsx("br",{}),"Lesson Type: ",(t==null?void 0:t.type)||"undefined",e.jsx("br",{}),"Video URL: ",f||"undefined",e.jsx("br",{}),"Content Keys: ",Object.keys((t==null?void 0:t.content)||{}).join(", ")||"none"]}),e.jsxs("div",{className:"ml-4 flex flex-col space-y-1",children:[e.jsx("button",{onClick:()=>{console.log("ðŸ”„ Force refreshing course data..."),window.location.reload()},className:"bg-yellow-600 text-white px-2 py-1 rounded text-xs hover:bg-yellow-700",children:"Refresh"}),e.jsx("button",{onClick:()=>{console.log("ðŸ” Course Data:",u),console.log("ðŸ“Š Current Lesson:",t),alert("Check browser console for detailed course data")},className:"bg-blue-600 text-white px-2 py-1 rounded text-xs hover:bg-blue-700",children:"Debug"})]})]})})]}),!Te&&e.jsx("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:e.jsxs("p",{className:"text-green-800 text-sm",children:[e.jsx("strong",{children:"âœ… Course Video:"})," Playing actual lesson video content."]})}),((as=t.content)==null?void 0:as.transcript)&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Transcript"}),e.jsx("p",{className:"text-gray-700 text-sm whitespace-pre-wrap",children:t.content.transcript})]}),((os=t.content)==null?void 0:os.notes)&&e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Key Notes"}),e.jsx("p",{className:"text-blue-800 text-sm",children:t.content.notes})]})]})}const m=((ls=t.content)==null?void 0:ls.questions)&&t.content.questions.length>0,d=((is=t.content)==null?void 0:is.content)||((cs=t.content)==null?void 0:cs.textContent),O=[];if(m&&O.push(e.jsx("div",{className:"mt-8",children:e.jsxs("div",{className:"border-t border-gray-200 pt-8",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx(X,{className:"h-6 w-6 mr-2 text-orange-500"}),"Knowledge Check"]}),_s()]})},"quiz-section")),d&&O.push(e.jsx("div",{className:"mt-8",children:e.jsx("div",{className:"border-t border-gray-200 pt-8",children:e.jsx("div",{className:"prose max-w-none",children:e.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-900 mb-4",children:t.content.title||"Additional Reading"}),e.jsx("div",{className:"text-blue-800 whitespace-pre-wrap",children:t.content.content||t.content.textContent})]})})})},"text-section")),O.length>0)return e.jsx("div",{className:"space-y-6",children:O});switch(t.type){case"interactive":return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-green-50 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-xl font-bold text-green-900 mb-4",children:"Interactive Exercise"}),e.jsx("p",{className:"text-green-800 text-lg mb-6",children:t.content.scenarioText}),t.content.instructions&&e.jsx("div",{className:"bg-green-100 p-4 rounded-lg mb-6",children:e.jsx("p",{className:"text-green-800 text-sm font-medium",children:t.content.instructions})}),e.jsx("div",{className:"space-y-3",children:(ds=t.content.options)==null?void 0:ds.map((f,ve)=>e.jsxs("button",{onClick:()=>{J({[ve]:!0}),ie||fe(!0)},className:`w-full text-left p-4 border-2 rounded-lg transition-all duration-200 ${_[ve]?f.isCorrect?"border-green-500 bg-green-50":"border-red-500 bg-red-50":"border-green-200 hover:border-green-300 hover:bg-green-50"}`,children:[e.jsx("p",{className:"font-medium text-green-900 mb-2",children:f.text}),ie&&_[ve]&&e.jsxs("div",{className:`mt-3 p-3 rounded-lg ${f.isCorrect?"bg-green-100":"bg-red-100"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[f.isCorrect?e.jsx(X,{className:"h-5 w-5 text-green-600"}):e.jsx(vs,{className:"h-5 w-5 text-red-600"}),e.jsx("span",{className:`font-medium ${f.isCorrect?"text-green-800":"text-red-800"}`,children:f.isCorrect?"Correct!":"Not quite right"})]}),e.jsx("p",{className:`text-sm ${f.isCorrect?"text-green-700":"text-red-700"}`,children:f.feedback})]})]},ve))}),ie&&e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("button",{onClick:Ss,className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors duration-200 flex items-center mx-auto space-x-2",children:[e.jsx(X,{className:"h-5 w-5"}),e.jsx("span",{children:"Complete Exercise"})]})})]})});case"quiz":return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-orange-50 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-xl font-bold text-orange-900 mb-6",children:"Knowledge Check"}),(ms=t.content.questions)==null?void 0:ms.map((f,ve)=>e.jsxs("div",{className:"mb-8 last:mb-6",children:[e.jsxs("h4",{className:"font-medium text-orange-900 mb-4 text-lg",children:["Question ",ve+1,": ",f.text]}),e.jsx("div",{className:"space-y-3",children:f.options.map((xs,he)=>e.jsx("button",{onClick:()=>{h||p(ze=>ae(te({},ze),{[f.id]:he}))},disabled:h,className:`w-full text-left p-4 border-2 rounded-lg transition-all duration-200 ${h?he===f.correctAnswerIndex?"border-green-500 bg-green-50":k[f.id]===he?"border-red-500 bg-red-50":"border-gray-200 bg-gray-50":k[f.id]===he?"border-orange-500 bg-orange-50":"border-orange-200 hover:border-orange-300 hover:bg-orange-50"} ${h?"cursor-default":"cursor-pointer"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${h?he===f.correctAnswerIndex?"border-green-500 bg-green-500":k[f.id]===he?"border-red-500 bg-red-500":"border-gray-300":k[f.id]===he?"border-orange-500 bg-orange-500":"border-orange-300"}`,children:(h&&he===f.correctAnswerIndex||!h&&k[f.id]===he)&&e.jsx("div",{className:"w-full h-full rounded-full bg-white scale-50"})}),e.jsx("span",{className:"text-orange-900",children:xs})]})},he))}),h&&f.explanation&&e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h5",{className:"font-medium text-blue-900 mb-2",children:"Explanation:"}),e.jsx("p",{className:"text-blue-800 text-sm",children:f.explanation})]})]},f.id)),!h&&e.jsx("div",{className:"text-center",children:e.jsxs("button",{onClick:Xe,disabled:Object.keys(k).length!==((us=t.content.questions)==null?void 0:us.length),className:"bg-orange-600 text-white px-8 py-3 rounded-lg hover:bg-orange-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center mx-auto space-x-2",children:[e.jsx(ys,{className:"h-5 w-5"}),e.jsx("span",{children:"Submit Quiz"})]})}),h&&n&&e.jsx("div",{className:`mt-6 p-6 rounded-lg border-2 ${n.passed?"border-green-500 bg-green-50":"border-red-500 bg-red-50"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:`text-3xl font-bold mb-2 ${n.passed?"text-green-600":"text-red-600"}`,children:[Math.round(n.score/n.maxScore*100),"%"]}),e.jsx("p",{className:`text-lg font-medium mb-2 ${n.passed?"text-green-800":"text-red-800"}`,children:n.passed?"Congratulations! You passed!":"Keep studying and try again"}),e.jsxs("p",{className:`text-sm ${n.passed?"text-green-700":"text-red-700"}`,children:["You scored ",n.score," out of ",n.maxScore," questions correctly"]}),n.passed&&e.jsxs("div",{className:"mt-4 flex items-center justify-center space-x-2 text-green-700",children:[e.jsx(De,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Lesson completed!"})]})]})})]})});case"document":return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-900 mb-4",children:t.content.title||t.title}),e.jsx("p",{className:"text-blue-800 mb-6",children:t.content.description||"Download the resource below to continue your learning."}),t.content.fileUrl&&t.content.fileUrl.trim()?e.jsx("div",{className:"text-center",children:e.jsxs("a",{href:t.content.fileUrl,download:t.content.fileName,onClick:()=>{be(t.id,S.id,{completed:!0,progress_percentage:100})},target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center bg-blue-600 text-white px-8 py-4 rounded-lg hover:bg-blue-700 transition-colors duration-200 space-x-3 text-lg font-medium",children:[e.jsx(qe,{className:"h-6 w-6"}),e.jsxs("span",{children:["Download ",t.content.fileName||"Resource"]}),t.content.fileSize&&e.jsxs("span",{className:"text-blue-200",children:["(",t.content.fileSize,")"]})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(js,{className:"h-12 w-12 text-blue-400 mx-auto mb-4"}),e.jsx("p",{className:"text-blue-700",children:"Resource is being prepared"}),e.jsx("p",{className:"text-blue-600 text-sm mt-1",children:"Please check back later or contact your instructor"})]}),t.content.instructions&&e.jsxs("div",{className:"mt-6 bg-blue-100 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Instructions"}),e.jsx("p",{className:"text-blue-800 text-sm",children:t.content.instructions})]})]})});case"text":return e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"bg-indigo-50 p-6 rounded-lg",children:e.jsxs("div",{className:"prose max-w-none",children:[t.content.content&&e.jsx("div",{className:"text-gray-900 leading-relaxed whitespace-pre-wrap mb-6",children:t.content.content}),t.content.allowReflection&&t.content.reflectionPrompt&&e.jsxs("div",{className:"mt-8 bg-indigo-100 p-6 rounded-lg border border-indigo-200",children:[e.jsxs("h4",{className:"font-medium text-indigo-900 mb-4 flex items-center",children:[e.jsx(Ve,{className:"h-5 w-5 mr-2"}),"Reflection",t.content.requireReflection&&e.jsx("span",{className:"ml-2 text-sm text-indigo-700 bg-indigo-200 px-2 py-1 rounded",children:"Required"})]}),e.jsx("p",{className:"text-indigo-800 mb-4",children:t.content.reflectionPrompt}),e.jsx("textarea",{rows:6,className:"w-full p-4 border border-indigo-200 rounded-lg resize-vertical focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Share your thoughts and reflections here...",onChange:f=>{f.target.value.length>50&&be(t.id,S.id,{progress_percentage:Math.max((ne==null?void 0:ne.progress_percentage)||0,75),time_spent:((ne==null?void 0:ne.time_spent)||0)+1})}}),e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsx("p",{className:"text-sm text-indigo-600",children:"Take your time to reflect on the content above."}),e.jsxs("button",{onClick:()=>{be(t.id,S.id,{completed:!0,progress_percentage:100})},className:"bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200 flex items-center space-x-2",children:[e.jsx(X,{className:"h-4 w-4"}),e.jsx("span",{children:"Complete Reflection"})]})]})]}),!t.content.allowReflection&&e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("button",{onClick:()=>{be(t.id,S.id,{completed:!0,progress_percentage:100})},className:"bg-indigo-600 text-white px-8 py-3 rounded-lg hover:bg-indigo-700 transition-colors duration-200 flex items-center mx-auto space-x-2",children:[e.jsx(X,{className:"h-5 w-5"}),e.jsx("span",{children:"Mark as Complete"})]})})]})})});default:return e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg text-center",children:[e.jsx(Me,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:t.title}),e.jsx("p",{className:"text-gray-600",children:"Content for this lesson type is not yet available."})]})}};return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",style:{minHeight:"100vh"},children:[e.jsx(mt,{currentProgress:je,totalLessons:(u.modules||[]).reduce((r,m)=>r+m.lessons.length,0),completedLessons:Object.values(o).filter(r=>r.completed).length,currentLessonTitle:t.title,onPrevious:xe,onNext:we,hasPrevious:!(l===0&&j===0),hasNext:!0,estimatedTimeRemaining:Le?`${Math.round(Le.estimatedTimeRemaining/(1e3*60*60*24))} days`:void 0,visible:!0}),pe&&e.jsxs("div",{className:"fixed top-4 right-4 z-50 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg flex items-center space-x-2 animate-fade-in",children:[e.jsx(X,{className:"h-5 w-5"}),e.jsx("span",{children:"Course content refreshed successfully!"})]}),je>=100&&Pe&&e.jsx(ut,{course:{id:u.id,title:u.title,description:u.description||"",instructor:u.instructorName||"Course Instructor",duration:u.duration,modules:(es=u.modules)==null?void 0:es.map(r=>({id:r.id,title:r.title,lessons:r.lessons.map(m=>{var d;return{id:m.id,title:m.title,completed:((d=o[m.id])==null?void 0:d.completed)||!1}})}))},completionData:{completedAt:new Date,timeSpent:Math.round(U/60),score:85,grade:"A",certificateId:`cert-${u.id}-${Date.now()}`,certificateUrl:`/certificates/${u.id}`},keyTakeaways:u.keyTakeaways||["Enhanced leadership skills through practical application","Improved understanding of team dynamics and communication","Developed strategic thinking and decision-making abilities"],nextSteps:[{title:"Advanced Leadership Course",description:"Continue your leadership journey with advanced concepts",href:"/lms/courses/advanced-leadership"},{title:"Mentorship Program",description:"Apply your skills by mentoring other learners",href:"/lms/mentorship"}],onClose:()=>{Ne(!1),x("/lms/courses")},onCertificateDownload:()=>H(void 0,null,function*(){L("certificate_downloaded")}),onShareComplete:r=>{L("achievement_shared",{platform:r})}}),e.jsxs("div",{className:"mb-6",children:[e.jsxs(Qe,{to:"/lms/courses",className:"inline-flex items-center text-orange-500 hover:text-orange-600 mb-4",children:[e.jsx(bs,{className:"h-4 w-4 mr-2"}),"Back to Courses"]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:u.title}),e.jsx("p",{className:"text-gray-600",children:u.description}),e.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:["Module ",l+1," of ",(u.modules||[]).length,": ",S.title]}),e.jsxs("button",{onClick:Se,disabled:oe,className:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Refresh course content",children:[e.jsx(Ge,{className:`h-4 w-4 mr-1 ${oe?"animate-spin":""}`}),oe?"Refreshing...":"Refresh Content"]})]})]}),pe&&e.jsxs("div",{className:"fixed top-4 right-4 z-50 bg-green-100 border border-green-400 text-green-800 px-4 py-3 rounded-lg shadow-lg flex items-center space-x-2",children:[e.jsx(X,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"font-medium",children:"Course content updated successfully!"})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[u&&u.modules&&u.modules.length>0&&e.jsx("div",{className:"lg:w-80 flex-shrink-0",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Course Progress"}),e.jsx("div",{className:"space-y-4",children:(u.modules||[]).map((r,m)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"p-3 bg-gray-50 border-b border-gray-200",children:e.jsx("h4",{className:"font-medium text-gray-900",children:r.title})}),e.jsx("div",{className:"p-2 space-y-1",children:r.lessons.map((d,O)=>{const R=o[d.id],D=m===l&&O===j;return e.jsx("button",{onClick:()=>{v(m),E(O),p({}),i(!1),y(null),x(`/lms/module/${r.id}/lesson/${d.id}`)},className:`w-full text-left p-2 rounded-lg transition-colors duration-200 ${D?"bg-orange-50 border border-orange-200":"hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-1 rounded ${D?"text-orange-500":R!=null&&R.completed?"text-green-500":"text-gray-400"}`,children:R!=null&&R.completed?e.jsx(X,{className:"h-5 w-5"}):e.jsx(Ie,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium text-sm ${D?"text-orange-900":"text-gray-900"}`,children:d.title}),e.jsx("p",{className:"text-xs text-gray-600",children:d.duration})]})]}),(R==null?void 0:R.completed)&&e.jsx(X,{className:"h-4 w-4 text-green-500"})]})},d.id)})})]},r.id))})]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mb-6",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:t.title}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(Ie,{className:"h-4 w-4 mr-1"}),t.duration]}),e.jsx("span",{className:"capitalize",children:t.type}),Je&&e.jsxs("span",{className:"flex items-center text-green-600",children:[e.jsx(X,{className:"h-4 w-4 mr-1"}),"Completed"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:xe,disabled:l===0&&j===0,className:"p-2 rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(bs,{className:"h-5 w-5"})}),e.jsx("button",{onClick:we,className:"p-2 rounded-lg border border-gray-300 hover:bg-gray-50",children:e.jsx(Be,{className:"h-5 w-5"})}),!Je&&t.type!=="quiz"&&e.jsxs("button",{onClick:()=>_e(t.id,S.id),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors duration-200 flex items-center space-x-2",children:[e.jsx(X,{className:"h-4 w-4"}),e.jsx("span",{children:"Mark Complete"})]})]})]})}),e.jsx("div",{className:"p-6",children:Rs()})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center",children:[e.jsx(Ve,{className:"h-5 w-5 mr-2 text-blue-500"}),"Reflection & Notes"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[M&&e.jsxs("div",{className:"flex items-center text-orange-600 text-sm",children:[e.jsx(Ge,{className:"h-4 w-4 mr-1 animate-spin"}),"Auto-saving..."]}),I&&e.jsxs("div",{className:"flex items-center text-green-600 text-sm",children:[e.jsx(X,{className:"h-4 w-4 mr-1"}),"Saved ",I.toLocaleTimeString()]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{value:C,onChange:r=>{B(r.target.value),L("reflection_edit"),Q({lessonId:t.id,moduleId:S.id,progress:{reflection:r.target.value}})},onFocus:()=>L("reflection_focus"),placeholder:"What are your key takeaways from this lesson? How will you apply these concepts in your leadership role?",className:"w-full h-32 p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none transition-all duration-200"}),e.jsx("div",{className:"absolute bottom-2 right-2 flex items-center space-x-2",children:e.jsxs("div",{className:`text-xs px-2 py-1 rounded ${C.length>200?"bg-green-100 text-green-600":C.length>50?"bg-yellow-100 text-yellow-600":"bg-gray-100 text-gray-600"}`,children:[C.length," chars"]})})]}),C.length<50&&e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("p",{className:"text-sm text-blue-800 font-medium mb-2",children:"ðŸ’¡ Writing Prompts:"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:"â€¢ What surprised you most about this content?"}),e.jsx("li",{children:"â€¢ How does this relate to your current leadership challenges?"}),e.jsx("li",{children:"â€¢ What specific action will you take this week?"})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:$[t.id]?`Previously saved: ${new Date($[t.id].updated_at).toLocaleString()}`:"Notes are auto-saved as you type"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[C.length>=100&&e.jsxs("div",{className:"flex items-center text-green-600 text-sm",children:[e.jsx(Ae,{className:"h-4 w-4 mr-1"}),"Great reflection!"]}),e.jsxs("button",{onClick:Ue,disabled:!C.trim(),className:"bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[e.jsx(st,{className:"h-4 w-4"}),e.jsx("span",{children:"Save Now"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Key Takeaways"}),e.jsx("ul",{className:"space-y-3",children:(u.keyTakeaways||[]).map((r,m)=>e.jsxs("li",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-400 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700",children:r})]},m))})]})]}),e.jsxs("div",{className:"lg:w-80 flex-shrink-0 space-y-6",children:[b.length>0&&e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl shadow-sm border border-blue-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-blue-900 mb-4 flex items-center",children:[e.jsx(tt,{className:"h-5 w-5 mr-2 text-yellow-500"}),"Smart Recommendations"]}),e.jsx("div",{className:"space-y-3",children:b.map((r,m)=>e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg p-4 border border-blue-200/50 hover:bg-white/90 transition-all duration-200",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-1",children:r.title}),e.jsx("p",{className:"text-sm text-blue-700 mb-3",children:r.description}),e.jsxs("button",{onClick:r.action,className:"inline-flex items-center px-3 py-1.5 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 transition-colors duration-200",children:[e.jsx(ws,{className:"h-3 w-3 mr-1"}),"Apply"]})]}),e.jsxs("div",{className:"ml-3",children:[r.type==="speed"&&e.jsx(rt,{className:"h-5 w-5 text-blue-500"}),r.type==="next"&&e.jsx(Be,{className:"h-5 w-5 text-green-500"}),r.type==="reflect"&&e.jsx(Ve,{className:"h-5 w-5 text-orange-500"})]})]})},m))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(nt,{className:"h-5 w-5 mr-2 text-green-500"}),"Your Progress Today"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Math.round(U/60)}),e.jsx("div",{className:"text-xs text-gray-600",children:"Minutes Focused"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:a.interactions}),e.jsx("div",{className:"text-xs text-gray-600",children:"Interactions"})]})]}),Le&&e.jsxs("div",{className:"mt-4 p-3 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg border border-purple-200",children:[e.jsx("div",{className:"text-sm font-medium text-purple-900 mb-1",children:"Completion Prediction"}),e.jsxs("div",{className:"text-lg font-bold text-purple-600",children:[Math.round(Le.estimatedTimeRemaining/(1e3*60*60*24))," days"]}),e.jsxs("div",{className:"text-xs text-purple-700",children:[Le.remainingLessons," lessons remaining"]})]}),!W&&e.jsxs("div",{className:"mt-3 flex items-center text-amber-600 text-sm",children:[e.jsx(vs,{className:"h-4 w-4 mr-1"}),"Focus to continue tracking progress"]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Course Progress"}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[e.jsx("span",{children:"Overall Progress"}),e.jsxs("span",{children:[je,"%"]})]}),e.jsxs("div",{className:"w-full bg-gray-200 rounded-full h-3 relative overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-400 to-red-500 h-3 rounded-full transition-all duration-700 ease-out relative",style:{width:`${je}%`},children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-pulse"})}),[25,50,75].map(r=>e.jsx("div",{className:`absolute top-0 bottom-0 w-0.5 transition-colors duration-300 ${je>=r?"bg-green-400":"bg-gray-300"}`,style:{left:`${r}%`}},r))]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:Object.values(o).filter(r=>r.completed).length})," of"," ",e.jsx("span",{className:"font-medium",children:(u.modules||[]).reduce((r,m)=>r+m.lessons.length,0)})," lessons completed"]}),je===100&&e.jsxs("div",{className:"mt-4 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-200 rounded-lg text-center relative overflow-hidden animate-pulse",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-100/0 via-green-100/50 to-green-100/0 animate-pulse"}),e.jsxs("div",{className:"relative",children:[e.jsx(De,{className:"h-10 w-10 text-green-600 mx-auto mb-3 animate-bounce"}),e.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-2",children:[e.jsx("span",{className:"text-2xl",children:"ðŸŽ‰"}),e.jsx("p",{className:"font-bold text-green-800 text-lg",children:"Course Completed!"}),e.jsx("span",{className:"text-2xl",children:"ðŸŽ‰"})]}),e.jsx("p",{className:"text-sm text-green-700 mb-3",children:"Congratulations! You've successfully completed all lessons."}),e.jsxs("div",{className:"flex justify-center space-x-4 text-xs text-green-600",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(X,{className:"h-3 w-3"}),e.jsxs("span",{children:[Object.values(o).filter(r=>r.completed).length," Lessons"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ie,{className:"h-3 w-3"}),e.jsx("span",{children:u.duration})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(We,{className:"h-3 w-3"}),e.jsx("span",{children:"100% Complete"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Course Content"}),e.jsx("div",{className:"space-y-4",children:(u.modules||[]).map((r,m)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"p-3 bg-gray-50 border-b border-gray-200",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:r.title}),e.jsxs("p",{className:"text-sm text-gray-600",children:[r.lessons.length," lessons â€¢ ",r.duration]})]}),e.jsx("div",{className:"p-2 space-y-1",children:r.lessons.map((d,O)=>{const R=o[d.id],D=m===l&&O===j;return e.jsxs("button",{onClick:()=>{v(m),E(O),p({}),i(!1),y(null),J({}),fe(!1),x(`/lms/module/${w}/lesson/${d.id}`)},className:`w-full text-left p-2 rounded-lg transition-colors duration-200 ${D?"bg-orange-50 border border-orange-200":"hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-1 rounded ${D?"text-orange-500":R!=null&&R.completed?"text-green-500":"text-gray-400"}`,children:R!=null&&R.completed?e.jsx(X,{className:"h-5 w-5"}):ks(d.type)}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium text-sm ${D?"text-orange-900":"text-gray-900"}`,children:d.title}),e.jsx("p",{className:"text-xs text-gray-600",children:d.duration})]})]}),(R==null?void 0:R.completed)&&e.jsx(X,{className:"h-4 w-4 text-green-500"})]}),R&&R.progress_percentage>0&&R.progress_percentage<100&&e.jsx("div",{className:"mt-2 ml-8",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1",children:e.jsx("div",{className:"bg-orange-400 h-1 rounded-full",style:{width:`${R.progress_percentage}%`}})})})]},d.id)})})]},r.id))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Module Resources"}),e.jsxs("div",{className:"space-y-3",children:[(S.resources||[]).map((r,m)=>e.jsxs("a",{href:r.downloadUrl,className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(js,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:r.title}),e.jsxs("p",{className:"text-sm text-gray-600",children:[r.type," â€¢ ",r.size]})]})]}),e.jsx(qe,{className:"h-5 w-5 text-gray-400"})]},m)),(S.resources||[]).length===0&&e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No additional resources for this module"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Rate This Module"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Help us improve the learning experience"}),e.jsxs("div",{className:"flex items-center space-x-1 mb-4",children:[[1,2,3,4,5].map(r=>e.jsx("button",{onClick:()=>Y(r),className:`hover:text-yellow-500 ${q>=r?"text-yellow-400":"text-gray-300"}`,children:e.jsx(We,{className:"h-6 w-6 fill-current"})},r)),q>0&&e.jsxs("span",{className:"ml-2 text-sm text-gray-600",children:["Thanks for rating! (",q,"/5)"]})]}),e.jsx(Qe,{to:"/lms/feedback",className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Leave detailed feedback â†’"})]})]})]})]})};export{yt as default};
