var sa=Object.defineProperty,ta=Object.defineProperties;var aa=Object.getOwnPropertyDescriptors;var ft=Object.getOwnPropertySymbols;var ra=Object.prototype.hasOwnProperty,na=Object.prototype.propertyIsEnumerable;var yt=(a,t,s)=>t in a?sa(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,k=(a,t)=>{for(var s in t||(t={}))ra.call(t,s)&&yt(a,s,t[s]);if(ft)for(var s of ft(t))na.call(t,s)&&yt(a,s,t[s]);return a},P=(a,t)=>ta(a,aa(t));var z=(a,t,s)=>new Promise((n,i)=>{var l=m=>{try{g(s.next(m))}catch(h){i(h)}},x=m=>{try{g(s.throw(m))}catch(h){i(h)}},g=m=>m.done?n(m.value):Promise.resolve(m.value).then(l,x);g((s=s.apply(a,t)).next())});import{r as b,j as e,X as Oe,I as Et,s as As,t as de,v as ss,w as tt,x as Xe,y as ia,A as Ce,k as _e,g as ts,z as we,U as Se,G as It,J as Ze,F as js,K as rs,i as ns,l as Me,D as ye,N as ie,E as ce,O as Ne,Q as at,c as Je,W as ct,Y as us,_ as Xs,$ as Is,a0 as la,C as ms,a1 as Vs,e as Ls,a2 as Ps,h as Pe,u as is,a3 as He,a4 as qs,a5 as Ts,a6 as Es,L as oa,p as Ae,d as vs,S as dt,b as Ge,f as zs,Z as $e,B as Be,T as xs,V as Ke,a7 as Cs,H as ps,a as qe,a8 as Pt,a9 as ca,M as da,q as Ye,aa as Ss,ab as mt,ac as cs,ad as Bs,ae as os,af as rt,ag as Ws,R as ds,ah as nt,ai as Ds,aj as ma,ak as xa,al as ua,am as ga,an as ha,ao as pa,ap as ba,aq as fa,ar as Dt,as as Rt,at as ya,au as ja,av as va}from"./vendor-react-DvkU9ZSQ.js";import{L as oe}from"./admin-courses-Othof8Q0.js";import{p as Na,v as xt,R as Js,L as wa,X as jt,Y as vt,C as Nt,T as et,a as Ca,B as Sa,b as ka,P as Aa,c as Ta,d as Ea}from"./vendor-Dox2Yl3q.js";let fe;{console.warn('Supabase environment variables not found. Please click "Connect to Supabase" in the top right to set up your database connection.');const a=()=>({select:()=>a(),insert:()=>a(),update:()=>a(),upsert:()=>a(),delete:()=>a(),eq:()=>a(),order:()=>a(),single:()=>Promise.resolve({data:null,error:{message:"Supabase not configured"}}),then:s=>s({data:[],error:null})}),t={on:()=>t,subscribe:s=>(setTimeout(()=>s("SUBSCRIBED"),100),t),send:()=>Promise.resolve("ok"),unsubscribe:()=>Promise.resolve("ok")};fe={auth:{getSession:()=>Promise.resolve({data:{session:null},error:null}),getUser:()=>Promise.resolve({data:{user:null},error:null}),signUp:()=>Promise.resolve({data:{user:null},error:{message:"Supabase not configured"}}),signInWithPassword:()=>Promise.resolve({data:{user:null},error:{message:"Supabase not configured"}}),signOut:()=>Promise.resolve({error:null}),resetPasswordForEmail:()=>Promise.resolve({error:{message:"Password reset not available in demo mode"}}),onAuthStateChange:()=>({data:{subscription:{unsubscribe:()=>{}}}})},from:()=>a(),channel:()=>t,removeChannel:()=>"ok"}}const Ia=({message:a,type:t,isVisible:s,onClose:n,duration:i=3e3})=>{if(b.useEffect(()=>{if(s&&i>0){const g=setTimeout(()=>{n()},i);return()=>clearTimeout(g)}},[s,i,n]),!s)return null;const x=(()=>{switch(t){case"success":return{bgColor:"bg-green-50 border-green-200",textColor:"text-green-800",icon:e.jsx(de,{className:"h-5 w-5 text-green-500"})};case"error":return{bgColor:"bg-red-50 border-red-200",textColor:"text-red-800",icon:e.jsx(As,{className:"h-5 w-5 text-red-500"})};case"info":default:return{bgColor:"bg-blue-50 border-blue-200",textColor:"text-blue-800",icon:e.jsx(Et,{className:"h-5 w-5 text-blue-500"})}}})();return e.jsx("div",{className:"fixed top-4 right-4 z-50 animate-in slide-in-from-right duration-300",children:e.jsx("div",{className:`max-w-sm w-full ${x.bgColor} border border-l-4 rounded-lg p-4 shadow-lg`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:x.icon}),e.jsx("div",{className:"ml-3 flex-1",children:e.jsx("p",{className:`text-sm font-medium ${x.textColor}`,children:a})}),e.jsx("div",{className:"ml-4 flex-shrink-0",children:e.jsx("button",{onClick:n,className:`inline-flex rounded-md p-1.5 ${x.textColor} hover:bg-opacity-20 hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500`,children:e.jsx(Oe,{className:"h-4 w-4"})})})]})})})},Lt=b.createContext(void 0),Ve=()=>{const a=b.useContext(Lt);if(!a)throw new Error("useToast must be used within a ToastProvider");return a},nn=({children:a})=>{const[t,s]=b.useState({message:"",type:"info",isVisible:!1,duration:3e3}),n=(l,x="info",g=3e3)=>{s({message:l,type:x,isVisible:!0,duration:g})},i=()=>{s(l=>P(k({},l),{isVisible:!1}))};return e.jsxs(Lt.Provider,{value:{showToast:n},children:[a,e.jsx("div",{className:"fixed top-4 right-4 z-50",children:e.jsx(Ia,{message:t.message,type:t.type,isVisible:t.isVisible,onClose:i,duration:t.duration})})]})};const it=()=>{try{const a=localStorage.getItem("huddle_courses");if(a)return JSON.parse(a)}catch(a){console.error("Error loading courses from localStorage:",a)}return lt()},bs=a=>{try{localStorage.setItem("huddle_courses",JSON.stringify(a))}catch(t){console.error("Error saving courses to localStorage:",t)}},lt=()=>({foundations:{id:"foundations",title:"Foundations of Inclusive Leadership",description:"Build the fundamental skills needed to lead with empathy and create psychological safety for your team.",status:"published",thumbnail:"https://images.pexels.com/photos/3184465/pexels-photo-3184465.jpeg?auto=compress&cs=tinysrgb&w=800",duration:"45 min",difficulty:"Beginner",enrollments:247,completions:198,completionRate:80,avgRating:4.9,totalRatings:156,createdBy:"Mya Dennis",createdDate:"2025-01-15",lastUpdated:"2025-02-15",publishedDate:"2025-01-20",dueDate:"2025-04-15",estimatedTime:"45-60 minutes",prerequisites:["Basic understanding of leadership principles","Completion of organizational onboarding"],learningObjectives:["Understand the core principles of inclusive leadership","Recognize the importance of psychological safety in teams","Develop skills for creating inclusive environments","Practice self-reflection and awareness techniques"],certification:{available:!0,name:"Inclusive Leadership Foundation Certificate",requirements:["Complete all 4 lessons","Pass knowledge check with 80% or higher","Submit leadership reflection worksheet"],validFor:"1 year",renewalRequired:!0},tags:["Leadership","Empathy","Psychological Safety"],keyTakeaways:["Psychological safety is the foundation of inclusive leadership","Vulnerability builds trust and encourages authentic communication","Self-awareness is crucial for recognizing your impact on others","Creating inclusive environments requires intentional daily actions"],type:"Video + Worksheet",lessons:4,rating:4.9,progress:100,modules:[{id:"module-1",title:"Introduction to Inclusive Leadership",description:"Explore the foundations and principles of inclusive leadership",duration:"15 min",order:1,lessons:[{id:"lesson-1-1",title:"What is Inclusive Leadership?",type:"video",duration:"8 min",content:{videoUrl:"https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",transcript:"Welcome to our comprehensive course on inclusive leadership...",notes:"Key concepts: empathy, psychological safety, authentic leadership"},completed:!0,order:1},{id:"lesson-1-2",title:"The Business Case for Inclusion",type:"interactive",duration:"7 min",content:{elements:[{id:"scenario-1",type:"scenario",title:"Meeting Dynamics Challenge",order:1,data:[{id:"scenario-1-start",title:"The Situation",text:"You notice that during team meetings, certain team members rarely speak up while others dominate the conversation. As an inclusive leader, how would you address this?",image:"https://images.pexels.com/photos/3184465/pexels-photo-3184465.jpeg?auto=compress&cs=tinysrgb&w=800",isStartingScenario:!0,choices:[{id:"choice-1",text:"Directly call on quiet team members to share their thoughts",feedback:"This approach might put people on the spot and create discomfort. Consider how this might affect psychological safety.",isCorrect:!1,nextScenarioId:"scenario-1-direct",points:0},{id:"choice-2",text:"Implement structured discussion formats like round-robin or small group breakouts",feedback:"Excellent! This creates equal opportunities for participation while maintaining psychological safety.",isCorrect:!0,nextScenarioId:"scenario-1-structured",points:10},{id:"choice-3",text:"Address the issue privately with the dominant speakers",feedback:"This is a good start, but you also need to create structures that naturally encourage balanced participation.",isCorrect:!1,nextScenarioId:"scenario-1-private",points:5}]},{id:"scenario-1-structured",title:"Follow-up Action",text:"Great choice! You've implemented structured discussions. Now a team member approaches you after the meeting saying they still feel hesitant to share. What's your next step?",choices:[{id:"choice-4",text:"Schedule a one-on-one conversation to understand their concerns",feedback:"Perfect! Individual conversations help you understand specific barriers and build trust.",isCorrect:!0,points:10},{id:"choice-5",text:"Encourage them to speak up more in the next meeting",feedback:"This doesn't address the underlying concerns that make them hesitant to participate.",isCorrect:!1,points:0}],isEndingScenario:!0},{id:"scenario-1-direct",title:"Unintended Consequences",text:"You called on quiet team members directly. You notice some of them seem uncomfortable and one person hasn't attended the last two meetings. How do you recover?",choices:[{id:"choice-6",text:"Reach out individually to apologize and understand their perspective",feedback:"Good recovery! Acknowledging the impact and seeking to understand shows inclusive leadership.",isCorrect:!0,points:8},{id:"choice-7",text:"Continue the same approach - they need to learn to speak up",feedback:"This approach ignores the impact on psychological safety and may worsen the situation.",isCorrect:!1,points:0}],isEndingScenario:!0},{id:"scenario-1-private",title:"Partial Solution",text:"You spoke privately with the dominant speakers. The meetings are less dominated, but participation is still uneven. What additional step would be most effective?",choices:[{id:"choice-8",text:"Implement structured discussion formats to create equal opportunities",feedback:"Exactly! Combining individual conversations with structural changes creates lasting improvement.",isCorrect:!0,points:10},{id:"choice-9",text:"Wait and see if the situation improves naturally",feedback:"Passive approaches rarely create the inclusive environments we want to build.",isCorrect:!1,points:0}],isEndingScenario:!0}]}],currentScenarioId:"scenario-1-start",userChoices:{},completedElements:[]},completed:!0,order:2}],resources:[{id:"resource-1-1",title:"Leadership Self-Assessment",type:"pdf",size:"2.3 MB",downloadUrl:"https://storage.thehuddleco.com/resources/leadership-assessment.pdf",downloadable:!0}]},{id:"module-2",title:"Building Psychological Safety",description:"Learn how to create environments where team members feel safe to speak up",duration:"20 min",order:2,lessons:[{id:"lesson-2-1",title:"Understanding Psychological Safety",type:"video",duration:"12 min",content:{videoUrl:"https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4",transcript:"Psychological safety is the belief that you can speak up...",notes:"Key concepts about psychological safety and team dynamics"},completed:!0,order:1}],resources:[{id:"resource-2-1",title:"Psychological Safety Checklist",type:"pdf",size:"1.8 MB",downloadUrl:"https://storage.thehuddleco.com/resources/psych-safety-checklist.pdf",downloadable:!0}]}]},bias:{id:"bias",title:"Recognizing and Mitigating Bias",description:"Learn to identify unconscious bias in decision-making and develop strategies to create more equitable processes.",status:"published",thumbnail:"https://images.pexels.com/photos/3184291/pexels-photo-3184291.jpeg?auto=compress&cs=tinysrgb&w=800",duration:"60 min",difficulty:"Intermediate",enrollments:189,completions:142,completionRate:75,avgRating:4.8,totalRatings:142,createdBy:"Mya Dennis",createdDate:"2025-01-10",lastUpdated:"2025-02-10",publishedDate:"2025-01-15",dueDate:"2025-04-20",estimatedTime:"60-75 minutes",prerequisites:["Completion of Foundations of Inclusive Leadership"],learningObjectives:["Identify different types of unconscious bias","Understand how bias affects decision-making","Develop strategies for bias mitigation","Create structured decision-making processes"],certification:{available:!0,name:"Bias Recognition and Mitigation Certificate",requirements:["Complete all 5 lessons","Pass final quiz with 85% or higher","Complete bias assessment exercise"],validFor:"1 year",renewalRequired:!0},tags:["Bias","Equity","Decision Making"],keyTakeaways:["Everyone has unconscious biases that affect decision-making","Structured processes help reduce the impact of bias","Regular bias training and awareness are essential","Accountability systems ensure consistent application of fair practices"],type:"Interactive + Quiz",lessons:5,rating:4.8,progress:75,modules:[{id:"module-1",title:"Understanding Unconscious Bias",description:"Learn about different types of bias and their impact",duration:"25 min",order:1,lessons:[{id:"lesson-1-1",title:"Types of Unconscious Bias",type:"video",duration:"15 min",content:{videoUrl:"https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerBlazes.mp4",transcript:"There are many types of unconscious bias...",notes:"Key bias types: confirmation bias, affinity bias, halo effect",questions:[{id:"bias-q1",text:"Which of the following is an example of confirmation bias?",options:["Hiring someone because they went to the same school as you","Only seeking information that supports your existing beliefs","Assuming someone is qualified based on their appearance","Making decisions based on first impressions"],correctAnswerIndex:1,explanation:"Confirmation bias is the tendency to search for, interpret, and recall information that confirms our pre-existing beliefs or hypotheses."},{id:"bias-q2",text:"What is affinity bias?",options:["The tendency to favor people who are similar to ourselves","The tendency to make quick judgments based on first impressions","The tendency to seek information that confirms our beliefs","The tendency to be influenced by recent events"],correctAnswerIndex:0,explanation:"Affinity bias is the unconscious tendency to get along with others who are like us, which can lead to favoritism in hiring and promotion decisions."},{id:"bias-q3",text:"True or False: Everyone has unconscious biases.",options:["True","False"],correctAnswerIndex:0,explanation:"Research shows that everyone has unconscious biases. The key is becoming aware of them and developing strategies to mitigate their impact."}]},completed:!0,order:1},{id:"lesson-1-2",title:"Bias Self-Assessment",type:"interactive",duration:"10 min",content:{elements:[{id:"bias-scenario-1",type:"scenario",title:"Hiring Bias Challenge",order:1,data:[{id:"bias-start",title:"The Hiring Decision",text:"During a hiring process, you find yourself immediately drawn to a candidate who attended the same university as you. You feel a strong connection and sense of familiarity.",image:"https://images.pexels.com/photos/3184291/pexels-photo-3184291.jpeg?auto=compress&cs=tinysrgb&w=800",isStartingScenario:!0,choices:[{id:"bias-choice-1",text:"Trust your instinct since shared experiences create good team fit",feedback:"This demonstrates affinity bias - favoring people similar to yourself. This can lead to less diverse and innovative teams.",isCorrect:!1,nextScenarioId:"bias-affinity",points:0},{id:"bias-choice-2",text:"Acknowledge the bias and focus evaluation on job-relevant criteria",feedback:"Excellent! Recognizing bias is the first step to fair decision-making. This approach ensures merit-based hiring.",isCorrect:!0,nextScenarioId:"bias-structured",points:10},{id:"bias-choice-3",text:"Ask a colleague to review your assessment",feedback:"Good instinct! Getting a second opinion can help counteract bias, though self-awareness is also important.",isCorrect:!0,nextScenarioId:"bias-colleague",points:8}]},{id:"bias-structured",title:"Structured Evaluation",text:"You've implemented a structured evaluation focusing on job-relevant criteria. All candidates are assessed using the same framework. This is an example of:",choices:[{id:"bias-choice-4",text:"Bias mitigation through structured processes",feedback:"Correct! Structured processes are one of the most effective ways to reduce the impact of unconscious bias.",isCorrect:!0,points:10},{id:"bias-choice-5",text:"Overthinking the hiring process",feedback:"Not quite. Structure in hiring actually improves decision quality and reduces bias.",isCorrect:!1,points:0}],isEndingScenario:!0}]},{id:"bias-dragdrop-1",type:"drag-drop",title:"Bias Types Classification",order:2,data:{id:"bias-types-exercise",title:"Classify Types of Bias",instructions:"Drag each scenario to the correct type of bias it demonstrates.",items:[{id:"scenario-1",text:"Assuming a young employee lacks experience",category:"age-bias"},{id:"scenario-2",text:"Favoring candidates from prestigious schools",category:"affinity-bias"},{id:"scenario-3",text:"Believing first impressions predict performance",category:"halo-effect"},{id:"scenario-4",text:"Seeking information that confirms existing beliefs",category:"confirmation-bias"}],zones:[{id:"age-bias-zone",label:"Age Bias",acceptedItems:["scenario-1"],feedback:"Correct! Age bias involves making assumptions based on someone's age rather than their actual capabilities."},{id:"affinity-bias-zone",label:"Affinity Bias",acceptedItems:["scenario-2"],feedback:"Right! Affinity bias is favoring people who are similar to us in background, education, or experience."},{id:"halo-effect-zone",label:"Halo Effect",acceptedItems:["scenario-3"],feedback:"Exactly! The halo effect is when one positive trait influences our overall impression."},{id:"confirmation-bias-zone",label:"Confirmation Bias",acceptedItems:["scenario-4"],feedback:"Perfect! Confirmation bias is seeking information that supports what we already believe."}],shuffleItems:!0}}],currentScenarioId:"bias-start",userChoices:{},completedElements:[]},completed:!0,order:2}],resources:[{id:"resource-1-1",title:"Bias Recognition Toolkit",type:"pdf",size:"3.1 MB",downloadUrl:"https://storage.thehuddleco.com/resources/bias-toolkit.pdf",downloadable:!0}]}]},empathy:{id:"empathy",title:"Empathy in Action",description:"Develop practical empathy skills through real-world scenarios and case studies from diverse organizations.",status:"published",thumbnail:"https://images.pexels.com/photos/3184338/pexels-photo-3184338.jpeg?auto=compress&cs=tinysrgb&w=800",duration:"40 min",difficulty:"Intermediate",enrollments:156,completions:124,completionRate:79,avgRating:4.9,totalRatings:124,createdBy:"Mya Dennis",createdDate:"2025-02-05",lastUpdated:"2025-02-05",publishedDate:"2025-02-05",estimatedTime:"40-50 minutes",prerequisites:[],learningObjectives:["Develop active listening techniques","Practice perspective-taking exercises","Learn to respond to team conflicts","Build emotional intelligence"],tags:["Empathy","Case Studies","Emotional Intelligence"],keyTakeaways:["Active listening techniques","Perspective-taking exercises","Responding to team conflicts","Building emotional intelligence"],type:"Case Study",lessons:3,rating:4.9,progress:50,modules:[{id:"module-1",title:"Foundations of Empathy",description:"Understanding empathy and its role in leadership",duration:"40 min",order:1,lessons:[{id:"lesson-1-1",title:"What is Empathy?",type:"video",duration:"15 min",content:{videoUrl:"https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerEscapes.mp4",transcript:"Empathy is the ability to understand and share feelings...",notes:"Cognitive vs emotional empathy, compassionate empathy"},completed:!0,order:1},{id:"lesson-1-2",title:"Active Listening Practice",type:"interactive",duration:"15 min",content:{elements:[{id:"empathy-scenario-1",type:"scenario",title:"Upset Team Member",order:1,data:[{id:"empathy-start",title:"The Situation",text:"A team member approaches you visibly upset about a project decision. Their body language suggests they're frustrated and feeling unheard.",image:"https://images.pexels.com/photos/3184338/pexels-photo-3184338.jpeg?auto=compress&cs=tinysrgb&w=800",isStartingScenario:!0,choices:[{id:"empathy-choice-1",text:"Listen fully before offering solutions",feedback:"Excellent! Active listening builds trust and understanding. This creates space for them to feel heard.",isCorrect:!0,nextScenarioId:"empathy-listen",points:10},{id:"empathy-choice-2",text:"Immediately offer advice to solve their problem",feedback:"This misses the opportunity to truly understand their perspective and may make them feel more unheard.",isCorrect:!1,nextScenarioId:"empathy-advice",points:0},{id:"empathy-choice-3",text:"Ask them to schedule a meeting to discuss it later",feedback:"While scheduling can be appropriate, their immediate emotional state suggests they need to be heard now.",isCorrect:!1,nextScenarioId:"empathy-delay",points:3}]},{id:"empathy-listen",title:"Active Listening",text:"You listen carefully as they explain their frustration. They feel their input wasn't considered in the decision. They're now looking to you for validation. How do you respond?",choices:[{id:"empathy-choice-4",text:"Acknowledge their feelings and ask clarifying questions",feedback:"Perfect! You're demonstrating empathy and seeking to understand their full perspective.",isCorrect:!0,points:10},{id:"empathy-choice-5",text:"Explain why the decision was made the way it was",feedback:"While explanation may be needed later, right now they need to feel heard and validated.",isCorrect:!1,points:2}],isEndingScenario:!0},{id:"empathy-advice",title:"Missed Opportunity",text:`You offered immediate solutions, but they seem more frustrated. They say "You're not listening to me!" How do you recover?`,choices:[{id:"empathy-choice-6",text:"Stop, apologize, and ask them to help you understand",feedback:"Great recovery! Acknowledging your mistake and refocusing on understanding shows humility and empathy.",isCorrect:!0,points:8},{id:"empathy-choice-7",text:"Defend your approach and explain you were trying to help",feedback:"This defensive response will likely escalate the situation and damage trust.",isCorrect:!1,points:0}],isEndingScenario:!0},{id:"empathy-delay",title:"Emotional Needs",text:"They reluctantly agree to schedule a meeting but seem deflated. You realize they needed immediate emotional support. What do you do?",choices:[{id:"empathy-choice-8",text:"Recognize their immediate need and offer to talk now",feedback:"Good adjustment! Recognizing and responding to emotional needs in the moment shows empathetic leadership.",isCorrect:!0,points:7},{id:"empathy-choice-9",text:"Stick with the scheduled meeting approach",feedback:"Missing the emotional component of leadership can damage relationships and trust.",isCorrect:!1,points:1}],isEndingScenario:!0}]},{id:"empathy-dragdrop-1",type:"drag-drop",title:"Empathy Skills Matching",order:2,data:{id:"empathy-skills-exercise",title:"Match Empathy Skills to Situations",instructions:"Drag each empathy skill to the situation where it would be most effective.",items:[{id:"skill-1",text:"Active Listening",category:"communication"},{id:"skill-2",text:"Perspective Taking",category:"cognitive"},{id:"skill-3",text:"Emotional Validation",category:"emotional"},{id:"skill-4",text:"Reflective Questioning",category:"communication"}],zones:[{id:"zone-1",label:"Team member is sharing a personal struggle",acceptedItems:["skill-1","skill-3"],feedback:"Correct! Active listening and emotional validation are key when someone is sharing personal challenges."},{id:"zone-2",label:"Conflict between two team members",acceptedItems:["skill-2","skill-4"],feedback:"Right! Understanding both perspectives and asking reflective questions helps resolve conflicts."}],shuffleItems:!0}},{id:"empathy-clickable-1",type:"clickable-graphic",title:"Reading Body Language",order:3,data:{id:"body-language-exercise",title:"Identify Signs of Discomfort",instructions:"Click on the areas that might indicate someone is feeling uncomfortable or excluded in this meeting scenario.",image:"https://images.pexels.com/photos/3184291/pexels-photo-3184291.jpeg?auto=compress&cs=tinysrgb&w=800",regions:[{id:"region-1",x:20,y:30,width:15,height:20,feedback:"Correct! Crossed arms often indicate defensiveness or discomfort.",isCorrect:!0,points:5},{id:"region-2",x:60,y:25,width:12,height:15,feedback:"Good observation! Avoiding eye contact can signal disengagement or discomfort.",isCorrect:!0,points:5},{id:"region-3",x:45,y:60,width:10,height:10,feedback:"Not quite. This person appears engaged and comfortable in the discussion.",isCorrect:!1,points:0}],allowMultipleClicks:!0}},{id:"empathy-quiz-1",type:"embedded-quiz",title:"Empathy Knowledge Check",order:4,data:{id:"empathy-knowledge-check",title:"Quick Knowledge Check",instructions:"Test your understanding of empathy in leadership.",questions:[{id:"eq-1",text:"What is the difference between sympathy and empathy?",type:"multiple-choice",options:["There is no difference","Sympathy is feeling sorry for someone, empathy is understanding their perspective","Empathy is feeling sorry for someone, sympathy is understanding their perspective","Both involve giving advice to help solve problems"],correctAnswer:1,explanation:"Empathy involves understanding and sharing someone's feelings, while sympathy is feeling sorry for their situation.",points:5},{id:"eq-2",text:"True or False: Empathy means you have to agree with everyone's perspective.",type:"true-false",options:["True","False"],correctAnswer:1,explanation:"Empathy is about understanding perspectives, not necessarily agreeing with them. You can empathize while maintaining your own viewpoint.",points:5}],passingScore:70,showResultsImmediately:!0}}],currentScenarioId:"scenario-1-start",userChoices:{},completedElements:[]},completed:!1,order:2},{id:"lesson-1-3",title:"Empathy in Leadership Quiz",type:"quiz",duration:"10 min",content:{questions:[{id:"q1",text:"What is the first step in demonstrating empathy?",options:["Offering immediate solutions","Active listening without judgment","Sharing your own similar experience","Giving advice based on your expertise"],correctAnswerIndex:1,explanation:"Active listening creates the foundation for understanding others' perspectives."}],passingScore:80,allowRetakes:!0,showCorrectAnswers:!0},completed:!1,order:3}],resources:[{id:"resource-1-1",title:"Empathy Assessment Tool",type:"pdf",size:"1.5 MB",downloadUrl:"https://storage.thehuddleco.com/resources/empathy-assessment.pdf",downloadable:!0}]}]}});let be=it();const xe={init:()=>z(void 0,null,function*(){try{{console.warn("Supabase not configured - using local storage for courses");const a=it();Object.keys(a).length===0?(be=lt(),bs(be),console.log("Initialized with default courses (local storage only)")):(be=a,console.log("Loaded courses from local storage"))}}catch(a){console.error("Error initializing course store:",a);const t=it();Object.keys(t).length===0?(be=lt(),bs(be)):be=t}}),getCourse:a=>be[a]||null,saveCourse:a=>{a.lastUpdated=new Date().toISOString(),be[a.id]=k({},a),bs(be)},getAllCourses:()=>Object.values(be),deleteCourse:a=>be[a]?(delete be[a],bs(be),!0):!1,createCourse:a=>{const t=a.id||`course-${Date.now()}`,s=k({id:t,title:a.title||"New Course",description:a.description||"",status:"draft",thumbnail:a.thumbnail||"https://images.pexels.com/photos/3184465/pexels-photo-3184465.jpeg?auto=compress&cs=tinysrgb&w=800",category:a.category||"General",difficulty:"Beginner",instructorId:a.instructorId||"instructor-1",instructorName:a.instructorName||"Mya Dennis",instructorAvatar:a.instructorAvatar||"",estimatedDuration:a.estimatedDuration||0,duration:"0 min",learningObjectives:[],prerequisites:[],tags:[],language:"en",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),enrollmentCount:0,enrollments:0,rating:0,avgRating:0,reviewCount:0,totalRatings:0,completions:0,completionRate:0,chapters:[],modules:[]},a);return be[t]=s,bs(be),s},updateCourseStats:(a,t)=>{be[a]&&(Object.assign(be[a],t),bs(be))}},zt="huddle_documents_v1",Ns=()=>{const a=localStorage.getItem(zt);if(!a)return[];try{return JSON.parse(a)}catch(t){return[]}},Gs=a=>localStorage.setItem(zt,JSON.stringify(a)),Pa=a=>z(void 0,null,function*(){let t=Ns();return a!=null&&a.orgId&&(t=t.filter(s=>s.visibility==="org"&&s.orgId===a.orgId||s.visibility==="global")),a!=null&&a.userId&&(t=t.filter(s=>s.visibility==="user"&&s.userId===a.userId||s.visibility==="global")),a!=null&&a.tag&&(t=t.filter(s=>s.tags.includes(a.tag))),a!=null&&a.category&&(t=t.filter(s=>s.category===a.category)),a!=null&&a.search&&(t=t.filter(s=>(s.name+" "+s.tags.join(" ")+" "+(s.category||"")).toLowerCase().includes(a.search.toLowerCase()))),t.sort((s,n)=>+new Date(n.createdAt)-+new Date(s.createdAt))}),Da=a=>z(void 0,null,function*(){return Ns().find(s=>s.id===a)||null}),Ra=(a,t)=>z(void 0,null,function*(){const s=Ns(),n=`doc-${Date.now()}`;let i=a.url;if(t&&(fe!=null&&fe.storage))try{const x=`${n}/${t.name}`,{error:g}=yield fe.storage.from("documents").upload(x,t,{upsert:!0});if(g)console.warn("Storage upload failed, falling back to data URL:",g.message||g);else{const{data:m}=fe.storage.from("documents").getPublicUrl(x);i=(m==null?void 0:m.publicUrl)||i}}catch(x){console.error("Upload exception:",x)}!i&&t&&(i=yield new Promise((x,g)=>{const m=new FileReader;m.onload=()=>x(String(m.result)),m.onerror=g,m.readAsDataURL(t)}));const l=P(k({id:n,createdAt:new Date().toISOString()},a),{url:i});return l.downloadCount=l.downloadCount||0,s.push(l),Gs(s),l}),La=a=>z(void 0,null,function*(){const t=Ns(),s=t.findIndex(n=>n.id===a);if(s!==-1)return t[s].downloadCount=(t[s].downloadCount||0)+1,Gs(t),t[s]}),ut=(a,t)=>z(void 0,null,function*(){const s=Ns(),n=s.findIndex(i=>i.id===a);if(n===-1)throw new Error("Not found");return s[n]=k(k({},s[n]),t),Gs(s),s[n]}),za=a=>z(void 0,null,function*(){let t=Ns();t=t.filter(s=>s.id!==a),Gs(t)}),Oa=(a,t)=>z(void 0,null,function*(){return ut(a,{visibility:"org",orgId:t})}),Ma=(a,t)=>z(void 0,null,function*(){return ut(a,{visibility:"user",userId:t})}),ks={listDocuments:Pa,getDocument:Da,addDocument:Ra,updateDocument:ut,deleteDocument:za,assignToOrg:Oa,assignToUser:Ma,recordDownload:La},Fa=6e4;class Ua{constructor(t={}){this.channels=new Map,this.lastSyncTimestamps={},this.fallbackTimer=null,this.fallbackPollInterval=Fa,this.online=typeof window!="undefined"?navigator.onLine:!0,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.connectionListeners=new Set,this.errorListeners=new Set,this.connected=!1,this.handleOnline=()=>{this.online=!0,this.emitConnectionStatus(),this.channels.forEach((s,n)=>{const i=this.buildChannelName(s.entity,s.options.scope);this.initializeChannel(s,i)})},this.handleOffline=()=>{this.online=!1,this.connected=!1,this.emitConnectionStatus()},t.fallbackPollInterval&&(this.fallbackPollInterval=t.fallbackPollInterval),typeof window!="undefined"&&(window.addEventListener("online",this.handleOnline),window.addEventListener("offline",this.handleOffline)),this.restoreLastSyncState()}destroy(){this.channels.forEach(t=>{t.channel&&fe.removeChannel(t.channel)}),this.channels.clear(),this.fallbackTimer&&(clearInterval(this.fallbackTimer),this.fallbackTimer=null),typeof window!="undefined"&&(window.removeEventListener("online",this.handleOnline),window.removeEventListener("offline",this.handleOffline))}onConnectionStatus(t){return this.connectionListeners.add(t),t({online:this.online,connected:this.connected}),()=>{this.connectionListeners.delete(t)}}onError(t){return this.errorListeners.add(t),()=>{this.errorListeners.delete(t)}}subscribe(t,s,n={}){const i=this.getScopeKey(t,n.scope),l=this.channels.get(i);if(l)return l.subscribers.add(s),()=>{l.subscribers.delete(s),l.subscribers.size===0&&this.teardownChannel(i)};const x=this.buildChannelName(t,n.scope),g={entity:t,channel:null,subscribers:new Set([s]),options:n,pending:[],scopeKey:i,isSubscribed:!1};return this.channels.set(i,g),this.initializeChannel(g,x),()=>{const m=this.channels.get(i);m&&(m.subscribers.delete(s),m.subscribers.size===0&&this.teardownChannel(i))}}broadcast(i,l){return z(this,arguments,function*(t,s,n={}){const x=this.getScopeKey(t,n.scope),g=this.channels.get(x);if(!g||!g.channel){console.warn("[RealTimeSyncEngine] No active channel for broadcast",{entity:t,scope:n.scope});return}try{yield g.channel.send({type:"broadcast",event:"sync_update",payload:{entity:t,data:s,timestamp:Date.now()}})}catch(m){console.error("[RealTimeSyncEngine] Broadcast failed",m),this.emitError(m)}})}getLastSync(t,s){var i;const n=this.getScopeKey(t,s);return((i=this.lastSyncTimestamps[n])==null?void 0:i[t])||null}initializeChannel(t,s){if(!fe){console.warn("[RealTimeSyncEngine] Supabase client is not available. Falling back to polling only."),this.ensureFallbackPolling();return}try{const n=this.buildFilter(t.options.scope),i=fe.channel(s).on("postgres_changes",{event:"*",schema:"public",table:t.entity,filter:n},l=>{this.handleRealtimePayload(t,l)}).on("broadcast",{event:"sync_update"},l=>{this.handleBroadcastPayload(t,l)}).subscribe(l=>{l==="SUBSCRIBED"?(t.isSubscribed=!0,this.reconnectAttempts=0,this.connected=!0,this.emitConnectionStatus()):(l==="CHANNEL_ERROR"||l==="CLOSED")&&(t.isSubscribed=!1,this.connected=!1,this.emitConnectionStatus(),this.retryChannel(t,s))});t.channel=i,this.ensureFallbackPolling()}catch(n){console.error("[RealTimeSyncEngine] Failed to initialize channel",{entity:t.entity,error:n}),this.emitError(n),this.retryChannel(t,s)}}retryChannel(t,s){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("[RealTimeSyncEngine] Max reconnect attempts reached for",s),this.ensureFallbackPolling();return}const n=Math.min(3e4,Math.pow(2,this.reconnectAttempts)*1e3);this.reconnectAttempts+=1,setTimeout(()=>{this.channels.has(t.scopeKey)&&this.initializeChannel(t,s)},n)}handleRealtimePayload(t,s){const{eventType:n,new:i,old:l}=s,x=n||"UPDATE",g=i||l;if(!g||!this.matchesScope(g,t.options.scope))return;const m={entity:t.entity,changeType:x,record:i,previousRecord:l,timestamp:Date.now(),scopeKey:t.scopeKey};this.queueEvent(t,m),this.updateLastSync(t,g)}handleBroadcastPayload(t,s){var x,g;if(!s)return;const n=s.data||((x=s.payload)==null?void 0:x.data),i=s.timestamp||((g=s.payload)==null?void 0:g.timestamp)||Date.now();if(!n)return;const l={entity:t.entity,changeType:"UPDATE",record:n,timestamp:i,scopeKey:t.scopeKey};this.queueEvent(t,l),this.updateLastSync(t,n)}queueEvent(t,s){if(t.pending.push(s),!t.options.debounceMs||t.options.debounceMs<=0){this.flushEvents(t);return}t.debounceTimer&&clearTimeout(t.debounceTimer),t.debounceTimer=window.setTimeout(()=>{this.flushEvents(t)},t.options.debounceMs)}flushEvents(t){if(t.debounceTimer&&(clearTimeout(t.debounceTimer),t.debounceTimer=void 0),t.pending.length===0)return;const s=[...t.pending];t.pending=[],t.subscribers.forEach(n=>{var i,l;try{n(s)}catch(x){console.error("[RealTimeSyncEngine] Subscriber error",x),(l=(i=t.options).onError)==null||l.call(i,x)}})}matchesScope(t,s){return s?!(s.organizationId&&(t!=null&&t.organization_id)&&t.organization_id!==s.organizationId||s.userId&&(t!=null&&t.user_id)&&t.user_id!==s.userId):!0}updateLastSync(t,s){var x,g;if(!s)return;const n=s.updated_at||s.inserted_at||s.created_at,i=n?new Date(n).getTime():Date.now(),l=(x=this.lastSyncTimestamps)[g=t.scopeKey]||(x[g]={});l[t.entity]=Math.max(l[t.entity]||0,i),this.persistLastSyncState()}ensureFallbackPolling(){this.fallbackTimer||(this.fallbackTimer=window.setInterval(()=>{this.pollAllChannels()},this.fallbackPollInterval))}pollAllChannels(){this.channels.forEach(t=>{this.pollChannel(t)})}pollChannel(t){return z(this,null,function*(){var s,n;try{const i=this.getLastSync(t.entity,t.options.scope)||0,l=new Date(i).toISOString(),x={};(s=t.options.scope)!=null&&s.organizationId&&(x.organization_id=t.options.scope.organizationId),(n=t.options.scope)!=null&&n.userId&&(x.user_id=t.options.scope.userId);let g=fe.from(t.entity).select("*").gt("updated_at",l).order("updated_at",{ascending:!0}).limit(200);Object.entries(x).forEach(([w,c])=>{g=g.eq(w,c)});const{data:m,error:h}=yield g;if(h)throw h;if(m&&m.length>0){const w=m.map(f=>({entity:t.entity,changeType:"UPDATE",record:f,timestamp:Date.now(),scopeKey:t.scopeKey}));t.subscribers.forEach(f=>f(w));const c=m[m.length-1];this.updateLastSync(t,c)}}catch(i){console.error("[RealTimeSyncEngine] Polling error",i),this.emitError(i)}})}teardownChannel(t){const s=this.channels.get(t);s&&(s.channel&&fe.removeChannel(s.channel),s.debounceTimer&&clearTimeout(s.debounceTimer),this.channels.delete(t))}buildChannelName(t,s){const n=["rt",t];return s!=null&&s.organizationId&&n.push(`org_${s.organizationId}`),s!=null&&s.userId&&n.push(`user_${s.userId}`),n.join(":")}buildFilter(t){if(t){if(t.userId)return`user_id=eq.${t.userId}`;if(t.organizationId)return`organization_id=eq.${t.organizationId}`}}getScopeKey(t,s){const n=(s==null?void 0:s.organizationId)||"global",i=(s==null?void 0:s.userId)||"all-users";return`${t}:${n}:${i}`}persistLastSyncState(){try{localStorage.setItem("huddle_last_sync_state",JSON.stringify(this.lastSyncTimestamps))}catch(t){console.warn("[RealTimeSyncEngine] Failed to persist last sync state",t)}}restoreLastSyncState(){try{const t=localStorage.getItem("huddle_last_sync_state");t&&(this.lastSyncTimestamps=JSON.parse(t))}catch(t){console.warn("[RealTimeSyncEngine] Failed to restore last sync state",t)}}emitConnectionStatus(){const t={online:this.online,connected:this.connected};this.connectionListeners.forEach(s=>s(t))}emitError(t){this.errorListeners.forEach(s=>s(t))}}const Fs=new Ua,_a={course_created:"courses",course_updated:"courses",course_deleted:"courses",course_assigned:"assignments",assignment_updated:"assignments",assignment_deleted:"assignments",survey_created:"surveys",survey_updated:"surveys",survey_deleted:"surveys",survey_response:"survey_responses",organization_updated:"organizations",user_updated:"users",notification_created:"notifications",notification_read:"notifications",user_progress:"user_lesson_progress",user_enrolled:"user_course_enrollments",user_completed:"user_course_enrollments",analytics_updated:"user_course_enrollments"};class $a{constructor(){this.subscribers={},this.syncInterval=null,this.lastSyncTime=Date.now(),this.isOnline=typeof navigator!="undefined"?navigator.onLine:!0,this.pendingSync=[],this.context={},this.realtimeUnsubscribers=[],this.realtimeInitialized=!1,this.connectionStatus={online:this.isOnline,connected:!1},typeof window!="undefined"&&(window.addEventListener("online",()=>{this.isOnline=!0,this.connectionStatus.online=!0,this.emit("connection_status",k({},this.connectionStatus)),this.processPendingSync(),this.ensureRealtimeSubscriptions()}),window.addEventListener("offline",()=>{this.isOnline=!1,this.connectionStatus.online=!1,this.connectionStatus.connected=!1,this.emit("connection_status",k({},this.connectionStatus))})),this.startSync(),this.ensureRealtimeSubscriptions()}configureContext(t){const s=t.userId!==this.context.userId||t.organizationId!==this.context.organizationId;this.context=k(k({},this.context),t),s&&this.resetRealtimeSubscriptions()}resetRealtimeSubscriptions(){this.realtimeUnsubscribers.forEach(t=>t()),this.realtimeUnsubscribers=[],this.realtimeInitialized=!1,this.ensureRealtimeSubscriptions()}isSupabaseConfigured(){return!1}ensureRealtimeSubscriptions(){if(!this.isSupabaseConfigured()){console.log("[SyncService] Supabase not configured - realtime sync disabled, using polling only.");return}if(this.realtimeInitialized)return;this.realtimeInitialized=!0;const t={organizationId:this.context.organizationId||this.getStoredOrganizationId(),userId:this.context.userId},s=(l,x,g=150)=>{const m=Fs.subscribe(l,x,{scope:t,debounceMs:g,onError:h=>{console.error("[SyncService] Realtime subscription error:",h)}});this.realtimeUnsubscribers.push(m)};s("courses",l=>this.handleCourseEvents(l)),s("modules",l=>this.handleCourseEvents(l)),s("lessons",l=>this.handleCourseEvents(l)),s("assignments",l=>this.handleAssignmentEvents(l)),s("course_assignments",l=>this.handleAssignmentEvents(l)),s("surveys",l=>this.handleSurveyEvents(l)),s("survey_responses",l=>this.handleSurveyResponseEvents(l)),s("organizations",l=>this.handleOrganizationEvents(l)),s("users",l=>this.handleUserEvents(l)),s("notifications",l=>this.handleNotificationEvents(l,t)),s("user_lesson_progress",l=>this.handleProgressEvents(l)),s("user_course_enrollments",l=>this.handleEnrollmentEvents(l));const n=Fs.onConnectionStatus(l=>{this.connectionStatus=l,this.emit("connection_status",l)});this.realtimeUnsubscribers.push(n);const i=Fs.onError(l=>{console.error("[SyncService] Realtime engine error:",l)});this.realtimeUnsubscribers.push(i)}getStoredOrganizationId(){try{const t=localStorage.getItem("huddle_user");if(!t)return;const s=JSON.parse(t);return(s==null?void 0:s.organizationId)||(s==null?void 0:s.organization)||void 0}catch(t){return}}handleCourseEvents(t){t.forEach(s=>{const n=s.record||s.previousRecord;if(!n)return;if(s.changeType==="DELETE"){n.id&&xe.deleteCourse(n.id),this.emit("course_deleted",{course:n,courseId:n.id,timestamp:s.timestamp,scope:this.context});return}xe.saveCourse(n);const i={course:n,courseId:n.id,timestamp:s.timestamp,scope:this.context};s.changeType==="INSERT"?this.emit("course_created",i):this.emit("course_updated",i)})}handleAssignmentEvents(t){t.forEach(s=>{const n=s.record||s.previousRecord;if(!n)return;const i={assignment:n,timestamp:s.timestamp,scope:this.context,courseId:n.course_id,organizationId:n.organization_id,userId:n.user_id};switch(s.changeType){case"INSERT":this.emit("course_assigned",i);break;case"UPDATE":this.emit("assignment_updated",i);break;case"DELETE":this.emit("assignment_deleted",i);break}})}handleSurveyEvents(t){t.forEach(s=>{const n=s.record||s.previousRecord;if(!n)return;const i={survey:n,timestamp:s.timestamp,scope:this.context};switch(s.changeType){case"INSERT":this.emit("survey_created",i);break;case"UPDATE":this.emit("survey_updated",i);break;case"DELETE":this.emit("survey_deleted",i);break}})}handleSurveyResponseEvents(t){t.forEach(s=>{const n=s.record||s.previousRecord;n&&(this.emit("survey_response",{response:n,timestamp:s.timestamp,scope:this.context}),this.emit("analytics_updated",{source:"survey",surveyId:n.survey_id,timestamp:s.timestamp,scope:this.context}))})}handleOrganizationEvents(t){t.forEach(s=>{const n=s.record||s.previousRecord;n&&this.emit("organization_updated",{organization:n,timestamp:s.timestamp,scope:this.context})})}handleUserEvents(t){t.forEach(s=>{const n=s.record||s.previousRecord;n&&this.emit("user_updated",{user:n,timestamp:s.timestamp,scope:this.context})})}handleNotificationEvents(t,s){t.forEach(n=>{const i=n.record||n.previousRecord;if(!i)return;const l={notification:i,timestamp:n.timestamp,scope:s};n.changeType==="DELETE"?this.emit("notification_read",l):this.emit("notification_created",l)})}handleProgressEvents(t){t.forEach(s=>{const n=s.record||s.previousRecord;if(!n)return;const i={progress:n,timestamp:s.timestamp,userId:n.user_id,courseId:n.course_id,lessonId:n.lesson_id,scope:this.context};this.emit("user_progress",i),n.completed&&this.emit("user_completed",P(k({},i),{completionType:"lesson"}))})}handleEnrollmentEvents(t){t.forEach(s=>{const n=s.record||s.previousRecord;if(!n)return;const i={enrollment:n,timestamp:s.timestamp,userId:n.user_id,courseId:n.course_id,scope:this.context};s.changeType==="INSERT"&&this.emit("user_enrolled",i),n.completed_at&&this.emit("user_completed",P(k({},i),{completionType:"course"})),this.emit("analytics_updated",{source:"course",courseId:n.course_id,timestamp:s.timestamp,scope:this.context})})}subscribe(t,s){return this.subscribers[t]||(this.subscribers[t]=new Set),this.subscribers[t].add(s),()=>{this.subscribers[t].delete(s)}}emit(t,s){this.subscribers[t]&&this.subscribers[t].forEach(n=>n(s))}refreshCourse(t){return z(this,null,function*(){try{if(this.isSupabaseConfigured()){const{data:s,error:n}=yield fe.from("courses").select(`
            *,
            modules (
              *,
              lessons (*)
            )
          `).eq("id",t).single();if(n)throw n;s&&xe.saveCourse(s),this.emit("course_updated",{course:s,courseId:t,timestamp:Date.now(),scope:this.context,manual:!0})}else yield xe.init(),this.emit("course_updated",{courseId:t,timestamp:Date.now(),scope:this.context,manual:!0})}catch(s){throw console.error("Error refreshing course:",t,s),s}})}refreshAll(){return z(this,null,function*(){try{yield xe.init(),this.emit("refresh_all",{timestamp:Date.now(),scope:this.context,manual:!0})}catch(t){throw console.error("Error during global refresh:",t),t}})}subscribeToCourseUpdates(t){return this.subscribe("course_updated",t)}subscribeToUserProgress(t){return this.subscribe("user_progress",t)}subscribeToRefresh(t){return this.subscribe("refresh_all",t)}startSync(){this.syncInterval||(this.syncInterval=window.setInterval(()=>{this.isOnline&&this.syncWithRemote()},6e4))}stopSync(){this.syncInterval&&(clearInterval(this.syncInterval),this.syncInterval=null)}syncWithRemote(){return z(this,null,function*(){try{const t=this.checkForRemoteUpdates();t.length>0&&t.forEach(s=>{this.handleRemoteUpdate(s)})}catch(t){console.error("Sync failed:",t)}})}checkForRemoteUpdates(){try{const t=localStorage.getItem("huddle_sync_log");if(!t)return[];const n=JSON.parse(t).filter(i=>i.timestamp>this.lastSyncTime);return n.length>0&&(this.lastSyncTime=Math.max(...n.map(i=>i.timestamp))),n}catch(t){return[]}}handleRemoteUpdate(t){var s;switch(t.type){case"course_updated":case"course_created":xe.saveCourse(t.data),this.emit(t.type,t.data);break;case"course_deleted":(s=t.data)!=null&&s.id&&xe.deleteCourse(t.data.id),this.emit(t.type,t.data);break;case"user_progress":case"user_completed":case"user_enrolled":this.emit(t.type,t.data);break;default:this.emit(t.type,t.data);break}}logSyncEvent(t){try{const s=localStorage.getItem("huddle_sync_log"),n=s?JSON.parse(s):[],i=P(k({},t),{timestamp:Date.now(),scope:t.scope||this.context});n.push(i);const l=n.slice(-100);localStorage.setItem("huddle_sync_log",JSON.stringify(l)),this.isOnline?(this.emit(t.type,i.data),this.broadcastEvent(i)):this.pendingSync.push(i)}catch(s){console.error("Failed to log sync event:",s)}}broadcastEvent(t){const s=_a[t.type];s&&Fs.broadcast(s,t.data,{scope:t.scope||this.context})}processPendingSync(){this.pendingSync.length!==0&&(this.pendingSync.forEach(t=>{this.emit(t.type,t.data),this.broadcastEvent(t)}),this.pendingSync=[])}forcSync(){return z(this,null,function*(){this.isOnline&&(yield this.syncWithRemote())})}getSyncStatus(){return{isOnline:this.isOnline,lastSyncTime:this.lastSyncTime,pendingEvents:this.pendingSync.length,isActive:this.syncInterval!==null,connection:this.connectionStatus}}}const We=new $a,qa=a=>({subscribe:We.subscribe.bind(We),logEvent:We.logSyncEvent.bind(We),forceSync:We.forcSync.bind(We),getStatus:We.getSyncStatus.bind(We),configureContext:We.configureContext.bind(We)}),Qe={required:a=>!a||typeof a=="string"&&a.trim()===""?"This field is required":null,email:a=>a?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)?null:"Please enter a valid email address":null,minLength:a=>t=>t?t.length>=a?null:`Must be at least ${a} characters`:null,maxLength:a=>t=>t?t.length<=a?null:`Must be no more than ${a} characters`:null,pattern:(a,t)=>s=>s?a.test(s)?null:t:null},Ba=(a,t)=>{const[s,n]=ss.useState(a),[i,l]=ss.useState({}),[x,g]=ss.useState({}),m=ss.useCallback((f,v)=>{const E=t[f];if(!E)return null;for(const y of E){const d=y(v);if(d)return d}return null},[t]),h=ss.useCallback((f,v)=>{if(n(E=>P(k({},E),{[f]:v})),x[f]){const E=m(f,v);l(y=>P(k({},y),{[f]:E}))}},[x,m]),w=ss.useCallback(f=>{g(E=>P(k({},E),{[f]:!0}));const v=m(f,s[f]);l(E=>P(k({},E),{[f]:v}))},[s,m]),c=ss.useCallback(()=>{const f={};let v=!0;return Object.keys(t).forEach(E=>{const y=m(E,s[E]);y&&(f[E]=y,v=!1)}),l(f),g(Object.keys(s).reduce((E,y)=>P(k({},E),{[y]:!0}),{})),v},[s,t,m]);return{values:s,errors:i,touched:x,setValue:h,setTouchedField:w,validateAll:c,isValid:Object.keys(i).length===0}},pt=class pt{static sanitizeHTML(t){return Na.sanitize(t,{ALLOWED_TAGS:["b","i","u","strong","em","p","br","ul","ol","li","a"],ALLOWED_ATTR:["href","target"],ALLOW_DATA_ATTR:!1})}static sanitizeInput(t){return t.trim().replace(/[<>]/g,"").replace(/javascript:/gi,"").replace(/on\w+=/gi,"").substring(0,1e3)}static validateAndSanitizeEmail(t){const s=this.sanitizeInput(t.toLowerCase());return{isValid:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(s)&&s.length<=254,sanitized:s}}static validateAndSanitizePhone(t){const s=t.replace(/[^\d\-\+\(\)\s]/g,"").trim();return{isValid:/^[\+]?[\d\-\(\)\s]{7,20}$/.test(s),sanitized:s}}static generateSecureToken(t=32){const s=new Uint8Array(t);return crypto.getRandomValues(s),Array.from(s,n=>n.toString(16).padStart(2,"0")).join("")}static validateFileUpload(t){if(t.size>10485760)return{isValid:!1,error:"File size too large (max 10MB)"};if(!["image/jpeg","image/png","image/gif","image/webp","application/pdf","text/csv","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(t.type))return{isValid:!1,error:"File type not allowed"};const i=t.name.toLowerCase().split(".").pop(),x={"image/jpeg":["jpg","jpeg"],"image/png":["png"],"image/gif":["gif"],"image/webp":["webp"],"application/pdf":["pdf"],"text/csv":["csv"],"application/vnd.ms-excel":["xls"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"]}[t.type];return!x||!x.includes(i||"")?{isValid:!1,error:"File extension does not match file type"}:{isValid:!0}}static createRateLimiter(t,s){const n=[];return{attempt:()=>{const i=Date.now();for(;n.length>0&&n[0]<=i-s;)n.shift();return n.length>=t?!1:(n.push(i),!0)},reset:()=>{n.length=0}}}static validateCSP(){return document.querySelector('meta[http-equiv="Content-Security-Policy"]')!==null}static detectThreats(){const t=[];if(typeof window!="undefined"){const i={open:!1,orientation:null};setInterval(()=>{window.outerHeight-window.innerHeight>200||window.outerWidth-window.innerWidth>200?i.open||(i.open=!0,t.push("Developer tools detected")):i.open=!1},1e3)}const s=new URLSearchParams(window.location.search),n=[/<script/i,/javascript:/i,/on\w+=/i,/<iframe/i];return s.forEach(i=>{n.forEach(l=>{l.test(i)&&t.push("Suspicious URL parameter detected")})}),t}static logSecurityEvent(t){const s=P(k({},t),{timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href,sessionId:this.secureStorage.get("session_id")||"anonymous"});console.log("Security Event:",s);try{const n=this.secureStorage.get("security_logs")||[];n.push(s),this.secureStorage.set("security_logs",n.slice(-100))}catch(n){console.error("Failed to log security event:",n)}}};pt.secureStorage={set:(t,s)=>{try{const n=btoa(JSON.stringify(s));localStorage.setItem(`secure_${t}`,n)}catch(n){console.error("Failed to store secure data:",n)}},get:t=>{try{const s=localStorage.getItem(`secure_${t}`);if(!s)return null;const n=atob(s);return JSON.parse(n)}catch(s){return console.error("Failed to retrieve secure data:",s),null}},remove:t=>{localStorage.removeItem(`secure_${t}`)},clear:()=>{Object.keys(localStorage).forEach(s=>{s.startsWith("secure_")&&localStorage.removeItem(s)})}};let Ue=pt;const wt=({isOpen:a,onClose:t,onUserAdded:s,editUser:n})=>{var d,I;const{showToast:i}=Ve(),[l,x]=b.useState(!1),g=!!n,{values:m,errors:h,setValue:w,validateAll:c}=Ba({firstName:((d=n==null?void 0:n.name)==null?void 0:d.split(" ")[0])||"",lastName:((I=n==null?void 0:n.name)==null?void 0:I.split(" ").slice(1).join(" "))||"",email:(n==null?void 0:n.email)||"",role:(n==null?void 0:n.role)||"",organization:(n==null?void 0:n.organization)||"",cohort:(n==null?void 0:n.cohort)||"",department:"",phoneNumber:""},{firstName:[Qe.required,Qe.minLength(2)],lastName:[Qe.required,Qe.minLength(2)],email:[Qe.required,Qe.email],role:[Qe.required],organization:[Qe.required],cohort:[Qe.required]}),f=["Pacific Coast University","Mountain View High School","Community Impact Network","Regional Fire Department","Healthcare Partners"],v=["Spring 2025 Leadership","Winter 2025 Leadership","Summer 2025 Leadership","Custom Training"],E=["Executive Director","VP Student Affairs","Athletic Director","Training Commander","Department Manager","Team Lead","Specialist","Other"];if(ss.useEffect(()=>{const j=L=>{L.key==="Escape"&&!l&&t()};if(a){document.addEventListener("keydown",j);const L=document.getElementById("add-user-modal");L&&L.focus()}return()=>{document.removeEventListener("keydown",j)}},[a,l,t]),!a)return null;const y=j=>z(void 0,null,function*(){if(j.preventDefault(),!c())return;const L=Ue.validateAndSanitizeEmail(m.email);if(!L.isValid){i("Please enter a valid email address","error");return}const N=Ue.validateAndSanitizePhone(m.phoneNumber||"");if(m.phoneNumber&&!N.isValid){i("Please enter a valid phone number","error");return}const A={firstName:Ue.sanitizeInput(m.firstName),lastName:Ue.sanitizeInput(m.lastName),email:L.sanitized,phoneNumber:N.sanitized,organization:Ue.sanitizeInput(m.organization),department:Ue.sanitizeInput(m.department||""),role:Ue.sanitizeInput(m.role),cohort:Ue.sanitizeInput(m.cohort)};Ue.logSecurityEvent({type:"login_attempt",details:{action:"create_user",email:A.email},severity:"low"}),x(!0);try{if(yield new Promise(_=>setTimeout(_,2e3)),g&&n){const _=P(k({},n),{name:`${A.firstName} ${A.lastName}`,email:A.email,organization:A.organization,cohort:A.cohort,role:A.role,department:A.department,phoneNumber:A.phoneNumber});s==null||s(_),i("User updated successfully!","success")}else{const _={id:Date.now().toString(),name:`${A.firstName} ${A.lastName}`,email:A.email,organization:A.organization,cohort:A.cohort,role:A.role,department:A.department,phoneNumber:A.phoneNumber,enrolled:new Date().toISOString(),lastLogin:null,status:"active",progress:{foundations:0,bias:0,empathy:0,conversations:0,planning:0},overallProgress:0,completedModules:0,totalModules:5,feedbackSubmitted:!1};s==null||s(_),i("User added successfully!","success")}w("firstName",""),w("lastName",""),w("email",""),w("role",""),w("organization",""),w("cohort",""),w("department",""),w("phoneNumber",""),t()}catch(_){i(g?"Failed to update user. Please try again.":"Failed to add user. Please try again.","error")}finally{x(!1)}});return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",role:"dialog","aria-modal":"true","aria-labelledby":"add-user-modal-title",children:e.jsxs("div",{id:"add-user-modal",className:"bg-white rounded-xl shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",tabIndex:-1,onKeyDown:j=>{if(j.key==="Tab"){const L=j.currentTarget.querySelectorAll('button, input, select, textarea, [tabindex]:not([tabindex="-1"])'),N=L[0],A=L[L.length-1];j.shiftKey&&document.activeElement===N?(j.preventDefault(),A.focus()):!j.shiftKey&&document.activeElement===A&&(j.preventDefault(),N.focus())}},children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-orange-100 p-2 rounded-lg",children:e.jsx(tt,{className:"h-6 w-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h2",{id:"add-user-modal-title",className:"text-xl font-bold text-gray-900",children:g?"Edit User":"Add New User"}),e.jsx("p",{className:"text-sm text-gray-600",children:g?"Update user information and settings":"Create a new user account and assign to courses"})]})]}),e.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg",disabled:l,"aria-label":"Close modal",children:e.jsx(Oe,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:y,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[e.jsx(Xe,{className:"h-5 w-5 text-gray-600"}),e.jsx("span",{children:"Personal Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),e.jsx("input",{type:"text",value:m.firstName,onChange:j=>w("firstName",j.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${h.firstName?"border-red-300":"border-gray-300"}`,disabled:l}),h.firstName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.firstName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),e.jsx("input",{type:"text",value:m.lastName,onChange:j=>w("lastName",j.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${h.lastName?"border-red-300":"border-gray-300"}`,disabled:l}),h.lastName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.lastName})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),e.jsx("input",{type:"email",value:m.email,onChange:j=>w("email",j.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${h.email?"border-red-300":"border-gray-300"}`,disabled:l}),h.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),e.jsx("input",{type:"tel",value:m.phoneNumber,onChange:j=>w("phoneNumber",j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",disabled:l})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[e.jsx(ia,{className:"h-5 w-5 text-gray-600"}),e.jsx("span",{children:"Organization Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Organization *"}),e.jsxs("select",{value:m.organization,onChange:j=>w("organization",j.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${h.organization?"border-red-300":"border-gray-300"}`,disabled:l,children:[e.jsx("option",{value:"",children:"Select Organization"}),f.map(j=>e.jsx("option",{value:j,children:j},j))]}),h.organization&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.organization})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),e.jsx("input",{type:"text",value:m.department,onChange:j=>w("department",j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",disabled:l})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role *"}),e.jsxs("select",{value:m.role,onChange:j=>w("role",j.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${h.role?"border-red-300":"border-gray-300"}`,disabled:l,children:[e.jsx("option",{value:"",children:"Select Role"}),E.map(j=>e.jsx("option",{value:j,children:j},j))]}),h.role&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.role})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cohort *"}),e.jsxs("select",{value:m.cohort,onChange:j=>w("cohort",j.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${h.cohort?"border-red-300":"border-gray-300"}`,disabled:l,children:[e.jsx("option",{value:"",children:"Select Cohort"}),v.map(j=>e.jsx("option",{value:j,children:j},j))]}),h.cohort&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.cohort})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors duration-200",disabled:l,children:"Cancel"}),e.jsxs(oe,{type:"submit",loading:l,variant:"primary",children:[e.jsx(tt,{className:"h-4 w-4"}),g?"Update User":"Add User"]})]})]})]})})},gt=({isOpen:a,onClose:t,onConfirm:s,title:n,message:i,confirmText:l="Confirm",cancelText:x="Cancel",type:g="danger",loading:m=!1})=>{if(!a)return null;const w=(()=>{switch(g){case"danger":return{icon:e.jsx(_e,{className:"h-6 w-6 text-red-600"}),bgColor:"bg-red-100",buttonVariant:"danger"};case"warning":return{icon:e.jsx(Ce,{className:"h-6 w-6 text-orange-600"}),bgColor:"bg-orange-100",buttonVariant:"warning"};case"info":return{icon:e.jsx(de,{className:"h-6 w-6 text-blue-600"}),bgColor:"bg-blue-100",buttonVariant:"primary"};default:return{icon:e.jsx(Ce,{className:"h-6 w-6 text-red-600"}),bgColor:"bg-red-100",buttonVariant:"danger"}}})(),c=()=>z(void 0,null,function*(){try{yield s()}catch(f){console.error("Confirmation action failed:",f)}});return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${w.bgColor}`,children:w.icon}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:n})]}),e.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg",disabled:m,children:e.jsx(Oe,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"p-6",children:e.jsx("p",{className:"text-gray-700 leading-relaxed",children:i})}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 p-6 border-t border-gray-200",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors duration-200",disabled:m,children:x}),e.jsx(oe,{onClick:c,loading:m,variant:w.buttonVariant,children:l})]})]})})},Va=[{id:"1",title:"Foundations of Inclusive Leadership",duration:"4 weeks"},{id:"2",title:"Recognizing and Mitigating Bias",duration:"3 weeks"},{id:"3",title:"Empathy in Action",duration:"3 weeks"},{id:"4",title:"Courageous Conversations at Work",duration:"5 weeks"},{id:"5",title:"Personal & Team Action Planning",duration:"2 weeks"}],Ot=({isOpen:a,onClose:t,selectedUsers:s,course:n,courseOptions:i,availableOrganizations:l=[],availableUsers:x=[],onAssignComplete:g})=>{const{showToast:m}=Ve(),[h,w]=b.useState(!1),[c,f]=b.useState((n==null?void 0:n.id)||""),[v,E]=b.useState(new Date().toISOString().split("T")[0]),[y,d]=b.useState(""),[I,j]=b.useState([]),[L,N]=b.useState(s||[]),[A,_]=b.useState(!0),[O,Y]=b.useState(""),[Q,U]=b.useState(""),R=b.useMemo(()=>{const S=new Map;return n&&S.set(n.id,n),(i||[]).forEach(u=>{S.set(u.id,u)}),S.size===0&&Va.forEach(u=>S.set(u.id,u)),Array.from(S.values())},[i,n]),W=b.useMemo(()=>{var S;return(S=R.find(u=>u.id===c))!=null?S:R[0]},[R,c]),X=b.useMemo(()=>{if(!Q.trim())return x;const S=Q.trim().toLowerCase();return x.filter(u=>u.name.toLowerCase().includes(S)||u.email&&u.email.toLowerCase().includes(S)||u.organization&&u.organization.toLowerCase().includes(S))},[x,Q]);if(b.useEffect(()=>{var u;if(!a)return;const S=(n==null?void 0:n.id)||((u=R[0])==null?void 0:u.id)||"";f(S),E(new Date().toISOString().split("T")[0]),d(""),j([]),N(s||[]),_(!0),Y(""),U("")},[a,n,R,s]),!a)return null;const ee=S=>{j(u=>u.includes(S)?u.filter(C=>C!==S):[...u,S])},p=S=>{N(u=>u.includes(S)?u.filter(C=>C!==S):[...u,S])},M=S=>z(void 0,null,function*(){if(S.preventDefault(),!W){m("Please select a course to assign","error");return}if(I.length===0&&L.length===0){m("Select at least one organization or learner","error");return}w(!0);try{const u={courseId:W.id,courseTitle:W.title,assignmentDate:v,dueDate:y||void 0,organizationIds:I,userIds:L,message:O.trim()?O.trim():void 0,notifyLearners:A};yield Promise.resolve(g==null?void 0:g(u)),t()}catch(u){console.error("Failed to assign course",u),m("Failed to assign course","error")}finally{w(!1)}}),q=I.length+L.length;return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-3xl w-full mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:e.jsx(ts,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Assign Course"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Assign course to ",q," recipient",q===1?"":"s"]})]})]}),e.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg",disabled:h,"aria-label":"Close assignment modal",children:e.jsx(Oe,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:M,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Course *"}),e.jsx("select",{value:(W==null?void 0:W.id)||c,onChange:S=>f(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0,disabled:h||R.length===0,children:R.map(S=>e.jsxs("option",{value:S.id,children:[S.title,S.duration?` (${S.duration})`:""]},S.id))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assignment Date"}),e.jsx("input",{type:"date",value:v,onChange:S=>E(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:h})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date (Optional)"}),e.jsx("input",{type:"date",value:y,min:v,onChange:S=>d(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:h})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Organizations"}),e.jsxs("span",{className:"text-xs text-gray-500",children:[I.length," selected"]})]}),e.jsx("div",{className:"border border-gray-200 rounded-lg max-h-48 overflow-y-auto divide-y divide-gray-100",children:l.length===0?e.jsx("div",{className:"p-4 text-sm text-gray-500",children:"No organizations available"}):l.map(S=>e.jsxs("label",{className:"flex items-center justify-between px-4 py-3 hover:bg-gray-50 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(we,{className:"h-4 w-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:S.name}),S.contactEmail&&e.jsx("div",{className:"text-xs text-gray-500",children:S.contactEmail})]})]}),e.jsx("input",{type:"checkbox",checked:I.includes(S.id),onChange:()=>ee(S.id),className:"h-4 w-4 text-green-600 border-gray-300 rounded",disabled:h})]},S.id))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Learners"}),e.jsxs("span",{className:"text-xs text-gray-500",children:[L.length," selected"]})]}),e.jsx("input",{type:"text",value:Q,onChange:S=>U(S.target.value),placeholder:"Search learners by name, email, or organization",className:"w-full px-3 py-2 mb-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:h||x.length===0}),e.jsx("div",{className:"border border-gray-200 rounded-lg max-h-48 overflow-y-auto divide-y divide-gray-100",children:X.length===0?e.jsx("div",{className:"p-4 text-sm text-gray-500",children:"No learners match the search filters"}):X.map(S=>e.jsxs("label",{className:"flex items-center justify-between px-4 py-3 hover:bg-gray-50 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Se,{className:"h-4 w-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:S.name}),e.jsx("div",{className:"text-xs text-gray-500",children:[S.email,S.organization].filter(Boolean).join("  ")})]})]}),e.jsx("input",{type:"checkbox",checked:L.includes(S.id),onChange:()=>p(S.id),className:"h-4 w-4 text-green-600 border-gray-300 rounded",disabled:h})]},S.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Personal message (optional)"}),e.jsx("textarea",{value:O,onChange:S=>Y(S.target.value),placeholder:"Share context or expectations for this course assignment",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",rows:4,disabled:h})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(It,{className:"h-5 w-5 text-blue-500 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-900",children:"Notifications"}),e.jsx("p",{className:"text-xs text-blue-700",children:"Learners receive instant email notifications when this assignment is saved. Toggle below to disable emails."})]})]}),e.jsxs("label",{className:"flex items-center justify-between bg-white border border-blue-100 rounded-lg px-3 py-2",children:[e.jsx("span",{className:"text-sm text-blue-900",children:"Send notification emails"}),e.jsx("input",{type:"checkbox",checked:A,onChange:S=>_(S.target.checked),className:"h-4 w-4 text-blue-600 border-gray-300 rounded",disabled:h})]}),e.jsx("div",{className:"text-xs text-blue-600",children:q===0?"Select at least one organization or learner to enable assignment.":`Ready to assign to ${q} recipient${q===1?"":"s"}.`})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors duration-200",disabled:h,children:"Cancel"}),e.jsxs(oe,{type:"submit",loading:h,variant:"success",disabled:q===0,children:[e.jsx(ts,{className:"h-4 w-4"}),"Assign Course"]})]})]})]})})},Mt="huddle_orgs_v1",Ct=()=>[{id:"1",name:"Pacific Coast University",type:"University",contactPerson:"Dr. Sarah Chen",contactEmail:"sarah.chen@pacificcoast.edu",enrollmentDate:"2025-01-15",status:"active",totalLearners:45,activeLearners:42,completionRate:94,cohorts:["Spring 2025 Leadership","Faculty Development 2025"],subscription:"Premium",lastActivity:"2025-03-11",modules:{foundations:98,bias:91,empathy:87,conversations:82,planning:76},notes:"Excellent engagement. Requested additional modules for faculty."},{id:"2",name:"Mountain View High School",type:"K-12 Education",contactPerson:"Marcus Rodriguez",contactEmail:"mrodriguez@mvhs.edu",enrollmentDate:"2025-01-20",status:"active",totalLearners:23,activeLearners:20,completionRate:87,cohorts:["Spring 2025 Leadership"],subscription:"Standard",lastActivity:"2025-03-10",modules:{foundations:95,bias:89,empathy:85,conversations:78,planning:65},notes:"Focus on athletic department leadership development."},{id:"3",name:"Community Impact Network",type:"Nonprofit",contactPerson:"Jennifer Walsh",contactEmail:"jwalsh@communityimpact.org",enrollmentDate:"2025-01-10",status:"inactive",totalLearners:28,activeLearners:15,completionRate:61,cohorts:["Spring 2025 Leadership"],subscription:"Standard",lastActivity:"2025-02-28",modules:{foundations:85,bias:68,empathy:54,conversations:42,planning:28},notes:"Low engagement recently. Follow up needed."},{id:"4",name:"Regional Fire Department",type:"Government",contactPerson:"Captain David Thompson",contactEmail:"dthompson@regionalfire.gov",enrollmentDate:"2024-12-01",status:"active",totalLearners:67,activeLearners:63,completionRate:89,cohorts:["Winter 2025 Leadership","Command Staff Development"],subscription:"Premium",lastActivity:"2025-03-11",modules:{foundations:92,bias:88,empathy:91,conversations:85,planning:79},notes:"Strong leadership commitment. Excellent results."},{id:"5",name:"TechForward Solutions",type:"Corporate",contactPerson:"Lisa Park",contactEmail:"lpark@techforward.com",enrollmentDate:"2025-02-01",status:"active",totalLearners:34,activeLearners:32,completionRate:96,cohorts:["Spring 2025 Leadership"],subscription:"Premium",lastActivity:"2025-03-11",modules:{foundations:100,bias:97,empathy:94,conversations:91,planning:88},notes:"Outstanding engagement. Interested in advanced modules."}],ws=()=>{try{const a=localStorage.getItem(Mt);return a?JSON.parse(a):Ct()}catch(a){return Ct()}},Hs=a=>localStorage.setItem(Mt,JSON.stringify(a)),Wa=()=>z(void 0,null,function*(){return ws()}),Ft=a=>z(void 0,null,function*(){return ws().find(s=>s.id===a)||null}),Ka=(a,t)=>z(void 0,null,function*(){const s=ws(),n=s.findIndex(i=>i.id===a);if(n===-1)throw new Error("Org not found");return s[n]=k(k({},s[n]),t),Hs(s),s[n]}),Xa=a=>z(void 0,null,function*(){const t=ws(),s=String(Date.now()),n=new Date().toISOString(),i={id:s,name:a.name||"New Organization",type:a.type||"Organization",description:a.description,logo:a.logo,contactPerson:a.contactPerson||"Unknown",contactEmail:a.contactEmail||"",contactPhone:a.contactPhone,website:a.website,address:a.address,city:a.city,state:a.state,country:a.country||"United States",postalCode:a.postalCode,subscription:a.subscription||"Standard",billingEmail:a.billingEmail,billingCycle:a.billingCycle||"monthly",customPricing:a.customPricing,maxLearners:a.maxLearners||100,maxCourses:a.maxCourses||50,maxStorage:a.maxStorage||10,features:a.features||{analytics:!0,certificates:!0,apiAccess:!1,customBranding:!1,sso:!1,mobileApp:!0,reporting:!0,integrations:!1},settings:a.settings||{autoEnrollment:!1,emailNotifications:!0,progressTracking:!0,allowDownloads:!0,requireCompletion:!1,dataRetention:24},status:a.status||"active",enrollmentDate:a.enrollmentDate||n,contractStart:a.contractStart,contractEnd:a.contractEnd,createdAt:n,updatedAt:n,totalLearners:a.totalLearners||0,activeLearners:a.activeLearners||0,completionRate:a.completionRate||0,cohorts:a.cohorts||[],lastActivity:a.lastActivity,modules:a.modules||{},notes:a.notes||"",tags:a.tags||[]};return t.push(i),Hs(t),i}),Ga=a=>z(void 0,null,function*(){const s=ws().filter(n=>n.id!==a);Hs(s)}),Ha=a=>z(void 0,null,function*(){const t=ws(),s=[];return a.forEach(n=>{const i=t.findIndex(l=>l.id===n.id);i!==-1&&(t[i]=P(k(k({},t[i]),n.data),{updatedAt:new Date().toISOString()}),s.push(t[i]))}),Hs(t),s}),Qa=a=>z(void 0,null,function*(){const t=yield Ft(a);return t?{overview:{totalUsers:t.totalLearners,activeUsers:t.activeLearners,completionRate:t.completionRate,avgSessionTime:Math.floor(Math.random()*30)+15},engagement:{dailyActiveUsers:Math.floor(t.activeLearners*.6),weeklyActiveUsers:Math.floor(t.activeLearners*.8),monthlyActiveUsers:t.activeLearners},performance:{coursesCompleted:Object.values(t.modules).reduce((s,n)=>s+Math.floor(n*.8),0),certificatesIssued:Math.floor(t.totalLearners*(t.completionRate/100)),avgScores:Object.fromEntries(Object.keys(t.modules).map(s=>[s,Math.floor(Math.random()*30)+70]))},trends:{userGrowth:Array.from({length:12},(s,n)=>({month:new Date(Date.now()-(11-n)*30*24*60*60*1e3).toISOString().slice(0,7),users:Math.floor(Math.random()*10)+t.totalLearners*.8})),completionTrends:Array.from({length:30},(s,n)=>({date:new Date(Date.now()-(29-n)*24*60*60*1e3).toISOString().slice(0,10),completions:Math.floor(Math.random()*5)+2}))}}:null}),fs={listOrgs:Wa,getOrg:Ft,updateOrg:Ka,createOrg:Xa,deleteOrg:Ga,bulkUpdateOrgs:Ha,getOrgStats:Qa},Ya=()=>{const{showToast:a}=Ve(),[t,s]=b.useState(""),[n,i]=b.useState("all"),[l,x]=b.useState("all"),[g,m]=b.useState([]),[h,w]=b.useState(!1),[c,f]=b.useState(!1),[v,E]=b.useState(!1),[y,d]=b.useState(!1),[I,j]=b.useState(null),[L,N]=b.useState(null),[A,_]=b.useState(!1),[O,Y]=b.useState([]),Q=[{id:"1",name:"Sarah Chen",email:"sarah.chen@pacificcoast.edu",organization:"Pacific Coast University",cohort:"Spring 2025 Leadership",role:"VP Student Affairs",enrolled:"2025-01-15",lastLogin:"2025-03-10",progress:{foundations:100,bias:75,empathy:50,conversations:0,planning:0},overallProgress:45,status:"active",completedModules:1,totalModules:5,feedbackSubmitted:!0},{id:"2",name:"Marcus Rodriguez",email:"mrodriguez@mvhs.edu",organization:"Mountain View High School",cohort:"Spring 2025 Leadership",role:"Athletic Director",enrolled:"2025-01-20",lastLogin:"2025-03-09",progress:{foundations:100,bias:100,empathy:80,conversations:25,planning:0},overallProgress:61,status:"active",completedModules:2,totalModules:5,feedbackSubmitted:!0},{id:"3",name:"Jennifer Walsh",email:"jwalsh@communityimpact.org",organization:"Community Impact Network",cohort:"Spring 2025 Leadership",role:"Executive Director",enrolled:"2025-01-10",lastLogin:"2025-02-28",progress:{foundations:100,bias:50,empathy:0,conversations:0,planning:0},overallProgress:30,status:"inactive",completedModules:1,totalModules:5,feedbackSubmitted:!1},{id:"4",name:"David Thompson",email:"dthompson@regionalfire.gov",organization:"Regional Fire Department",cohort:"Winter 2025 Leadership",role:"Training Commander",enrolled:"2024-12-01",lastLogin:"2025-03-08",progress:{foundations:100,bias:100,empathy:100,conversations:75,planning:50},overallProgress:85,status:"active",completedModules:3,totalModules:5,feedbackSubmitted:!0},{id:"5",name:"Lisa Park",email:"lpark@techforward.com",organization:"TechForward Solutions",cohort:"Spring 2025 Leadership",role:"Chief HR Officer",enrolled:"2025-02-01",lastLogin:"2025-03-11",progress:{foundations:100,bias:100,empathy:100,conversations:100,planning:80},overallProgress:96,status:"active",completedModules:4,totalModules:5,feedbackSubmitted:!0}],[U,R]=b.useState(Q);b.useEffect(()=>{fs.listOrgs().then(Y).catch(D=>console.warn("Failed to load organizations for assignments",D))},[]);const W=b.useMemo(()=>xe.getAllCourses().map(D=>({id:D.id,title:D.title,duration:D.duration})),[]),X=["Pacific Coast University","Mountain View High School","Community Impact Network","Regional Fire Department","TechForward Solutions"],ee=[{key:"foundations",name:"Foundations of Inclusive Leadership"},{key:"bias",name:"Recognizing and Mitigating Bias"},{key:"empathy",name:"Empathy in Action"},{key:"conversations",name:"Courageous Conversations at Work"},{key:"planning",name:"Personal & Team Action Planning"}],p=U.filter(D=>{const H=D.name.toLowerCase().includes(t.toLowerCase())||D.email.toLowerCase().includes(t.toLowerCase())||D.organization.toLowerCase().includes(t.toLowerCase()),se=n==="all"||D.organization===n,me=l==="all"||D.status===l;return H&&se&&me}),M=D=>{m(H=>H.includes(D)?H.filter(se=>se!==D):[...H,D])},q=()=>{g.length===p.length?m([]):m(p.map(D=>D.id))},S=D=>{switch(D){case"active":return e.jsx(de,{className:"h-4 w-4 text-green-500"});case"inactive":return e.jsx(Je,{className:"h-4 w-4 text-yellow-500"});default:return e.jsx(Ce,{className:"h-4 w-4 text-red-500"})}},u=D=>{switch(D){case"active":return"text-green-600 bg-green-50";case"inactive":return"text-yellow-600 bg-yellow-50";default:return"text-red-600 bg-red-50"}},C=()=>{w(!0)},G=D=>{R(H=>[...H,D]),a("User added successfully!","success")},le=()=>z(void 0,null,function*(){_(!0);try{yield new Promise(D=>setTimeout(D,2e3)),a(`Reminder sent to ${g.length} user(s)`,"success"),m([])}catch(D){a("Failed to send reminders","error")}finally{_(!1)}}),je=()=>{E(!0)},ge=D=>{m([]),E(!1)},Te=()=>{const D=document.createElement("input");D.type="file",D.accept=".csv",D.onchange=H=>{var me,ae;const se=(ae=(me=H.target)==null?void 0:me.files)==null?void 0:ae[0];se&&(a(`Importing ${se.name}...`,"info"),setTimeout(()=>{a("CSV import completed successfully!","success")},3e3))},D.click()},Ee=()=>z(void 0,null,function*(){_(!0);try{yield new Promise(ae=>setTimeout(ae,1500));const D=`Name,Email,Organization,Status,Progress
${p.map(ae=>`"${ae.name}","${ae.email}","${ae.organization}","${ae.status}","${ae.overallProgress}%"`).join(`
`)}`,H=new Blob([D],{type:"text/csv"}),se=window.URL.createObjectURL(H),me=document.createElement("a");me.href=se,me.download=`users-export-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(me),me.click(),document.body.removeChild(me),window.URL.revokeObjectURL(se),a("Users exported successfully!","success")}catch(D){a("Failed to export users","error")}finally{_(!1)}}),B=D=>{j(D),f(!0)},ve=()=>z(void 0,null,function*(){if(I){_(!0);try{yield new Promise(D=>setTimeout(D,1e3)),R(D=>D.filter(H=>H.id!==I)),a("User deleted successfully!","success"),f(!1),j(null)}catch(D){a("Failed to delete user","error")}finally{_(!1)}}}),De=D=>{const H=U.find(se=>se.id===D);H&&(N(H),d(!0))},Re=D=>{R(H=>H.map(se=>se.id===D.id?D:se)),a("User updated successfully!","success"),d(!1),N(null)},Fe=D=>{const H=U.find(se=>se.id===D);if(H){const se=["Reset Password","Send Welcome Email","View Activity Log","Duplicate User","Export User Data"],me=prompt(`Select action for ${H.name}:
${se.map((ae,Le)=>`${Le+1}. ${ae}`).join(`
`)}

Enter number (1-${se.length}):`);if(me&&parseInt(me)>=1&&parseInt(me)<=se.length){const ae=se[parseInt(me)-1];a(`${ae} for ${H.name} - Feature coming soon!`,"info")}}};return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"User Management"}),e.jsx("p",{className:"text-gray-600",children:"Monitor learner progress, assign courses, and manage user accounts"})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 flex-1",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(Ze,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search users...",value:t,onChange:D=>s(D.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(js,{className:"h-5 w-5 text-gray-400"}),e.jsxs("select",{value:n,onChange:D=>i(D.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Organizations"}),X.map(D=>e.jsx("option",{value:D,children:D},D))]}),e.jsxs("select",{value:l,onChange:D=>x(D.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[g.length>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(oe,{onClick:le,loading:A,variant:"primary",className:"bg-blue-500 hover:bg-blue-600",children:[e.jsx(rs,{className:"h-4 w-4"}),"Send Reminder (",g.length,")"]}),e.jsx(oe,{onClick:je,loading:A,variant:"success",children:"Assign Course"})]}),e.jsxs(oe,{onClick:C,variant:"primary",children:[e.jsx(ns,{className:"h-4 w-4"}),"Add User"]}),e.jsxs(oe,{onClick:Te,variant:"secondary",children:[e.jsx(Me,{className:"h-4 w-4"}),"Import CSV"]}),e.jsxs(oe,{onClick:Ee,loading:A,variant:"secondary",children:[e.jsx(ye,{className:"h-4 w-4"}),"Export"]})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-4 px-6",children:e.jsx("input",{type:"checkbox",checked:g.length===p.length&&p.length>0,onChange:q,className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-gray-300 rounded"})}),e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-gray-900",children:"User"}),e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-gray-900",children:"Organization"}),e.jsx("th",{className:"text-center py-4 px-6 font-semibold text-gray-900",children:"Progress"}),e.jsx("th",{className:"text-center py-4 px-6 font-semibold text-gray-900",children:"Modules"}),e.jsx("th",{className:"text-center py-4 px-6 font-semibold text-gray-900",children:"Status"}),e.jsx("th",{className:"text-center py-4 px-6 font-semibold text-gray-900",children:"Last Login"}),e.jsx("th",{className:"text-center py-4 px-6 font-semibold text-gray-900",children:"Actions"})]})}),e.jsx("tbody",{children:p.map(D=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-4 px-6",children:e.jsx("input",{type:"checkbox",checked:g.includes(D.id),onChange:()=>M(D.id),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-gray-300 rounded"})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:D.name}),e.jsx("div",{className:"text-sm text-gray-600",children:D.email}),e.jsx("div",{className:"text-xs text-gray-500",children:D.role})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:D.organization}),e.jsx("div",{className:"text-sm text-gray-600",children:D.cohort})]})}),e.jsx("td",{className:"py-4 px-6 text-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"text-lg font-bold text-gray-900",children:[D.overallProgress,"%"]}),e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2 mt-1",children:e.jsx("div",{className:"bg-gradient-to-r from-orange-400 to-red-500 h-2 rounded-full",style:{width:`${D.overallProgress}%`}})})]})}),e.jsxs("td",{className:"py-4 px-6 text-center",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:D.completedModules}),e.jsxs("span",{className:"text-gray-500",children:["/",D.totalModules]})]}),e.jsx("div",{className:"flex justify-center space-x-1 mt-1",children:ee.map(H=>e.jsx("div",{className:`w-3 h-3 rounded-full ${D.progress[H.key]===100?"bg-green-500":D.progress[H.key]>0?"bg-yellow-500":"bg-gray-300"}`,title:`${H.name}: ${D.progress[H.key]}%`},H.key))})]}),e.jsx("td",{className:"py-4 px-6 text-center",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[S(D.status),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${u(D.status)}`,children:D.status})]})}),e.jsx("td",{className:"py-4 px-6 text-center text-sm text-gray-600",children:new Date(D.lastLogin).toLocaleDateString()}),e.jsx("td",{className:"py-4 px-6 text-center",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(ie,{to:`/admin/users/user-${D.id}`,className:"p-1 text-blue-600 hover:text-blue-800",title:"View Profile",children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>De(D.id),className:"p-1 text-gray-600 hover:text-gray-800 transition-colors",title:"Edit User",children:e.jsx(Ne,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>B(D.id),className:"p-1 text-red-600 hover:text-red-800 transition-colors",title:"Delete User",children:e.jsx(_e,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>Fe(D.id),className:"p-1 text-gray-600 hover:text-gray-800 transition-colors",title:"More Options",children:e.jsx(at,{className:"h-4 w-4"})})]})})]},D.id))})]})})}),p.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ze,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No users found"}),e.jsx("p",{className:"text-gray-600",children:"Try adjusting your search or filter criteria."})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:p.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Users"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:p.filter(D=>D.status==="active").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Active Users"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[Math.round(p.reduce((D,H)=>D+H.overallProgress,0)/p.length)||0,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Avg. Progress"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:p.filter(D=>D.feedbackSubmitted).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Feedback Submitted"})]})]}),e.jsx(wt,{isOpen:h,onClose:()=>w(!1),onUserAdded:G}),e.jsx(Ot,{isOpen:v,onClose:()=>E(!1),selectedUsers:g,courseOptions:W,availableOrganizations:O.map(D=>({id:D.id,name:D.name,contactEmail:D.contactEmail})),availableUsers:U.map(D=>({id:D.id,name:D.name,email:D.email,organization:D.organization})),onAssignComplete:ge}),e.jsx(gt,{isOpen:c,onClose:()=>{f(!1),j(null)},onConfirm:ve,title:"Delete User",message:"Are you sure you want to delete this user? This action cannot be undone and will remove all their progress data.",confirmText:"Delete User",type:"danger",loading:A}),y&&L&&e.jsx(wt,{isOpen:y,onClose:()=>{d(!1),N(null)},onUserAdded:Re,editUser:L})]})},ln=Object.freeze(Object.defineProperty({__proto__:null,default:Ya},Symbol.toStringTag,{value:"Module"})),Za=({isOpen:a,onClose:t,onOrganizationAdded:s})=>{const{showToast:n}=Ve(),[i,l]=b.useState(!1),[x,g]=b.useState({name:"",type:"",contactPerson:"",contactEmail:"",contactPhone:"",website:"",address:"",subscription:"Standard",maxLearners:100}),[m,h]=b.useState({}),w=["Educational Institution","Healthcare Organization","Technology Company","Government Agency","Non-Profit Organization","Financial Services","Manufacturing","Consulting Firm","Other"],c=["Standard","Premium","Enterprise"];if(!a)return null;const f=()=>{const y={};return x.name.trim()||(y.name="Organization name is required"),x.type||(y.type="Organization type is required"),x.contactEmail.trim()?/\S+@\S+\.\S+/.test(x.contactEmail)||(y.contactEmail="Email is invalid"):y.contactEmail="Email is required",x.maxLearners&&x.maxLearners<1&&(y.maxLearners="Max learners must be at least 1"),h(y),Object.keys(y).length===0},v=y=>z(void 0,null,function*(){if(y.preventDefault(),!!f()){l(!0);try{yield new Promise(I=>setTimeout(I,2e3));const d={id:Date.now().toString(),name:x.name,type:x.type,contactPerson:x.contactPerson,contactEmail:x.contactEmail,contactPhone:x.contactPhone,website:x.website,address:x.address,subscription:x.subscription,maxLearners:x.maxLearners||100,activeLearners:0,totalLearners:0,completionRate:0,status:"active",lastActivity:new Date().toISOString(),cohorts:[],modules:{foundations:0,bias:0,empathy:0,conversations:0,planning:0}};s==null||s(d),n("Organization added successfully!","success"),g({name:"",type:"",contactPerson:"",contactEmail:"",contactPhone:"",website:"",address:"",subscription:"Standard",maxLearners:100}),t()}catch(d){n("Failed to add organization. Please try again.","error")}finally{l(!1)}}}),E=(y,d)=>{if(g(I=>P(k({},I),{[y]:d})),m[y]){const I=k({},m);delete I[y],h(I)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-orange-100 p-2 rounded-lg",children:e.jsx(we,{className:"h-6 w-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Add New Organization"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Create a new client organization"})]})]}),e.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg",disabled:i,children:e.jsx(Oe,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:v,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[e.jsx(we,{className:"h-5 w-5 text-gray-600"}),e.jsx("span",{children:"Organization Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Organization Name *"}),e.jsx("input",{type:"text",value:x.name,onChange:y=>E("name",y.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${m.name?"border-red-300":"border-gray-300"}`,disabled:i}),m.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Organization Type *"}),e.jsxs("select",{value:x.type,onChange:y=>E("type",y.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${m.type?"border-red-300":"border-gray-300"}`,disabled:i,children:[e.jsx("option",{value:"",children:"Select Type"}),w.map(y=>e.jsx("option",{value:y,children:y},y))]}),m.type&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.type})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subscription Plan"}),e.jsx("select",{value:x.subscription,onChange:y=>E("subscription",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",disabled:i,children:c.map(y=>e.jsx("option",{value:y,children:y},y))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website"}),e.jsx("input",{type:"url",value:x.website,onChange:y=>E("website",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",disabled:i})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Learners"}),e.jsx("input",{type:"number",min:"1",value:x.maxLearners,onChange:y=>E("maxLearners",parseInt(y.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",disabled:i})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),e.jsx("textarea",{rows:3,value:x.address,onChange:y=>E("address",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",disabled:i})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[e.jsx(Xe,{className:"h-5 w-5 text-gray-600"}),e.jsx("span",{children:"Contact Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Person *"}),e.jsx("input",{type:"text",value:x.contactPerson,onChange:y=>E("contactPerson",y.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${m.contactPerson?"border-red-300":"border-gray-300"}`,disabled:i}),m.contactPerson&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.contactPerson})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Email *"}),e.jsx("input",{type:"email",value:x.contactEmail,onChange:y=>E("contactEmail",y.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${m.contactEmail?"border-red-300":"border-gray-300"}`,disabled:i}),m.contactEmail&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.contactEmail})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Phone"}),e.jsx("input",{type:"tel",value:x.contactPhone,onChange:y=>E("contactPhone",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",disabled:i})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors duration-200",disabled:i,children:"Cancel"}),e.jsxs(oe,{type:"submit",loading:i,variant:"primary",children:[e.jsx(we,{className:"h-4 w-4"}),"Add Organization"]})]})]})]})})},Ut=({isOpen:a,onClose:t,organization:s,onOrganizationUpdated:n})=>{const{showToast:i}=Ve(),[l,x]=b.useState(!1),[g,m]=b.useState("basic"),[h,w]=b.useState({name:"",type:"",description:"",logo:"",contactPerson:"",contactEmail:"",contactPhone:"",website:"",address:"",city:"",state:"",country:"",postalCode:"",subscription:"Standard",billingEmail:"",billingCycle:"monthly",customPricing:0,maxLearners:100,maxCourses:50,maxStorage:10,features:{analytics:!0,certificates:!0,apiAccess:!1,customBranding:!1,sso:!1,mobileApp:!0,reporting:!0,integrations:!1},settings:{autoEnrollment:!1,emailNotifications:!0,progressTracking:!0,allowDownloads:!0,requireCompletion:!1,dataRetention:24},status:"active",contractStart:"",contractEnd:"",notes:"",tags:[]}),[c,f]=b.useState({});if(b.useEffect(()=>{var N,A,_,O,Y,Q,U,R,W,X,ee,p,M,q,S,u,C,G,le,je,ge,Te,Ee,B,ve,De,Re,Fe;a&&s&&w({name:s.name||"",type:s.type||"",description:s.description||"",logo:s.logo||"",contactPerson:s.contactPerson||"",contactEmail:s.contactEmail||"",contactPhone:s.contactPhone||"",website:s.website||"",address:s.address||"",city:s.city||"",state:s.state||"",country:s.country||"United States",postalCode:s.postalCode||"",subscription:s.subscription||"Standard",billingEmail:s.billingEmail||s.contactEmail||"",billingCycle:s.billingCycle||"monthly",customPricing:s.customPricing||0,maxLearners:s.maxLearners||100,maxCourses:s.maxCourses||50,maxStorage:s.maxStorage||10,features:{analytics:(A=(N=s.features)==null?void 0:N.analytics)!=null?A:!0,certificates:(O=(_=s.features)==null?void 0:_.certificates)!=null?O:!0,apiAccess:(Q=(Y=s.features)==null?void 0:Y.apiAccess)!=null?Q:!1,customBranding:(R=(U=s.features)==null?void 0:U.customBranding)!=null?R:!1,sso:(X=(W=s.features)==null?void 0:W.sso)!=null?X:!1,mobileApp:(p=(ee=s.features)==null?void 0:ee.mobileApp)!=null?p:!0,reporting:(q=(M=s.features)==null?void 0:M.reporting)!=null?q:!0,integrations:(u=(S=s.features)==null?void 0:S.integrations)!=null?u:!1},settings:{autoEnrollment:(G=(C=s.settings)==null?void 0:C.autoEnrollment)!=null?G:!1,emailNotifications:(je=(le=s.settings)==null?void 0:le.emailNotifications)!=null?je:!0,progressTracking:(Te=(ge=s.settings)==null?void 0:ge.progressTracking)!=null?Te:!0,allowDownloads:(B=(Ee=s.settings)==null?void 0:Ee.allowDownloads)!=null?B:!0,requireCompletion:(De=(ve=s.settings)==null?void 0:ve.requireCompletion)!=null?De:!1,dataRetention:(Fe=(Re=s.settings)==null?void 0:Re.dataRetention)!=null?Fe:24},status:s.status||"active",contractStart:s.contractStart||"",contractEnd:s.contractEnd||"",notes:s.notes||"",tags:s.tags||[]})},[a,s]),!a)return null;const v=["Educational Institution","Healthcare Organization","Technology Company","Government Agency","Non-Profit Organization","Financial Services","Manufacturing","Consulting Firm","Retail & E-commerce","Media & Entertainment","Transportation","Real Estate","Other"],E=[{value:"Trial",label:"Trial (14 days)",price:0},{value:"Standard",label:"Standard",price:299},{value:"Premium",label:"Premium",price:599},{value:"Enterprise",label:"Enterprise",price:1299},{value:"Custom",label:"Custom Pricing",price:0}],y=[{value:"active",label:"Active",color:"text-green-700 bg-green-100"},{value:"trial",label:"Trial",color:"text-blue-700 bg-blue-100"},{value:"inactive",label:"Inactive",color:"text-yellow-700 bg-yellow-100"},{value:"suspended",label:"Suspended",color:"text-red-700 bg-red-100"}],d=()=>{const N={};return h.name.trim()||(N.name="Organization name is required"),h.type||(N.type="Organization type is required"),h.contactEmail.trim()?/\S+@\S+\.\S+/.test(h.contactEmail)||(N.contactEmail="Contact email is invalid"):N.contactEmail="Contact email is required",h.billingEmail&&!/\S+@\S+\.\S+/.test(h.billingEmail)&&(N.billingEmail="Billing email is invalid"),h.maxLearners&&h.maxLearners<1&&(N.maxLearners="Max learners must be at least 1"),h.contractStart&&h.contractEnd&&new Date(h.contractStart)>=new Date(h.contractEnd)&&(N.contractEnd="Contract end date must be after start date"),f(N),Object.keys(N).length===0},I=N=>z(void 0,null,function*(){if(N.preventDefault(),!d()){i("Please fix the errors before saving","error");return}x(!0);try{yield new Promise(_=>setTimeout(_,2e3));const A=P(k(k({},s),h),{id:(s==null?void 0:s.id)||Date.now().toString(),updatedAt:new Date().toISOString(),totalLearners:(s==null?void 0:s.totalLearners)||0,activeLearners:(s==null?void 0:s.activeLearners)||0,completionRate:(s==null?void 0:s.completionRate)||0});n&&n(A),i("Organization updated successfully!","success"),t()}catch(A){i("Failed to update organization","error")}finally{x(!1)}}),j=(N,A)=>{w(_=>{if(N.includes(".")){const[O,Y]=N.split(".");return P(k({},_),{[O]:P(k({},_[O]),{[Y]:A})})}return P(k({},_),{[N]:A})}),c[N]&&f(_=>{const O=k({},_);return delete O[N],O})},L=[{id:"basic",label:"Basic Info",icon:we},{id:"contact",label:"Contact & Address",icon:Xe},{id:"subscription",label:"Subscription & Billing",icon:Is},{id:"features",label:"Features & Access",icon:Ps},{id:"settings",label:"Settings & Preferences",icon:Pe}];return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:e.jsx(we,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:s?"Edit Organization":"Add Organization"}),e.jsx("p",{className:"text-sm text-gray-600",children:s?`Manage ${s.name||"organization"} settings`:"Create a new organization"})]})]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Oe,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:L.map(N=>e.jsxs("button",{onClick:()=>m(N.id),className:`py-3 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${g===N.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(N.icon,{className:"h-4 w-4"}),e.jsx("span",{children:N.label})]},N.id))})}),e.jsxs("form",{onSubmit:I,className:"flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"p-6 space-y-6",children:[g==="basic"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Organization Name *"}),e.jsx("input",{type:"text",value:h.name,onChange:N=>j("name",N.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${c.name?"border-red-300":"border-gray-300"}`,placeholder:"Enter organization name"}),c.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Organization Type *"}),e.jsxs("select",{value:h.type,onChange:N=>j("type",N.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${c.type?"border-red-300":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Select type"}),v.map(N=>e.jsx("option",{value:N,children:N},N))]}),c.type&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.type})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:h.description,onChange:N=>j("description",N.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Brief description of the organization"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsx("select",{value:h.status,onChange:N=>j("status",N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:y.map(N=>e.jsx("option",{value:N.value,children:N.label},N.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Logo URL"}),e.jsx("input",{type:"url",value:h.logo,onChange:N=>j("logo",N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://example.com/logo.png"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags"}),e.jsx("input",{type:"text",value:h.tags.join(", "),onChange:N=>j("tags",N.target.value.split(",").map(A=>A.trim()).filter(Boolean)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"VIP, Enterprise, Priority (comma-separated)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Internal Notes"}),e.jsx("textarea",{value:h.notes,onChange:N=>j("notes",N.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Internal notes for this organization"})]})]}),g==="contact"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Xe,{className:"inline h-4 w-4 mr-1"}),"Primary Contact *"]}),e.jsx("input",{type:"text",value:h.contactPerson,onChange:N=>j("contactPerson",N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Full name"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(rs,{className:"inline h-4 w-4 mr-1"}),"Contact Email *"]}),e.jsx("input",{type:"email",value:h.contactEmail,onChange:N=>j("contactEmail",N.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${c.contactEmail?"border-red-300":"border-gray-300"}`,placeholder:"contact@example.com"}),c.contactEmail&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.contactEmail})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(ct,{className:"inline h-4 w-4 mr-1"}),"Phone Number"]}),e.jsx("input",{type:"tel",value:h.contactPhone,onChange:N=>j("contactPhone",N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"+1 (555) 123-4567"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(us,{className:"inline h-4 w-4 mr-1"}),"Website"]}),e.jsx("input",{type:"url",value:h.website,onChange:N=>j("website",N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://example.com"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Xs,{className:"inline h-4 w-4 mr-1"}),"Address"]}),e.jsx("input",{type:"text",value:h.address,onChange:N=>j("address",N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Street address"})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),e.jsx("input",{type:"text",value:h.city,onChange:N=>j("city",N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"City"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State/Province"}),e.jsx("input",{type:"text",value:h.state,onChange:N=>j("state",N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"State"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Postal Code"}),e.jsx("input",{type:"text",value:h.postalCode,onChange:N=>j("postalCode",N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"12345"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country"}),e.jsxs("select",{value:h.country,onChange:N=>j("country",N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"United States",children:"United States"}),e.jsx("option",{value:"Canada",children:"Canada"}),e.jsx("option",{value:"United Kingdom",children:"United Kingdom"}),e.jsx("option",{value:"Australia",children:"Australia"}),e.jsx("option",{value:"Germany",children:"Germany"}),e.jsx("option",{value:"France",children:"France"}),e.jsx("option",{value:"Other",children:"Other"})]})]})]})]}),g==="subscription"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Is,{className:"inline h-4 w-4 mr-1"}),"Subscription Plan"]}),e.jsx("select",{value:h.subscription,onChange:N=>j("subscription",N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:E.map(N=>e.jsxs("option",{value:N.value,children:[N.label," ",N.price>0&&`- $${N.price}/month`]},N.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Billing Cycle"}),e.jsxs("select",{value:h.billingCycle,onChange:N=>j("billingCycle",N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"quarterly",children:"Quarterly"}),e.jsx("option",{value:"annually",children:"Annually"})]})]})]}),h.subscription==="Custom"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(la,{className:"inline h-4 w-4 mr-1"}),"Custom Monthly Price"]}),e.jsx("input",{type:"number",value:h.customPricing,onChange:N=>j("customPricing",parseInt(N.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Billing Email"}),e.jsx("input",{type:"email",value:h.billingEmail,onChange:N=>j("billingEmail",N.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${c.billingEmail?"border-red-300":"border-gray-300"}`,placeholder:"billing@example.com"}),c.billingEmail&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.billingEmail})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Se,{className:"inline h-4 w-4 mr-1"}),"Max Learners"]}),e.jsx("input",{type:"number",value:h.maxLearners,onChange:N=>j("maxLearners",parseInt(N.target.value)),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${c.maxLearners?"border-red-300":"border-gray-300"}`,min:"1"}),c.maxLearners&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.maxLearners})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Courses"}),e.jsx("input",{type:"number",value:h.maxCourses,onChange:N=>j("maxCourses",parseInt(N.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Storage (GB)"}),e.jsx("input",{type:"number",value:h.maxStorage,onChange:N=>j("maxStorage",parseInt(N.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(ms,{className:"inline h-4 w-4 mr-1"}),"Contract Start Date"]}),e.jsx("input",{type:"date",value:h.contractStart,onChange:N=>j("contractStart",N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contract End Date"}),e.jsx("input",{type:"date",value:h.contractEnd,onChange:N=>j("contractEnd",N.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${c.contractEnd?"border-red-300":"border-gray-300"}`}),c.contractEnd&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.contractEnd})]})]})]}),g==="features"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Available Features"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(h.features).map(([N,A])=>e.jsxs("label",{className:"flex items-center space-x-3 p-3 border rounded-lg hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",checked:A,onChange:_=>j(`features.${N}`,_.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 capitalize",children:N.replace(/([A-Z])/g," $1").trim()}),e.jsxs("div",{className:"text-sm text-gray-600",children:[N==="analytics"&&"Advanced analytics and reporting",N==="certificates"&&"Digital certificates and badges",N==="apiAccess"&&"REST API access for integrations",N==="customBranding"&&"Custom branding and white-label",N==="sso"&&"Single Sign-On (SSO) integration",N==="mobileApp"&&"Mobile app access",N==="reporting"&&"Advanced reporting tools",N==="integrations"&&"Third-party integrations"]})]})]},N))})]}),!h.features.analytics&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx(Ce,{className:"h-5 w-5 text-yellow-400"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h4",{className:"text-sm font-medium text-yellow-800",children:"Limited Analytics"}),e.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Without analytics enabled, this organization will have limited reporting capabilities."})]})]})})]}),g==="settings"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Organization Settings"}),e.jsx("div",{className:"space-y-4",children:Object.entries(h.settings).map(([N,A])=>N==="dataRetention"?e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Data Retention Period"}),e.jsx("div",{className:"text-sm text-gray-600",children:"How long to keep user data after account deletion"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",value:A,onChange:_=>j(`settings.${N}`,parseInt(_.target.value)),className:"w-20 px-2 py-1 border border-gray-300 rounded text-sm",min:"1",max:"120"}),e.jsx("span",{className:"text-sm text-gray-600",children:"months"})]})]},N):e.jsxs("label",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 capitalize",children:N.replace(/([A-Z])/g," $1").trim()}),e.jsxs("div",{className:"text-sm text-gray-600",children:[N==="autoEnrollment"&&"Automatically enroll new users in default courses",N==="emailNotifications"&&"Send email notifications to users",N==="progressTracking"&&"Track and report user progress",N==="allowDownloads"&&"Allow users to download course materials",N==="requireCompletion"&&"Require course completion for certificates"]})]}),e.jsx("input",{type:"checkbox",checked:A,onChange:_=>j(`settings.${N}`,_.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})]},N))})]})})]}),e.jsxs("div",{className:"border-t border-gray-200 px-6 py-4 flex items-center justify-between bg-gray-50",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(Vs,{className:"h-4 w-4"}),e.jsxs("span",{children:["Last updated: ",new Date().toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs(oe,{type:"submit",loading:l,variant:"primary",children:[e.jsx(Ls,{className:"h-4 w-4"}),s?"Update Organization":"Create Organization"]})]})]})]})]})})},Ja=()=>{const{showToast:a}=Ve(),t=is(),[s,n]=b.useState(""),[i,l]=b.useState([]),[x,g]=b.useState(!1),[m,h]=b.useState(!1),[w,c]=b.useState(!1),[f,v]=b.useState(null),[E,y]=b.useState(null),[d,I]=b.useState(!1);b.useEffect(()=>{fs.listOrgs().then(l).catch(()=>l([]))},[]);const j=i.filter(p=>(p.name||"").toString().toLowerCase().includes(s.toLowerCase())||(p.type||"").toString().toLowerCase().includes(s.toLowerCase())||(p.contactPerson||"").toString().toLowerCase().includes(s.toLowerCase())),L=p=>{switch(p){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-yellow-100 text-yellow-800";default:return"bg-red-100 text-red-800"}},N=p=>{switch(p){case"active":return e.jsx(de,{className:"h-4 w-4 text-green-500"});case"inactive":return e.jsx(Je,{className:"h-4 w-4 text-yellow-500"});default:return e.jsx(Ce,{className:"h-4 w-4 text-red-500"})}},A=p=>p==="Premium"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800",_=()=>{h(!0)},O=()=>{t("/admin/onboarding/new-org")},Y=p=>{l(M=>[...M,p]),a("Organization added successfully!","success")},Q=()=>{const p=document.createElement("input");p.type="file",p.accept=".csv",p.onchange=M=>{var S,u;const q=(u=(S=M.target)==null?void 0:S.files)==null?void 0:u[0];q&&(a(`Importing ${q.name}...`,"info"),setTimeout(()=>{a("Organization import completed successfully!","success")},3e3))},p.click()},U=()=>z(void 0,null,function*(){I(!0);try{yield new Promise(u=>setTimeout(u,1500));const p=`Name,Type,Contact Person,Contact Email,Total Learners,Active Learners,Completion Rate,Status
${j.map(u=>`"${u.name}","${u.type}","${u.contactPerson}","${u.contactEmail}","${u.totalLearners}","${u.activeLearners}","${u.completionRate}%","${u.status}"`).join(`
`)}`,M=new Blob([p],{type:"text/csv"}),q=window.URL.createObjectURL(M),S=document.createElement("a");S.href=q,S.download=`organizations-export-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(S),S.click(),document.body.removeChild(S),window.URL.revokeObjectURL(q),a("Organizations exported successfully!","success")}catch(p){a("Failed to export organizations","error")}finally{I(!1)}}),R=p=>{const M=i.find(q=>q.id===p);M&&(y(M),c(!0))},W=p=>{l(M=>M.map(q=>q.id===p.id?p:q)),c(!1),y(null)},X=p=>{v(p),g(!0)},ee=()=>z(void 0,null,function*(){if(f){I(!0);try{yield new Promise(p=>setTimeout(p,1e3)),l(p=>p.filter(M=>M.id!==f)),a("Organization deleted successfully!","success"),g(!1),v(null)}catch(p){a("Failed to delete organization","error")}finally{I(!1)}}});return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Organization Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage client organizations, track progress, and oversee cohorts"})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(Ze,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search organizations...",value:s,onChange:p=>n(p.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(oe,{onClick:_,variant:"primary",children:[e.jsx(ns,{className:"h-4 w-4"}),"Add Organization"]}),e.jsxs(oe,{onClick:O,variant:"secondary",children:[e.jsx(we,{className:"h-4 w-4"}),"Create Organization"]}),e.jsxs(oe,{onClick:Q,variant:"secondary",children:[e.jsx(Me,{className:"h-4 w-4"}),"Import"]}),e.jsxs(oe,{onClick:U,loading:d,variant:"secondary",children:[e.jsx(ye,{className:"h-4 w-4"}),"Export"]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6 mb-8",children:j.map(p=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow duration-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:e.jsx(we,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900",children:p.name}),e.jsx("p",{className:"text-sm text-gray-600",children:p.type})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[N(p.status),e.jsx("a",{href:`/admin/organizations/${p.id}`,className:"text-sm text-blue-600 hover:underline",children:"View"}),e.jsx("button",{className:"p-1 text-gray-400 hover:text-gray-600",children:e.jsx(at,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Contact:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:p.contactPerson})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Learners:"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[p.activeLearners,"/",p.totalLearners," active"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Completion:"}),e.jsxs("span",{className:"text-sm font-bold text-green-600",children:[p.completionRate,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Subscription:"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${A(p.subscription)}`,children:p.subscription})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Overall Progress"}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[p.completionRate,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-green-400 to-green-500 h-2 rounded-full",style:{width:`${p.completionRate}%`}})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Module Progress"}),e.jsx("div",{className:"grid grid-cols-5 gap-1",children:Object.entries(p.modules).map(([M,q])=>{const S=Number(q||0);return e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`w-full h-2 rounded-full ${S>=90?"bg-green-500":S>=70?"bg-yellow-500":S>=50?"bg-orange-500":"bg-red-500"}`}),e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[S,"%"]})]},M)})})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${L(p.status)}`,children:p.status})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg",title:"View Details",children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-50 rounded-lg",title:"Edit",children:e.jsx(Ne,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-50 rounded-lg",title:"Settings",children:e.jsx(Pe,{className:"h-4 w-4"})})]})]})]},p.id))}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Organizations"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:i.filter(p=>p.status==="active").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Active Organizations"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:i.reduce((p,M)=>p+M.totalLearners,0)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Learners"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:i.length===0?"":`${Math.round(i.reduce((p,M)=>p+(M.completionRate||0),0)/i.length)}%`}),e.jsx("div",{className:"text-sm text-gray-600",children:"Avg. Completion"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Organization Details"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-6 font-semibold text-gray-900",children:"Organization"}),e.jsx("th",{className:"text-center py-3 px-6 font-semibold text-gray-900",children:"Contact"}),e.jsx("th",{className:"text-center py-3 px-6 font-semibold text-gray-900",children:"Learners"}),e.jsx("th",{className:"text-center py-3 px-6 font-semibold text-gray-900",children:"Progress"}),e.jsx("th",{className:"text-center py-3 px-6 font-semibold text-gray-900",children:"Status"}),e.jsx("th",{className:"text-center py-3 px-6 font-semibold text-gray-900",children:"Last Activity"}),e.jsx("th",{className:"text-center py-3 px-6 font-semibold text-gray-900",children:"Actions"})]})}),e.jsx("tbody",{children:j.map(p=>{var M;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:p.name}),e.jsx("div",{className:"text-sm text-gray-600",children:p.type}),e.jsx("div",{className:"text-xs text-gray-500",children:(M=p.cohorts)==null?void 0:M.join(", ")})]})}),e.jsx("td",{className:"py-4 px-6 text-center",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:p.contactPerson}),e.jsx("div",{className:"text-sm text-gray-600",children:p.contactEmail})]})}),e.jsxs("td",{className:"py-4 px-6 text-center",children:[e.jsx("div",{className:"text-lg font-bold text-gray-900",children:p.activeLearners}),e.jsxs("div",{className:"text-sm text-gray-600",children:["of ",p.totalLearners]})]}),e.jsxs("td",{className:"py-4 px-6 text-center",children:[e.jsxs("div",{className:"text-lg font-bold text-green-600",children:[p.completionRate,"%"]}),e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 mt-1 mx-auto",children:e.jsx("div",{className:"bg-gradient-to-r from-green-400 to-green-500 h-2 rounded-full",style:{width:`${p.completionRate}%`}})})]}),e.jsx("td",{className:"py-4 px-6 text-center",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[N(p.status),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${L(p.status)}`,children:p.status})]})}),e.jsx("td",{className:"py-4 px-6 text-center text-sm text-gray-600",children:new Date(p.lastActivity).toLocaleDateString()}),e.jsx("td",{className:"py-4 px-6 text-center",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(ie,{to:`/admin/organizations/${p.id}`,className:"p-1 text-blue-600 hover:text-blue-800",title:"View Details",children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsx(ie,{to:`/admin/org-profiles/org-profile-${p.id}`,className:"p-1 text-green-600 hover:text-green-800",title:"View Profile",children:e.jsx(Pe,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>R(p.id),className:"p-1 text-gray-600 hover:text-gray-800",title:"Edit",children:e.jsx(Ne,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>X(p.id),className:"p-1 text-red-600 hover:text-red-800",title:"Delete Organization",children:e.jsx(at,{className:"h-4 w-4"})})]})})]},p.id)})})]})})]}),e.jsx(Za,{isOpen:m,onClose:()=>h(!1),onOrganizationAdded:Y}),e.jsx(Ut,{isOpen:w,onClose:()=>{c(!1),y(null)},organization:E,onOrganizationUpdated:W}),e.jsx(gt,{isOpen:x,onClose:()=>{g(!1),v(null)},onConfirm:ee,title:"Delete Organization",message:"Are you sure you want to delete this organization? This action cannot be undone and will remove all associated data including learner progress.",confirmText:"Delete Organization",type:"danger",loading:d})]})},on=Object.freeze(Object.defineProperty({__proto__:null,default:Ja},Symbol.toStringTag,{value:"Module"})),er=()=>{const a=is(),{showToast:t}=Ve(),[s,n]=b.useState(!1),[i,l]=b.useState({name:"",type:"",industry:"",size:"",contactPerson:"",contactEmail:"",contactPhone:"",website:"",address:"",city:"",state:"",zipCode:"",description:"",subscription:"Standard"}),x=["Educational Institution","Healthcare Organization","Non-Profit","Government Agency","Corporate/Business","Community Organization"],g=["Education","Healthcare","Technology","Finance","Manufacturing","Retail","Non-Profit","Government","Other"],m=["1-10 employees","11-50 employees","51-200 employees","201-1000 employees","1000+ employees"],h=["Standard","Premium","Enterprise"],w=(f,v)=>{l(E=>P(k({},E),{[f]:v}))},c=f=>z(void 0,null,function*(){if(f.preventDefault(),!i.name.trim()||!i.contactPerson.trim()||!i.contactEmail.trim()){t("Please fill in all required fields","error");return}n(!0);try{yield new Promise(E=>setTimeout(E,2e3));const v=P(k({id:Date.now().toString()},i),{status:"active",totalLearners:0,activeLearners:0,completionRate:0,createdAt:new Date().toISOString()});console.log("Created organization:",v),t("Organization created successfully!","success"),a("/admin/organizations")}catch(v){t("Failed to create organization. Please try again.","error")}finally{n(!1)}});return e.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("button",{onClick:()=>a("/admin/organizations"),className:"p-2 text-gray-500 hover:text-gray-700 rounded-lg transition-colors",title:"Back to Organizations",children:e.jsx(He,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Create Organization"}),e.jsx("p",{className:"text-gray-600",children:"Add a new client organization to the system"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:e.jsxs("form",{onSubmit:c,className:"p-6 space-y-8",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[e.jsx(we,{className:"h-5 w-5 text-gray-600"}),e.jsx("span",{children:"Basic Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Organization Name *"}),e.jsx("input",{type:"text",value:i.name,onChange:f=>w("name",f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter organization name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Organization Type"}),e.jsxs("select",{value:i.type,onChange:f=>w("type",f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Type"}),x.map(f=>e.jsx("option",{value:f,children:f},f))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Industry"}),e.jsxs("select",{value:i.industry,onChange:f=>w("industry",f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Industry"}),g.map(f=>e.jsx("option",{value:f,children:f},f))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Organization Size"}),e.jsxs("select",{value:i.size,onChange:f=>w("size",f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Size"}),m.map(f=>e.jsx("option",{value:f,children:f},f))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subscription Tier"}),e.jsx("select",{value:i.subscription,onChange:f=>w("subscription",f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:h.map(f=>e.jsx("option",{value:f,children:f},f))})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[e.jsx(Se,{className:"h-5 w-5 text-gray-600"}),e.jsx("span",{children:"Contact Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Person *"}),e.jsx("input",{type:"text",value:i.contactPerson,onChange:f=>w("contactPerson",f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Primary contact name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Email *"}),e.jsx("input",{type:"email",value:i.contactEmail,onChange:f=>w("contactEmail",f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"contact@organization.com",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Phone"}),e.jsx("input",{type:"tel",value:i.contactPhone,onChange:f=>w("contactPhone",f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"(555) 123-4567"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website"}),e.jsx("input",{type:"url",value:i.website,onChange:f=>w("website",f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"https://www.organization.com"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[e.jsx(Xs,{className:"h-5 w-5 text-gray-600"}),e.jsx("span",{children:"Address Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Street Address"}),e.jsx("input",{type:"text",value:i.address,onChange:f=>w("address",f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"123 Main Street"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),e.jsx("input",{type:"text",value:i.city,onChange:f=>w("city",f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"City"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State"}),e.jsx("input",{type:"text",value:i.state,onChange:f=>w("state",f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"State"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ZIP Code"}),e.jsx("input",{type:"text",value:i.zipCode,onChange:f=>w("zipCode",f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"12345"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:i.description,onChange:f=>w("description",f.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Brief description of the organization and its goals..."})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>a("/admin/organizations"),className:"px-6 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors duration-200",disabled:s,children:"Cancel"}),e.jsxs(oe,{type:"submit",loading:s,variant:"primary",children:[e.jsx(Ls,{className:"h-4 w-4"}),s?"Creating...":"Create Organization"]})]})]})})]})},cn=Object.freeze(Object.defineProperty({__proto__:null,default:er},Symbol.toStringTag,{value:"Module"})),sr=a=>z(void 0,null,function*(){const t=xt();return console.groupCollapsed("[OrgOnboarding] createOrganization",t),console.log("Payload",a),console.groupEnd(),yield new Promise(s=>setTimeout(s,1200)),{organizationId:a.organization.id,launchUrl:`/admin/organizations/${a.organization.slug}`}}),tr={createOrganization:sr},Us=(...a)=>a.filter(Boolean).join(" "),ar=[{id:"montserrat",label:"Montserrat",headingFont:"font-['Montserrat']",bodyFont:"font-['Montserrat']"},{id:"lato",label:"Lato",headingFont:"font-['Lato']",bodyFont:"font-['Lato']"},{id:"quicksand",label:"Quicksand",headingFont:"font-['Quicksand']",bodyFont:"font-['Quicksand']"}],rr=["Free","Standard","Enterprise"],nr=["Technology","Healthcare","Finance","Education","Manufacturing","Retail","Professional Services","Other"],ir=["1-50","51-250","251-1,000","1,001-5,000","5,001+"],lr=["UTC","America/New_York","America/Chicago","America/Los_Angeles","Europe/London"],St=["en-US","en-GB","es-ES","fr-FR"],st=[{id:"organization",title:"Organization Details",description:"Foundational information and access controls."},{id:"branding",title:"Branding",description:"Logos, colors, and typography to personalize the experience."},{id:"defaults",title:"Default Settings",description:"Learning, notification, and survey defaults applied at launch."},{id:"seed",title:"Seed Content",description:"Preload demo courses, surveys, and starter messages."},{id:"invites",title:"Invite Users",description:"Add administrators, managers, and learners to the org."},{id:"review",title:"Review & Launch",description:"Verify configuration and create the organization."}],or={primary:"#4f46e5",secondary:"#f97316",typography:"montserrat",faviconUrl:"",logoUrl:"",darkModeOverrides:!1},cr={lms:{visibility:"private",completionRules:{videoThreshold:80,quizPass:85,showCertificates:!0}},notifications:{inApp:!0,emailDigestCadence:"weekly"},surveys:{anonymityThreshold:5,language:"en-US",templatePack:"dei"},rbac:{roles:[{key:"ORG_ADMIN",label:"Org Admin",permissions:["manage_users","manage_courses","view_reports","configure_settings"]},{key:"MANAGER",label:"Manager",permissions:["assign_courses","view_team_progress","schedule_surveys"]}]}},dr={preload:!0,assignDemoCourseToInvites:!0,courses:{deiFoundations:!0,inclusiveLeadership:!0},surveys:{workplaceClimatePulse:!0},notifications:{welcome:!0,gettingStarted:!0,surveyGuide:!0}},J=()=>typeof crypto!="undefined"&&"randomUUID"in crypto?crypto.randomUUID():xt(),mr=[{id:J(),name:"",email:"",role:"ORG_ADMIN",groups:[]}],_s=(a,t)=>{const s=x=>{const g=x.replace("#",""),m=parseInt(g,16);return{r:m>>16&255,g:m>>8&255,b:m&255}},n=x=>{const{r:g,g:m,b:h}=s(x),w=[g,m,h].map(c=>{const f=c/255;return f<=.03928?f/12.92:Math.pow((f+.055)/1.055,2.4)});return .2126*w[0]+.7152*w[1]+.0722*w[2]},i=n(a)+.05,l=n(t)+.05;return i>l?i/l:l/i},$s=a=>a.toLowerCase().replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-").replace(/-+/g,"-"),xr=()=>{const a=is(),{showToast:t}=Ve(),[s,n]=b.useState(0),[i,l]=b.useState(!1),[x,g]=b.useState({}),[m]=b.useState(()=>J()),[h,w]=b.useState({name:"",industry:"",size:"",primaryContactName:"",primaryContactEmail:"",timezone:"UTC",locale:"en-US",tier:"Standard",slug:""}),[c,f]=b.useState(or),[v,E]=b.useState(cr),[y,d]=b.useState(dr),[I,j]=b.useState(mr),[L,N]=b.useState(!0),A=b.useMemo(()=>({organizationName:J(),industry:J(),size:J(),primaryContactName:J(),primaryContactEmail:J(),timezone:J(),locale:J(),slug:J(),primaryColor:J(),secondaryColor:J(),darkModeOverrides:J(),lmsVisibility:J(),videoThreshold:J(),quizPass:J(),showCertificates:J(),inAppNotifications:J(),digestCadence:J(),surveyThreshold:J(),surveyLanguage:J(),surveyTemplatePack:J(),preloadToggle:J(),assignDemoCourse:J(),deiCourse:J(),inclusiveCourse:J(),workplacePulse:J(),welcomeNotification:J(),startCourseNotification:J(),surveyNotification:J(),sendInvitesToggle:J()}),[]),_=st[s],O=()=>{const S={};_.id==="organization"&&(h.name.trim()||(S.name="Organization name is required."),h.primaryContactName.trim()||(S.primaryContactName="Primary contact name is required."),h.primaryContactEmail.trim()?/^[\w.-]+@[\w.-]+\.[A-Za-z]{2,}$/.test(h.primaryContactEmail)||(S.primaryContactEmail="Enter a valid email."):S.primaryContactEmail="Primary contact email is required."),_.id==="branding"&&(_s(c.primary,"#ffffff")<4.5&&(S.primary="Primary color contrast is too low against white."),_s(c.secondary,"#111827")<4.5&&(S.secondary="Secondary color contrast is too low against slate background.")),_.id==="invites"&&I.forEach((u,C)=>{u.email.trim()?/^[\w.-]+@[\w.-]+\.[A-Za-z]{2,}$/.test(u.email)||(S[`invite-${C}`]="Enter a valid email address."):S[`invite-${C}`]="Email is required for each invitee."}),g(S),!(Object.keys(S).length>0)&&n(u=>Math.min(u+1,st.length-1))},Y=()=>{n(S=>Math.max(S-1,0))},Q=()=>z(void 0,null,function*(){l(!0);try{const S={organization:P(k({id:m},h),{slug:h.slug||$s(h.name)}),theme:c,settings:v,seedContent:y,invitees:I,sendInvitesNow:L};yield tr.createOrganization(S),t("Organization created successfully and ready to launch!","success"),a(`/admin/organizations/${S.organization.slug}`)}catch(S){console.error(S),t("Failed to create organization. Please try again.","error")}finally{l(!1)}}),U=b.useMemo(()=>{const S=[];return _s(c.primary,"#ffffff")<4.5&&S.push("Primary color contrast is below 4.5:1 against white."),_s(c.secondary,"#111827")<4.5&&S.push("Secondary color contrast is below 4.5:1 against slate."),S},[c.primary,c.secondary]),R=b.useMemo(()=>[{label:"Active Learners",value:128},{label:"Courses Completed",value:64},{label:"Avg. Quiz Score",value:"87%"},{label:"Survey Response Rate",value:"72%"}],[]),W=(S,u)=>{j(C=>C.map(G=>G.id===S?k(k({},G),u):G))},X=()=>{j(S=>[...S,{id:J(),name:"",email:"",role:"LEARNER",groups:[]}])},ee=S=>{j(u=>u.length===1?u:u.filter(C=>C.id!==S))},p=S=>{var G;const u=(G=S.target.files)==null?void 0:G[0];if(!u)return;const C=new FileReader;C.onload=()=>{var Te,Ee;const ge=((Ee=(Te=C.result)==null?void 0:Te.toString())!=null?Ee:"").split(/\r?\n/).filter(Boolean).map(B=>B.split(",").map(ve=>ve.trim().replace(/^"|"$/g,""))).filter(B=>B.length>=2).map(B=>({id:J(),name:B[0],email:B[1],role:B[2]||"LEARNER",groups:B[3]?B[3].split(";").map(ve=>ve.trim()).filter(Boolean):[]}));if(ge.length===0){t("No valid rows found in CSV file.","error");return}j(ge),t(`Loaded ${ge.length} invitees from CSV.`,"success")},C.readAsText(u)},M=S=>{w(u=>P(k({},u),{name:S,slug:u.slug||$s(S)}))},q=S=>{switch(S){case"organization":return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",htmlFor:A.organizationName,children:"Organization Name *"}),e.jsx("input",{type:"text",id:A.organizationName,value:h.name,onChange:u=>M(u.target.value),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-transparent focus:ring-2 focus:ring-orange-500",placeholder:"Acme Corp"}),x.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",htmlFor:A.industry,children:"Industry"}),e.jsxs("select",{id:A.industry,value:h.industry,onChange:u=>w(C=>P(k({},C),{industry:u.target.value})),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-transparent focus:ring-2 focus:ring-orange-500",children:[e.jsx("option",{value:"",children:"Select industry"}),nr.map(u=>e.jsx("option",{value:u,children:u},u))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",htmlFor:A.size,children:"Organization Size"}),e.jsxs("select",{id:A.size,value:h.size,onChange:u=>w(C=>P(k({},C),{size:u.target.value})),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-transparent focus:ring-2 focus:ring-orange-500",children:[e.jsx("option",{value:"",children:"Select size"}),ir.map(u=>e.jsx("option",{value:u,children:u},u))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Subscription Tier"}),e.jsx("div",{className:"mt-2 grid grid-cols-1 gap-3 sm:grid-cols-3",children:rr.map(u=>e.jsx("button",{type:"button",onClick:()=>w(C=>P(k({},C),{tier:u})),className:Us("rounded-lg border px-3 py-2 text-sm font-medium transition focus:outline-none focus:ring-2 focus:ring-orange-500",h.tier===u?"border-orange-500 bg-orange-50 text-orange-700":"border-gray-200 text-gray-600 hover:border-gray-300"),children:u},u))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",htmlFor:A.primaryContactName,children:"Primary Contact Name *"}),e.jsx("input",{type:"text",id:A.primaryContactName,value:h.primaryContactName,onChange:u=>w(C=>P(k({},C),{primaryContactName:u.target.value})),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-transparent focus:ring-2 focus:ring-orange-500",placeholder:"Alex Johnson"}),x.primaryContactName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.primaryContactName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",htmlFor:A.primaryContactEmail,children:"Primary Contact Email *"}),e.jsx("input",{type:"email",id:A.primaryContactEmail,value:h.primaryContactEmail,onChange:u=>w(C=>P(k({},C),{primaryContactEmail:u.target.value})),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-transparent focus:ring-2 focus:ring-orange-500",placeholder:"alex.johnson@example.com"}),x.primaryContactEmail&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.primaryContactEmail})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",htmlFor:A.timezone,children:"Timezone"}),e.jsx("select",{id:A.timezone,value:h.timezone,onChange:u=>w(C=>P(k({},C),{timezone:u.target.value})),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-transparent focus:ring-2 focus:ring-orange-500",children:lr.map(u=>e.jsx("option",{value:u,children:u},u))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",htmlFor:A.locale,children:"Locale"}),e.jsx("select",{id:A.locale,value:h.locale,onChange:u=>w(C=>P(k({},C),{locale:u.target.value})),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-transparent focus:ring-2 focus:ring-orange-500",children:St.map(u=>e.jsx("option",{value:u,children:u},u))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",htmlFor:A.slug,children:"Org Slug"}),e.jsx("input",{type:"text",id:A.slug,value:h.slug,onChange:u=>w(C=>P(k({},C),{slug:$s(u.target.value)})),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-transparent focus:ring-2 focus:ring-orange-500",placeholder:"acme-corp"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Used for subdomain routing and APIs."})]})]})});case"branding":return e.jsxs("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-2",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Organization Logo"}),e.jsxs("div",{className:"mt-1 flex items-center gap-3",children:[e.jsxs("label",{className:"inline-flex cursor-pointer items-center justify-center rounded-lg border border-dashed border-gray-300 px-4 py-2 text-sm font-medium text-gray-600 hover:border-orange-400 hover:text-orange-500",children:[e.jsx(Me,{className:"mr-2 h-4 w-4"})," Upload",e.jsx("input",{type:"file",accept:"image/png,image/svg+xml",className:"hidden",onChange:u=>{var le;const C=(le=u.target.files)==null?void 0:le[0];if(!C)return;const G=URL.createObjectURL(C);f(je=>P(k({},je),{logoUrl:G}))}})]}),c.logoUrl&&e.jsx("button",{type:"button",className:"text-sm text-orange-600 hover:text-orange-700",onClick:()=>f(u=>P(k({},u),{logoUrl:""})),children:"Remove"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Favicon"}),e.jsxs("div",{className:"mt-1 flex items-center gap-3",children:[e.jsxs("label",{className:"inline-flex cursor-pointer items-center justify-center rounded-lg border border-dashed border-gray-300 px-4 py-2 text-sm font-medium text-gray-600 hover:border-orange-400 hover:text-orange-500",children:[e.jsx(Me,{className:"mr-2 h-4 w-4"})," Upload",e.jsx("input",{type:"file",accept:"image/png,image/svg+xml",className:"hidden",onChange:u=>{var le;const C=(le=u.target.files)==null?void 0:le[0];if(!C)return;const G=URL.createObjectURL(C);f(je=>P(k({},je),{faviconUrl:G}))}})]}),c.faviconUrl&&e.jsxs(e.Fragment,{children:[e.jsx("img",{src:c.faviconUrl,alt:"Favicon preview",className:"h-6 w-6 rounded"}),e.jsx("button",{type:"button",className:"text-sm text-orange-600 hover:text-orange-700",onClick:()=>f(u=>P(k({},u),{faviconUrl:""})),children:"Remove"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",htmlFor:A.primaryColor,children:"Primary Color"}),e.jsx("input",{type:"color",id:A.primaryColor,value:c.primary,onChange:u=>f(C=>P(k({},C),{primary:u.target.value})),className:"mt-2 h-12 w-full cursor-pointer rounded-lg border border-gray-300"}),x.primary&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.primary})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",htmlFor:A.secondaryColor,children:"Secondary Color"}),e.jsx("input",{type:"color",id:A.secondaryColor,value:c.secondary,onChange:u=>f(C=>P(k({},C),{secondary:u.target.value})),className:"mt-2 h-12 w-full cursor-pointer rounded-lg border border-gray-300"}),x.secondary&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.secondary})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",htmlFor:A.typography,children:"Typography"}),e.jsx("div",{id:A.typography,className:"mt-2 grid grid-cols-1 gap-3 sm:grid-cols-3",children:ar.map(u=>e.jsx("button",{type:"button",onClick:()=>f(C=>P(k({},C),{typography:u.id})),className:Us("rounded-lg border px-3 py-2 text-sm transition focus:outline-none focus:ring-2 focus:ring-orange-500",c.typography===u.id?"border-orange-500 bg-orange-50 text-orange-700":"border-gray-200 text-gray-600 hover:border-gray-300"),children:u.label},u.id))})]}),e.jsx("div",{className:"sm:col-span-2",children:e.jsxs("label",{className:"inline-flex items-center text-sm text-gray-700",htmlFor:A.darkModeOverrides,children:[e.jsx("input",{type:"checkbox",checked:c.darkModeOverrides,onChange:u=>f(C=>P(k({},C),{darkModeOverrides:u.target.checked})),className:"mr-2 rounded border-gray-300 text-orange-500 focus:ring-orange-500",id:A.darkModeOverrides}),"Provide dark mode overrides"]})})]}),U.length>0&&e.jsxs("div",{className:"rounded-lg border border-yellow-300 bg-yellow-50 p-4 text-sm text-yellow-800",children:[e.jsx("p",{className:"font-medium",children:"Contrast recommendations"}),e.jsx("ul",{className:"mt-2 list-disc space-y-1 pl-5",children:U.map(u=>e.jsx("li",{children:u},u))})]})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-gray-50 p-6",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-gray-500",children:"Live Preview"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Light and dark mode preview using selected theme"})]}),c.logoUrl&&e.jsx("img",{src:c.logoUrl,alt:"Logo preview",className:"h-10"})]}),e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-4",style:{borderColor:c.primary},children:[e.jsx("p",{className:"text-xs font-semibold uppercase text-gray-500",children:"Dashboard"}),e.jsxs("h4",{className:"mt-2 text-xl font-bold",style:{color:c.primary,fontFamily:c.typography==="quicksand"?"Quicksand":c.typography==="lato"?"Lato":"Montserrat"},children:["Welcome to ",h.name||"Your Organization"]}),e.jsx("div",{className:"mt-4 grid grid-cols-2 gap-3",children:R.map(u=>e.jsxs("div",{className:"rounded-lg border border-gray-200 p-3",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500",children:u.label}),e.jsx("p",{className:"mt-1 text-lg font-semibold",style:{color:c.secondary},children:u.value})]},u.label))})]}),e.jsxs("div",{className:"mt-6 rounded-lg border border-gray-800 bg-gray-900 p-4 text-white",children:[e.jsx("p",{className:"text-xs font-semibold uppercase text-gray-400",children:"Dark Mode Preview"}),e.jsx("h4",{className:"mt-2 text-xl font-bold",style:{color:c.primary,fontFamily:c.typography==="quicksand"?"Quicksand":c.typography==="lato"?"Lato":"Montserrat"},children:"Learning Experience"}),e.jsx("div",{className:"mt-4 grid grid-cols-2 gap-3",children:R.map(u=>e.jsxs("div",{className:"rounded-lg border border-gray-700 bg-gray-800 p-3",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-400",children:u.label}),e.jsx("p",{className:"mt-1 text-lg font-semibold",style:{color:c.secondary},children:u.value})]},u.label))})]})]})]});case"defaults":return e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"mb-4 flex items-center gap-2 text-gray-900",children:[e.jsx(Pe,{className:"h-5 w-5"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Learning Management"})]}),e.jsxs("div",{className:"space-y-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-700",htmlFor:A.lmsVisibility,children:"Default Course Visibility"}),e.jsxs("select",{id:A.lmsVisibility,value:v.lms.visibility,onChange:u=>E(C=>P(k({},C),{lms:P(k({},C.lms),{visibility:u.target.value})})),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-transparent focus:ring-2 focus:ring-orange-500",children:[e.jsx("option",{value:"private",children:"Private (invite only)"}),e.jsx("option",{value:"catalog",children:"Catalog (visible to all learners)"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-700",htmlFor:A.videoThreshold,children:"Video Threshold %"}),e.jsx("input",{type:"number",min:0,max:100,id:A.videoThreshold,value:v.lms.completionRules.videoThreshold,onChange:u=>E(C=>P(k({},C),{lms:P(k({},C.lms),{completionRules:P(k({},C.lms.completionRules),{videoThreshold:Number(u.target.value)})})})),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-transparent focus:ring-2 focus:ring-orange-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-700",htmlFor:A.quizPass,children:"Quiz Pass %"}),e.jsx("input",{type:"number",min:0,max:100,id:A.quizPass,value:v.lms.completionRules.quizPass,onChange:u=>E(C=>P(k({},C),{lms:P(k({},C.lms),{completionRules:P(k({},C.lms.completionRules),{quizPass:Number(u.target.value)})})})),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-transparent focus:ring-2 focus:ring-orange-500"})]}),e.jsxs("label",{className:"flex items-center gap-2 pt-6 text-gray-700",htmlFor:A.showCertificates,children:[e.jsx("input",{type:"checkbox",id:A.showCertificates,checked:v.lms.completionRules.showCertificates,onChange:u=>E(C=>P(k({},C),{lms:P(k({},C.lms),{completionRules:P(k({},C.lms.completionRules),{showCertificates:u.target.checked})})})),className:"h-4 w-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),e.jsx("span",{children:"Show certificates"})]})]})]})]}),e.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"mb-4 flex items-center gap-2 text-gray-900",children:[e.jsx(rs,{className:"h-5 w-5"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Notifications"})]}),e.jsxs("div",{className:"space-y-4 text-sm",children:[e.jsxs("label",{className:"inline-flex items-center text-gray-700",htmlFor:A.inAppNotifications,children:[e.jsx("input",{type:"checkbox",id:A.inAppNotifications,checked:v.notifications.inApp,onChange:u=>E(C=>P(k({},C),{notifications:P(k({},C.notifications),{inApp:u.target.checked})})),className:"mr-2 h-4 w-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),"Enable in-app notifications"]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-700",htmlFor:A.digestCadence,children:"Email Digest Cadence"}),e.jsxs("select",{id:A.digestCadence,value:v.notifications.emailDigestCadence,onChange:u=>E(C=>P(k({},C),{notifications:P(k({},C.notifications),{emailDigestCadence:u.target.value})})),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-transparent focus:ring-2 focus:ring-orange-500",children:[e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"})]})]})]})]}),e.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"mb-4 flex items-center gap-2 text-gray-900",children:[e.jsx(Ae,{className:"h-5 w-5"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Survey Defaults"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 text-sm sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-700",htmlFor:A.surveyThreshold,children:"Anonymity Threshold"}),e.jsx("input",{type:"number",min:1,id:A.surveyThreshold,value:v.surveys.anonymityThreshold,onChange:u=>E(C=>P(k({},C),{surveys:P(k({},C.surveys),{anonymityThreshold:Number(u.target.value)})})),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-transparent focus:ring-2 focus:ring-orange-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-700",htmlFor:A.surveyLanguage,children:"Default Language"}),e.jsx("select",{id:A.surveyLanguage,value:v.surveys.language,onChange:u=>E(C=>P(k({},C),{surveys:P(k({},C.surveys),{language:u.target.value})})),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-transparent focus:ring-2 focus:ring-orange-500",children:St.map(u=>e.jsx("option",{value:u,children:u},u))})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"text-gray-700",htmlFor:A.surveyTemplatePack,children:"Template Pack"}),e.jsxs("select",{id:A.surveyTemplatePack,value:v.surveys.templatePack,onChange:u=>E(C=>P(k({},C),{surveys:P(k({},C.surveys),{templatePack:u.target.value})})),className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-transparent focus:ring-2 focus:ring-orange-500",children:[e.jsx("option",{value:"dei",children:"DEI Essentials"}),e.jsx("option",{value:"engagement",children:"Engagement Pulse"}),e.jsx("option",{value:"wellness",children:"Wellness & Burnout"})]})]})]})]}),e.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"mb-4 flex items-center gap-2 text-gray-900",children:[e.jsx(Se,{className:"h-5 w-5"}),e.jsx("h3",{className:"text-lg font-semibold",children:"RBAC Defaults"})]}),e.jsx("div",{className:"space-y-4 text-sm",children:v.rbac.roles.map(u=>e.jsxs("div",{className:"rounded-lg border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:u.label}),e.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500",children:u.key})]}),e.jsxs("span",{className:"rounded-full bg-orange-100 px-2 py-1 text-xs font-medium text-orange-700",children:[u.permissions.length," permissions"]})]}),e.jsx("ul",{className:"mt-3 list-disc space-y-1 pl-4 text-gray-600",children:u.permissions.map(C=>e.jsx("li",{children:C.replace(/_/g," ")},C))})]},u.key))})]})]});case"seed":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("label",{className:"inline-flex items-center rounded-lg border border-gray-200 bg-white p-4 text-sm text-gray-700 shadow-sm",htmlFor:A.preloadToggle,children:[e.jsx("input",{type:"checkbox",id:A.preloadToggle,checked:y.preload,onChange:u=>d(C=>P(k({},C),{preload:u.target.checked})),className:"mr-3 h-5 w-5 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),"Preload demo content to accelerate go-live (recommended)"]}),y.preload&&e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"mb-3 flex items-center gap-2 text-gray-900",children:[e.jsx(Es,{className:"h-5 w-5 text-orange-500"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Courses"})]}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-700",children:[e.jsxs("label",{className:"flex items-start gap-3",htmlFor:A.deiCourse,children:[e.jsx("input",{type:"checkbox",id:A.deiCourse,checked:y.courses.deiFoundations,onChange:u=>d(C=>P(k({},C),{courses:P(k({},C.courses),{deiFoundations:u.target.checked})})),className:"mt-1 h-4 w-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),e.jsxs("span",{children:[e.jsx("span",{className:"font-medium",children:"DEI Foundations"}),e.jsx("span",{className:"block text-xs text-gray-500",children:"Video lessons, knowledge check quiz, downloadable resource"})]})]}),e.jsxs("label",{className:"flex items-start gap-3",htmlFor:A.inclusiveCourse,children:[e.jsx("input",{type:"checkbox",id:A.inclusiveCourse,checked:y.courses.inclusiveLeadership,onChange:u=>d(C=>P(k({},C),{courses:P(k({},C.courses),{inclusiveLeadership:u.target.checked})})),className:"mt-1 h-4 w-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),e.jsxs("span",{children:[e.jsx("span",{className:"font-medium",children:"Inclusive Leadership Microlearning"}),e.jsx("span",{className:"block text-xs text-gray-500",children:"5-minute primer with action checklist"})]})]}),e.jsxs("label",{className:"flex items-start gap-3",htmlFor:A.assignDemoCourse,children:[e.jsx("input",{type:"checkbox",id:A.assignDemoCourse,checked:y.assignDemoCourseToInvites,onChange:u=>d(C=>P(k({},C),{assignDemoCourseToInvites:u.target.checked})),className:"mt-1 h-4 w-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),e.jsxs("span",{children:[e.jsx("span",{className:"font-medium",children:"Assign demo course to invited users"}),e.jsx("span",{className:"block text-xs text-gray-500",children:"New learners receive demo assignments automatically"})]})]})]})]}),e.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"mb-3 flex items-center gap-2 text-gray-900",children:[e.jsx(Ae,{className:"h-5 w-5 text-orange-500"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Surveys"})]}),e.jsx("div",{className:"space-y-3 text-sm text-gray-700",children:e.jsxs("label",{className:"flex items-start gap-3",htmlFor:A.workplacePulse,children:[e.jsx("input",{type:"checkbox",id:A.workplacePulse,checked:y.surveys.workplaceClimatePulse,onChange:u=>d(C=>P(k({},C),{surveys:P(k({},C.surveys),{workplaceClimatePulse:u.target.checked})})),className:"mt-1 h-4 w-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),e.jsxs("span",{children:[e.jsx("span",{className:"font-medium",children:"Workplace Climate Pulse"}),e.jsx("span",{className:"block text-xs text-gray-500",children:"Likert scale items with anonymity threshold baked in"})]})]})})]}),e.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"mb-3 flex items-center gap-2 text-gray-900",children:[e.jsx(rs,{className:"h-5 w-5 text-orange-500"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Notifications"})]}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-700",children:[e.jsxs("label",{className:"flex items-start gap-3",htmlFor:A.welcomeNotification,children:[e.jsx("input",{type:"checkbox",id:A.welcomeNotification,checked:y.notifications.welcome,onChange:u=>d(C=>P(k({},C),{notifications:P(k({},C.notifications),{welcome:u.target.checked})})),className:"mt-1 h-4 w-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),e.jsxs("span",{children:[e.jsx("span",{className:"font-medium",children:"Welcome to the LMS"}),e.jsx("span",{className:"block text-xs text-gray-500",children:"Greets new members with branded onboarding"})]})]}),e.jsxs("label",{className:"flex items-start gap-3",htmlFor:A.startCourseNotification,children:[e.jsx("input",{type:"checkbox",id:A.startCourseNotification,checked:y.notifications.gettingStarted,onChange:u=>d(C=>P(k({},C),{notifications:P(k({},C.notifications),{gettingStarted:u.target.checked})})),className:"mt-1 h-4 w-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),e.jsxs("span",{children:[e.jsx("span",{className:"font-medium",children:"How to start your first course"}),e.jsx("span",{className:"block text-xs text-gray-500",children:"Guides learners to their first assignment"})]})]}),e.jsxs("label",{className:"flex items-start gap-3",htmlFor:A.surveyNotification,children:[e.jsx("input",{type:"checkbox",id:A.surveyNotification,checked:y.notifications.surveyGuide,onChange:u=>d(C=>P(k({},C),{notifications:P(k({},C.notifications),{surveyGuide:u.target.checked})})),className:"mt-1 h-4 w-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),e.jsxs("span",{children:[e.jsx("span",{className:"font-medium",children:"How to take a survey"}),e.jsx("span",{className:"block text-xs text-gray-500",children:"Explains survey participation expectations"})]})]})]})]})]})]});case"invites":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Invite team members"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Upload CSV or add invitees manually. Roles determine access at launch."})]}),e.jsxs("label",{className:"inline-flex cursor-pointer items-center rounded-lg border border-gray-200 px-3 py-2 text-sm font-medium text-gray-600 hover:border-orange-400 hover:text-orange-500",children:[e.jsx(Me,{className:"mr-2 h-4 w-4"})," Import CSV",e.jsx("input",{type:"file",accept:".csv",className:"hidden",onChange:p})]})]}),e.jsx("div",{className:"overflow-hidden rounded-lg border border-gray-200",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-600",children:"Name"}),e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-600",children:"Email"}),e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-600",children:"Role"}),e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-600",children:"Groups"}),e.jsx("th",{className:"px-4 py-2"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:I.map((u,C)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:e.jsx("input",{type:"text",value:u.name,onChange:G=>W(u.id,{name:G.target.value}),placeholder:"Jordan Lee",className:"w-full rounded-lg border border-gray-200 px-3 py-2 focus:border-transparent focus:ring-2 focus:ring-orange-500"})}),e.jsxs("td",{className:"px-4 py-2",children:[e.jsx("input",{type:"email",value:u.email,onChange:G=>W(u.id,{email:G.target.value}),placeholder:"jordan@example.com",className:"w-full rounded-lg border border-gray-200 px-3 py-2 focus:border-transparent focus:ring-2 focus:ring-orange-500"}),x[`invite-${C}`]&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:x[`invite-${C}`]})]}),e.jsx("td",{className:"px-4 py-2",children:e.jsxs("select",{value:u.role,onChange:G=>W(u.id,{role:G.target.value}),className:"w-full rounded-lg border border-gray-200 px-3 py-2 focus:border-transparent focus:ring-2 focus:ring-orange-500",children:[e.jsx("option",{value:"ORG_ADMIN",children:"Org Admin"}),e.jsx("option",{value:"MANAGER",children:"Manager"}),e.jsx("option",{value:"LEARNER",children:"Learner"}),e.jsx("option",{value:"VIEWER",children:"Viewer"})]})}),e.jsxs("td",{className:"px-4 py-2",children:[e.jsx("input",{type:"text",value:u.groups.join(", "),onChange:G=>W(u.id,{groups:G.target.value.split(",").map(le=>le.trim()).filter(Boolean)}),placeholder:"People Ops; Leadership",className:"w-full rounded-lg border border-gray-200 px-3 py-2 focus:border-transparent focus:ring-2 focus:ring-orange-500"}),e.jsx("p",{className:"mt-1 text-xs text-gray-400",children:"Separate with commas or semicolons."})]}),e.jsx("td",{className:"px-4 py-2 text-right",children:e.jsx("button",{type:"button",onClick:()=>ee(u.id),className:"text-sm text-red-500 hover:text-red-600 disabled:opacity-40",disabled:I.length===1,children:"Remove"})})]},u.id))})]})}),e.jsxs("button",{type:"button",onClick:X,className:"mt-4 inline-flex items-center rounded-lg border border-dashed border-gray-300 px-4 py-2 text-sm font-medium text-gray-600 hover:border-orange-400 hover:text-orange-500",children:[e.jsx(ns,{className:"mr-2 h-4 w-4"})," Add another invitee"]})]}),e.jsxs("label",{className:"inline-flex items-center rounded-lg border border-gray-200 bg-white p-4 text-sm text-gray-700 shadow-sm",htmlFor:A.sendInvitesToggle,children:[e.jsx("input",{type:"checkbox",id:A.sendInvitesToggle,checked:L,onChange:u=>N(u.target.checked),className:"mr-3 h-5 w-5 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),"Send invite emails immediately (with magic links)"]})]});case"review":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-4 flex items-center gap-2 text-gray-900",children:[e.jsx(we,{className:"h-5 w-5"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Organization Summary"})]}),e.jsxs("dl",{className:"grid grid-cols-1 gap-4 text-sm text-gray-700 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-500",children:"Name"}),e.jsx("dd",{className:"font-medium",children:h.name||""})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-500",children:"Industry"}),e.jsx("dd",{className:"font-medium",children:h.industry||""})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-500",children:"Tier"}),e.jsx("dd",{className:"font-medium",children:h.tier})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-500",children:"Timezone / Locale"}),e.jsxs("dd",{className:"font-medium",children:[h.timezone,"  ",h.locale]})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-500",children:"Primary Contact"}),e.jsxs("dd",{className:"font-medium",children:[h.primaryContactName," (",h.primaryContactEmail,")"]})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-500",children:"Slug"}),e.jsx("dd",{className:"font-medium",children:h.slug||$s(h.name)})]})]})]}),e.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-4 flex items-center gap-2 text-gray-900",children:[e.jsx(Ts,{className:"h-5 w-5"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Branding"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[c.logoUrl?e.jsx("img",{src:c.logoUrl,alt:"Logo",className:"h-12"}):e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-gray-100 text-gray-400",children:e.jsx(Ts,{className:"h-6 w-6"})}),e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsxs("p",{children:["Primary: ",e.jsx("span",{className:"font-medium",children:c.primary})]}),e.jsxs("p",{children:["Secondary: ",e.jsx("span",{className:"font-medium",children:c.secondary})]}),e.jsxs("p",{children:["Typography: ",e.jsx("span",{className:"font-medium",children:c.typography})]})]})]})]}),e.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-4 flex items-center gap-2 text-gray-900",children:[e.jsx(Pe,{className:"h-5 w-5"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Defaults & Access"})]}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[e.jsxs("li",{children:["Course visibility: ",v.lms.visibility]}),e.jsxs("li",{children:["Completion rules: ",v.lms.completionRules.videoThreshold,"% video  ",v.lms.completionRules.quizPass,"% quiz  certificates ",v.lms.completionRules.showCertificates?"enabled":"disabled"]}),e.jsxs("li",{children:["Email digest cadence: ",v.notifications.emailDigestCadence]}),e.jsxs("li",{children:["Surveys: anonymity  ",v.surveys.anonymityThreshold,"  language ",v.surveys.language,"  template pack ",v.surveys.templatePack]}),e.jsxs("li",{children:["RBAC roles provisioned: ",v.rbac.roles.map(u=>u.label).join(", ")]})]})]}),e.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-4 flex items-center gap-2 text-gray-900",children:[e.jsx(Es,{className:"h-5 w-5"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Seed Content & Invites"})]}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[e.jsxs("li",{children:["Seeding enabled: ",y.preload?"Yes":"No"]}),y.preload&&e.jsxs(e.Fragment,{children:[e.jsxs("li",{children:["Courses: ",[y.courses.deiFoundations&&"DEI Foundations",y.courses.inclusiveLeadership&&"Inclusive Leadership Microlearning"].filter(Boolean).join(", ")||"None"]}),e.jsxs("li",{children:["Assign demo course to invitees: ",y.assignDemoCourseToInvites?"Yes":"No"]}),e.jsxs("li",{children:["Survey templates: ",y.surveys.workplaceClimatePulse?"Workplace Climate Pulse":"None"]}),e.jsxs("li",{children:["Notifications: ",[y.notifications.welcome&&"Welcome",y.notifications.gettingStarted&&"Start your first course",y.notifications.surveyGuide&&"Survey tips"].filter(Boolean).join(", ")||"None"]})]}),e.jsxs("li",{children:["Invite count: ",I.length]}),e.jsxs("li",{children:["Send invites on launch: ",L?"Yes":"No"]})]})]})]}),e.jsx("div",{className:"rounded-xl border border-emerald-200 bg-emerald-50 p-6 text-emerald-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(qs,{className:"h-6 w-6"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"RLS policies & telemetry will be provisioned automatically."}),e.jsx("p",{className:"text-sm",children:"Upon launch, tenant isolation, audit logging, and onboarding telemetry events (org_created, seed_content_created, invites_sent) will be recorded."})]})]})})]});default:return null}};return e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"mx-auto max-w-6xl space-y-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{type:"button",onClick:()=>a(-1),className:"rounded-full border border-gray-200 p-2 text-gray-500 transition hover:text-gray-700",children:e.jsx(He,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Tenant Onboarding Wizard"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Create organizations with branded experiences, seeded content, and ready-to-go access in minutes."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-[280px,1fr]",children:[e.jsx("nav",{className:"space-y-3",children:st.map((S,u)=>{const C=u===s,G=u<s;return e.jsx("div",{className:Us("rounded-xl border p-4",C?"border-orange-500 bg-orange-50":G?"border-emerald-200 bg-emerald-50":"border-gray-200 bg-white"),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:Us("flex h-8 w-8 items-center justify-center rounded-full text-sm font-semibold",G?"bg-emerald-500 text-white":C?"bg-orange-500 text-white":"bg-gray-100 text-gray-500"),children:G?e.jsx(qs,{className:"h-4 w-4"}):u+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:S.title}),e.jsx("p",{className:"text-xs text-gray-500",children:S.description})]})]})},S.id)})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-2xl border border-gray-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-6 flex items-center gap-3 text-gray-900",children:[_.id==="organization"&&e.jsx(we,{className:"h-5 w-5"}),_.id==="branding"&&e.jsx(Ts,{className:"h-5 w-5"}),_.id==="defaults"&&e.jsx(Pe,{className:"h-5 w-5"}),_.id==="seed"&&e.jsx(Es,{className:"h-5 w-5"}),_.id==="invites"&&e.jsx(Se,{className:"h-5 w-5"}),_.id==="review"&&e.jsx(qs,{className:"h-5 w-5"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold",children:_.title}),e.jsx("p",{className:"text-sm text-gray-500",children:_.description})]})]}),q(_.id)]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{type:"button",onClick:Y,disabled:s===0,className:"inline-flex items-center gap-2 rounded-lg border border-gray-200 px-4 py-2 text-sm font-medium text-gray-600 transition hover:border-gray-300 disabled:opacity-50",children:"Back"}),_.id!=="review"?e.jsx("button",{type:"button",onClick:O,className:"inline-flex items-center gap-2 rounded-lg bg-orange-500 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-orange-600",children:"Continue"}):e.jsxs(oe,{onClick:Q,variant:"primary",disabled:i,children:[i&&e.jsx(oa,{className:"h-4 w-4 animate-spin"})," Create Organization"]})]})]})]})]})})},dn=Object.freeze(Object.defineProperty({__proto__:null,default:xr},Symbol.toStringTag,{value:"Module"})),ur=()=>{const{id:a}=vs(),{showToast:t}=Ve(),[s,n]=b.useState(null),[i,l]=b.useState(null),[x,g]=b.useState(!0),[m,h]=b.useState(!1),[w,c]=b.useState("overview");b.useEffect(()=>{z(void 0,null,function*(){if(a){g(!0);try{const[j,L]=yield Promise.all([fs.getOrg(a),fs.getOrgStats(a)]);n(j),l(L)}catch(j){t("Failed to load organization details","error")}finally{g(!1)}}})},[a,t]);const f=I=>{n(I),t("Organization updated successfully!","success")};if(x)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})});if(!s)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx(As,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Organization Not Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"The organization you're looking for doesn't exist."}),e.jsxs(ie,{to:"/admin/organizations",className:"inline-flex items-center px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:[e.jsx(He,{className:"w-4 h-4 mr-2"}),"Back to Organizations"]})]});const v=I=>{switch(I){case"active":return"bg-green-100 text-green-800";case"trial":return"bg-blue-100 text-blue-800";case"inactive":return"bg-yellow-100 text-yellow-800";case"suspended":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},E=I=>{switch(I){case"active":return e.jsx(de,{className:"w-4 h-4 text-green-500"});case"trial":return e.jsx(Je,{className:"w-4 h-4 text-blue-500"});case"inactive":return e.jsx(As,{className:"w-4 h-4 text-yellow-500"});case"suspended":return e.jsx(Oe,{className:"w-4 h-4 text-red-500"});default:return e.jsx(As,{className:"w-4 h-4 text-gray-500"})}},y=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6"],d=[{id:"overview",label:"Overview",icon:Be},{id:"users",label:"Users & Learners",icon:Se},{id:"analytics",label:"Analytics",icon:xs},{id:"settings",label:"Settings",icon:Pe},{id:"billing",label:"Billing",icon:Is}];return e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(ie,{to:"/admin/organizations",className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(He,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:s.logo?e.jsx("img",{src:s.logo,alt:"Logo",className:"w-8 h-8 rounded"}):e.jsx(we,{className:"w-8 h-8 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:s.name}),e.jsxs("div",{className:"flex items-center space-x-3 mt-1",children:[e.jsx("span",{className:"text-sm text-gray-600",children:s.type}),e.jsx("span",{className:"text-gray-300",children:""}),e.jsxs("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${v(s.status)}`,children:[E(s.status),e.jsx("span",{className:"ml-1 capitalize",children:s.status})]}),s.tags&&s.tags.map(I=>e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:I},I))]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{className:"flex items-center space-x-2 px-3 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:[e.jsx(dt,{className:"w-4 h-4"}),e.jsx("span",{children:"Share"})]}),e.jsxs("button",{className:"flex items-center space-x-2 px-3 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:[e.jsx(ye,{className:"w-4 h-4"}),e.jsx("span",{children:"Export"})]}),e.jsxs(oe,{onClick:()=>h(!0),variant:"primary",children:[e.jsx(Ne,{className:"w-4 h-4"}),"Edit Organization"]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mt-6",children:[e.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Se,{className:"w-8 h-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:s.totalLearners}),e.jsx("div",{className:"text-sm text-blue-700",children:"Total Learners"})]})]})}),e.jsx("div",{className:"bg-green-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Vs,{className:"w-8 h-8 text-green-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-green-900",children:s.activeLearners}),e.jsx("div",{className:"text-sm text-green-700",children:"Active Learners"})]})]})}),e.jsx("div",{className:"bg-yellow-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ge,{className:"w-8 h-8 text-yellow-600"}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold text-yellow-900",children:[s.completionRate,"%"]}),e.jsx("div",{className:"text-sm text-yellow-700",children:"Completion Rate"})]})]})}),e.jsx("div",{className:"bg-purple-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(zs,{className:"w-8 h-8 text-purple-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-900",children:s.cohorts.length}),e.jsx("div",{className:"text-sm text-purple-700",children:"Active Cohorts"})]})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:d.map(I=>e.jsxs("button",{onClick:()=>c(I.id),className:`py-3 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${w===I.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(I.icon,{className:"w-4 h-4"}),e.jsx("span",{children:I.label})]},I.id))})}),e.jsxs("div",{className:"p-6",children:[w==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Organization Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(rs,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Primary Contact"}),e.jsx("div",{className:"text-gray-600",children:s.contactPerson}),e.jsx("div",{className:"text-sm text-gray-500",children:s.contactEmail})]})]}),s.contactPhone&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ct,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Phone"}),e.jsx("div",{className:"text-gray-600",children:s.contactPhone})]})]}),s.website&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(us,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Website"}),e.jsx("a",{href:s.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:s.website})]})]}),s.address&&e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Xs,{className:"w-5 h-5 text-gray-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Address"}),e.jsxs("div",{className:"text-gray-600",children:[s.address,e.jsx("br",{}),s.city&&`${s.city}, `,s.state," ",s.postalCode,e.jsx("br",{}),s.country]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Subscription Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Is,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Plan"}),e.jsx("div",{className:"text-gray-600",children:s.subscription}),e.jsx("div",{className:"text-sm text-gray-500",children:s.billingCycle&&`Billed ${s.billingCycle}`})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ms,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Contract Period"}),e.jsxs("div",{className:"text-gray-600",children:[s.contractStart?new Date(s.contractStart).toLocaleDateString():"Not set",s.contractEnd&&` - ${new Date(s.contractEnd).toLocaleDateString()}`]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx($e,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Limits"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("div",{children:["Max Learners: ",s.maxLearners||"Unlimited"]}),e.jsxs("div",{children:["Max Courses: ",s.maxCourses||"Unlimited"]}),e.jsxs("div",{children:["Storage: ",s.maxStorage||"Unlimited"," GB"]})]})]})]})]})]})]}),i&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance Overview"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"User Growth (12 months)"}),e.jsx("div",{className:"h-40",children:e.jsx(Js,{width:"100%",height:"100%",children:e.jsxs(wa,{data:i.trends.userGrowth,children:[e.jsx(jt,{dataKey:"month",fontSize:12}),e.jsx(vt,{fontSize:12}),e.jsx(Nt,{strokeDasharray:"3 3"}),e.jsx(et,{}),e.jsx(Ca,{type:"monotone",dataKey:"users",stroke:"#3B82F6",strokeWidth:2})]})})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Module Progress"}),e.jsx("div",{className:"space-y-2",children:Object.entries(s.modules).map(([I,j])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 capitalize",children:I}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full",children:e.jsx("div",{className:"h-2 bg-blue-500 rounded-full",style:{width:`${j}%`}})}),e.jsxs("span",{className:"text-sm text-gray-600",children:[j,"%"]})]})]},I))})]})]})]}),(s.description||s.notes)&&e.jsxs("div",{className:"space-y-4",children:[s.description&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Description"}),e.jsx("p",{className:"text-gray-600",children:s.description})]}),s.notes&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Internal Notes"}),e.jsx("p",{className:"text-gray-600 bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:s.notes})]})]})]}),w==="users"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"User Management"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"px-3 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Import Users"}),e.jsx("button",{className:"px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Add User"})]})]}),i&&e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"User Engagement"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Daily Active"}),e.jsx("span",{className:"font-medium",children:i.engagement.dailyActiveUsers})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Weekly Active"}),e.jsx("span",{className:"font-medium",children:i.engagement.weeklyActiveUsers})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Monthly Active"}),e.jsx("span",{className:"font-medium",children:i.engagement.monthlyActiveUsers})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Learning Performance"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Courses Completed"}),e.jsx("span",{className:"font-medium",children:i.performance.coursesCompleted})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Certificates Issued"}),e.jsx("span",{className:"font-medium",children:i.performance.certificatesIssued})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Avg Session Time"}),e.jsxs("span",{className:"font-medium",children:[i.overview.avgSessionTime,"min"]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Average Scores"}),e.jsx("div",{className:"space-y-2",children:Object.entries(i.performance.avgScores||{}).map(([I,j])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 capitalize",children:I}),e.jsxs("span",{className:"font-medium",children:[j,"%"]})]},I))})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Active Cohorts"}),e.jsx("div",{className:"space-y-2",children:s.cohorts.map((I,j)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[e.jsx("span",{className:"font-medium text-gray-900",children:I}),e.jsx("span",{className:"text-sm text-gray-600",children:"Active"})]},j))})]})]}),w==="analytics"&&i&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Analytics Dashboard"}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Daily Completions (30 days)"}),e.jsx("div",{className:"h-64",children:e.jsx(Js,{width:"100%",height:"100%",children:e.jsxs(Sa,{data:i.trends.completionTrends,children:[e.jsx(jt,{dataKey:"date",fontSize:12}),e.jsx(vt,{fontSize:12}),e.jsx(Nt,{strokeDasharray:"3 3"}),e.jsx(et,{}),e.jsx(ka,{dataKey:"completions",fill:"#10B981"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Module Progress Distribution"}),e.jsx("div",{className:"h-48",children:e.jsx(Js,{width:"100%",height:"100%",children:e.jsxs(Aa,{children:[e.jsx(Ta,{data:Object.entries(s.modules).map(([I,j])=>({name:I,value:j})),cx:"50%",cy:"50%",outerRadius:60,dataKey:"value",label:!0,children:Object.entries(s.modules).map((I,j)=>e.jsx(Ea,{fill:y[j%y.length]},`cell-${j}`))}),e.jsx(et,{})]})})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Key Metrics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"User Retention Rate"}),e.jsxs("span",{className:"font-semibold text-green-600",children:[Math.round(i.engagement.weeklyActiveUsers/i.overview.totalUsers*100),"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Course Completion Rate"}),e.jsxs("span",{className:"font-semibold text-blue-600",children:[s.completionRate,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Average Score"}),e.jsxs("span",{className:"font-semibold text-purple-600",children:[i.performance.avgScores&&Object.keys(i.performance.avgScores).length>0?Math.round(Object.values(i.performance.avgScores).reduce((I,j)=>I+j,0)/Object.values(i.performance.avgScores).length):0,"%"]})]})]})]})]})]}),w==="settings"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Organization Settings"}),s.features&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Enabled Features"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(s.features).map(([I,j])=>e.jsx("div",{className:`p-3 border rounded-lg ${j?"border-green-200 bg-green-50":"border-gray-200 bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium capitalize",children:I.replace(/([A-Z])/g," $1").trim()}),e.jsx("div",{className:`w-2 h-2 rounded-full ${j?"bg-green-500":"bg-gray-400"}`})]})},I))})]}),s.settings&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Configuration"}),e.jsx("div",{className:"space-y-3",children:Object.entries(s.settings).map(([I,j])=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[e.jsx("span",{className:"font-medium capitalize",children:I.replace(/([A-Z])/g," $1").trim()}),e.jsx("span",{className:"text-gray-600",children:typeof j=="boolean"?j?"Enabled":"Disabled":j})]},I))})]})]}),w==="billing"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Billing & Subscription"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Current Plan"}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-semibold text-blue-900",children:s.subscription}),e.jsx("span",{className:"text-sm text-blue-700",children:s.billingCycle})]}),s.customPricing&&s.customPricing>0?e.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:["$",s.customPricing,"/month"]}):e.jsx("div",{className:"text-sm text-blue-700",children:"Custom pricing"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Billing Contact"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Email:"}),e.jsx("span",{className:"ml-2 font-medium",children:s.billingEmail||s.contactEmail})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Next billing:"}),e.jsx("span",{className:"ml-2 font-medium",children:s.contractEnd?new Date(s.contractEnd).toLocaleDateString():"Not set"})]})]})]})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-yellow-900 mb-2",children:"Usage & Limits"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-yellow-700",children:"Learners"}),e.jsxs("div",{className:"font-semibold text-yellow-900",children:[s.totalLearners," / ",s.maxLearners||""]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-yellow-700",children:"Courses"}),e.jsxs("div",{className:"font-semibold text-yellow-900",children:[s.cohorts.length," / ",s.maxCourses||""]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-yellow-700",children:"Storage"}),e.jsxs("div",{className:"font-semibold text-yellow-900",children:["2.3 GB / ",s.maxStorage||""," GB"]})]})]})]})]})]})]}),e.jsx(Ut,{isOpen:m,onClose:()=>h(!1),organization:s,onOrganizationUpdated:f})]})},mn=Object.freeze(Object.defineProperty({__proto__:null,default:ur},Symbol.toStringTag,{value:"Module"})),gr=({isOpen:a,onClose:t,onSave:s,course:n,mode:i})=>{var bt;const[l,x]=b.useState({id:"",title:"",description:"",status:"draft",thumbnail:"",duration:"0 min",difficulty:"Beginner",enrollments:0,completions:0,completionRate:0,avgRating:0,totalRatings:0,createdBy:"",createdDate:new Date().toISOString(),lastUpdated:new Date().toISOString(),estimatedTime:"30 min",prerequisites:[],learningObjectives:[],tags:[],modules:[],keyTakeaways:[],type:"",lessons:0,rating:0,progress:0}),[g,m]=b.useState(""),[h,w]=b.useState(""),[c,f]=b.useState(""),[v,E]=b.useState("basic"),[y,d]=b.useState([]),[I,j]=b.useState(!1),[L,N]=b.useState("video"),A=b.useRef(null),[_,O]=b.useState(null),[Y,Q]=b.useState("idle"),[U,R]=b.useState({}),[W,X]=b.useState(null),[ee,p]=b.useState(null),[M,q]=b.useState(""),[S,u]=b.useState("all"),[C,G]=b.useState([]),[le,je]=b.useState([]),[ge,Te]=b.useState(0),[Ee]=b.useState([]);b.useEffect(()=>{n&&i==="edit"?x(k({},n)):i==="create"&&x(r=>P(k({},r),{id:`course-${Date.now()}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}))},[n,i,a]);const B=(r,T)=>{x($=>P(k({},$),{[r]:T,updatedAt:new Date().toISOString()})),i==="edit"&&se()},ve=()=>{g.trim()&&!(l.tags||[]).includes(g.trim())&&(B("tags",[...l.tags||[],g.trim()]),m(""))},De=r=>{B("tags",(l.tags||[]).filter(T=>T!==r))},Re=()=>{h.trim()&&(B("learningObjectives",[...l.learningObjectives||[],h.trim()]),w(""))},Fe=r=>{B("learningObjectives",(l.learningObjectives||[]).filter((T,$)=>$!==r))},D=()=>{c.trim()&&(B("prerequisites",[...l.prerequisites||[],c.trim()]),f(""))},H=r=>{B("prerequisites",(l.prerequisites||[]).filter((T,$)=>$!==r))},se=()=>{_&&clearTimeout(_),Q("saving"),O(setTimeout(()=>{if(i==="edit"&&n){const r=P(k(k({},n),l),{lastUpdated:new Date().toISOString()});try{s(r),Q("saved"),console.log(" Auto-saved course:",r.title),setTimeout(()=>Q("idle"),2e3)}catch(T){Q("error"),console.error(" Auto-save failed:",T),setTimeout(()=>Q("idle"),3e3)}}else Q("idle")},3e3))},me=r=>{var $;let T;switch(L){case"video":{let Z=r.videoUrl;r.videoSource==="upload"&&r.videoFile?(console.log(" Processing uploaded video file:",{fileName:r.videoFile.name,fileSize:r.videoFile.size,fileType:r.videoFile.type}),Z=`uploaded:${r.videoFile.name}`,console.log(" Marked as uploaded video, will use fallback in LMS:",Z)):(!Z||Z.trim()==="")&&(Z=void 0),console.log(" Creating video content with:",{videoSource:r.videoSource,videoFile:($=r.videoFile)==null?void 0:$.name,videoUrl:r.videoUrl,finalVideoUrl:Z,hasFile:!!r.videoFile}),T={id:`lesson-${Date.now()}`,title:r.title||"New Video",type:"video",order:y.length+1,required:!0,estimatedDuration:r.duration||10,content:{id:`video-${Date.now()}`,type:r.videoSource||"upload",title:r.title||"New Video",description:r.description,url:Z,file:r.videoSource==="upload"?r.videoFile:void 0,thumbnail:r.thumbnail,duration:r.videoDuration,transcriptFile:r.transcriptFile,captionsFile:r.captionsFile,transcriptName:r.transcriptName,captionsName:r.captionsName,watchPercentage:r.watchPercentage||80,resumeFromLastPosition:r.resumeFromLastPosition!==!1,markAsWatched:r.markAsWatched!==!1,settings:{requireWatchPercentage:r.watchPercentage||80,resumeFromLastPosition:r.resumeFromLastPosition!==!1,markAsWatched:r.markAsWatched!==!1}}};break}case"quiz":{T={id:`lesson-${Date.now()}`,title:r.title||"New Quiz",type:"quiz",order:y.length+1,required:!0,estimatedDuration:r.duration||15,content:{id:`quiz-${Date.now()}`,title:r.title||"New Quiz",description:r.description,questions:[],settings:{passingScore:r.passingScore||80,maxAttempts:r.maxAttempts||3,randomizeQuestions:!1,showExplanations:!0}}};break}case"interactive":{T={id:`lesson-${Date.now()}`,title:r.title||"New Interactive",type:"interactive",order:y.length+1,required:!0,estimatedDuration:r.duration||20,content:{id:`interactive-${Date.now()}`,type:r.interactiveType||"drag-drop",title:r.title||"New Interactive",description:r.description,content:{},settings:{maxAttempts:3,passingScore:80,showFeedback:!0}}};break}case"resource":{T={id:`lesson-${Date.now()}`,title:r.title||"New Resource",type:"resource",order:y.length+1,required:!1,estimatedDuration:r.duration||5,content:{id:`resource-${Date.now()}`,title:r.title||"New Resource",description:r.description,type:r.resourceType||"pdf",url:r.url,downloadable:r.downloadable!==!1}};break}case"reflection":{T={id:`lesson-${Date.now()}`,title:r.title||"New Reflection",type:"reflection",order:y.length+1,required:r.required||!1,estimatedDuration:r.duration||10,content:{id:`reflection-${Date.now()}`,question:r.question||"Reflection question",type:"text",required:r.required||!1,wordLimit:r.wordLimit||500}};break}default:return}return d(Z=>[...Z,T]),T},ae=r=>{confirm("Are you sure you want to delete this content item?")&&(d(T=>T.filter($=>$.id!==r)),se(),console.log(` Removed content item: ${r}`))},Le=r=>{var $,Z;N(r.type);const T={title:r.title,duration:r.estimatedDuration,required:r.required};if(r.type==="video"&&"url"in r.content)T.videoUrl=r.content.url,T.description=r.content.description,T.videoSource=r.content.type;else if(r.type==="quiz"&&"questions"in r.content)T.description=r.content.description,T.passingScore=(($=r.content.settings)==null?void 0:$.passingScore)||80,T.maxAttempts=((Z=r.content.settings)==null?void 0:Z.maxAttempts)||3;else if(r.type==="resource"&&"url"in r.content){const ne=r.content;T.description=ne.description,T.url=ne.url,T.resourceType=ne.type,T.downloadable=ne.downloadable}else r.type==="reflection"&&"question"in r.content&&(T.question=r.content.question,T.wordLimit=r.content.wordLimit);R(T),j(!0),ae(r.id)},ze=r=>{var $;const T=`
Title: ${r.title}
Type: ${r.type.charAt(0).toUpperCase()+r.type.slice(1)}
Duration: ${r.estimatedDuration} minutes
Required: ${r.required?"Yes":"No"}
${r.type==="video"&&"url"in r.content?`
Video URL: ${r.content.url}`:""}
${r.type==="quiz"&&"questions"in r.content?`
Questions: ${(($=r.content.questions)==null?void 0:$.length)||0}`:""}
    `.trim();alert(`Content Preview:

${T}`)},hs=(r,T)=>{p(T),r.dataTransfer.effectAllowed="move"},o=r=>{r.preventDefault(),r.dataTransfer.dropEffect="move"},F=(r,T)=>{if(r.preventDefault(),!ee||ee.id===T.id)return;const $=[...y],Z=$.findIndex(ue=>ue.id===ee.id),ne=$.findIndex(ue=>ue.id===T.id);$.splice(Z,1),$.splice(ne,0,ee),$.forEach((ue,es)=>{ue.order=es+1}),d($),p(null),se(),X(` Moved "${ee.title}" to position ${ne+1}`),setTimeout(()=>X(null),3e3)},K=y.filter(r=>{const T=r.title.toLowerCase().includes(M.toLowerCase()),$=S==="all"||r.type===S;return T&&$}),re=r=>{r.length!==0&&confirm(`Are you sure you want to delete ${r.length} content items?`)&&(d(T=>T.filter($=>!r.includes($.id))),se(),X(` Deleted ${r.length} content items`),setTimeout(()=>X(null),3e3))},he=r=>{const T=P(k({},r),{id:`lesson-${Date.now()}`,title:`${r.title} (Copy)`,order:y.length+1});d($=>[...$,T]),se(),X(` Duplicated "${r.title}"`),setTimeout(()=>X(null),3e3)},Ys=(r,T)=>{if(!["video/mp4","video/mov","video/avi","video/webm"].includes(r.type)){alert("Please upload a valid video file (MP4, MOV, AVI, WebM)");return}const $=URL.createObjectURL(r);console.log("File uploaded:",r.name,$)},Ie=r=>{N(r),R({}),j(!0)},pe=(r,T)=>{R($=>P(k({},$),{[r]:T}))},Qt=()=>{var Z,ne,ue,es;if(!((Z=U.title)!=null&&Z.trim())){alert("Please enter a title");return}if(L==="video"&&U.videoSource==="url"&&!((ne=U.videoUrl)!=null&&ne.trim())){alert("Please enter a video URL");return}if(L==="resource"&&!((ue=U.url)!=null&&ue.trim())){alert("Please enter a resource URL");return}if(L==="reflection"&&!((es=U.question)!=null&&es.trim())){alert("Please enter a reflection question");return}me(U);const r=y.length+1,T=y.reduce((V,ke)=>V+ke.estimatedDuration,0)+(U.duration||10);B("lessons",r),B("duration",`${T} min`),B("estimatedTime",`${T} minutes`),R({}),j(!1);const $=L.charAt(0).toUpperCase()+L.slice(1);X(` ${$} "${U.title}" added successfully!`),console.log(` Added ${L}:`,U.title),setTimeout(()=>X(null),3e3),se()},Yt=()=>{const r=[];if(l.title.trim()?l.title.trim().length<5&&r.push("Course title should be at least 5 characters"):r.push("Course title is required"),l.description.trim()?l.description.trim().length<50&&r.push("Course description should be at least 50 characters for better clarity"):r.push("Course description is required"),y.length===0)r.push("Add at least one piece of content before saving");else{const Z=te.video>0,ne=te.quiz>0||te.interactive>0;!Z&&!ne&&r.push("Consider adding videos or assessments to improve learning experience")}if((!l.learningObjectives||l.learningObjectives.length===0)&&r.push("Add learning objectives to help learners understand what they will achieve"),r.length>0){const Z=`Please fix the following issues:

${r.map((ne,ue)=>`${ue+1}. ${ne}`).join(`
`)}`;alert(Z);return}ge>=80?X(" Excellent! Your course meets all quality standards."):ge>=60?X(" Good course structure. Consider the optimization suggestions for even better results."):X(" Course saved. Check the Analytics tab for improvement suggestions.");const T=Zt(),$=P(k({},l),{modules:T});console.log(" Saving course with enhanced data:",{formData:$,lessonContents:y,convertedModules:T}),setTimeout(()=>X(null),5e3),s($)},Zt=()=>{if(y.length===0)return l.modules||[];const r=y.filter(V=>V.type==="video"),T=y.filter(V=>V.type==="quiz"),$=y.filter(V=>V.type==="interactive"),Z=y.filter(V=>V.type==="resource"),ne=y.filter(V=>V.type==="reflection"),ue=[];(r.length>0||$.length>0)&&ue.push({id:`module-content-${Date.now()}`,title:"Course Content",description:"Main learning materials and interactive elements",duration:`${Math.max(r.reduce((V,ke)=>V+(ke.estimatedDuration||0),0)+$.reduce((V,ke)=>V+(ke.estimatedDuration||0),0),5)} min`,order:1,lessons:[...r,...$].sort((V,ke)=>V.order-ke.order).map(V=>Zs(V)),resources:[]}),T.length>0&&ue.push({id:`module-assessments-${Date.now()}`,title:"Knowledge Assessment",description:"Test your understanding with interactive quizzes",duration:`${T.reduce((V,ke)=>V+(ke.estimatedDuration||0),0)} min`,order:2,lessons:T.sort((V,ke)=>V.order-ke.order).map(V=>Zs(V)),resources:[]}),ne.length>0&&ue.push({id:`module-reflection-${Date.now()}`,title:"Reflection & Application",description:"Apply your learning and reflect on key concepts",duration:`${ne.reduce((V,ke)=>V+(ke.estimatedDuration||0),0)} min`,order:3,lessons:ne.sort((V,ke)=>V.order-ke.order).map(V=>Zs(V)),resources:[]});const es=Z.map(V=>({id:V.id,title:V.title,type:typeof V.content=="object"&&V.content&&"fileUrl"in V.content?"file":"link",size:"0 MB",downloadUrl:typeof V.content=="object"&&V.content&&"fileUrl"in V.content?V.content.fileUrl:typeof V.content=="object"&&V.content&&"url"in V.content?V.content.url:"#"}));return ue.length>0?ue[0].resources=es:es.length>0&&ue.push({id:`module-resources-${Date.now()}`,title:"Course Resources",description:"Additional materials and downloads",duration:"5 min",order:1,lessons:[],resources:es}),ue},Zs=r=>{var $;console.log(" Converting lesson content:",{title:r.title,type:r.type,rawContent:r.content,hasContentObject:typeof r.content=="object"&&r.content});const T={id:r.id,title:r.title,type:r.type,duration:`${r.estimatedDuration||5} min`,completed:!1,order:r.order,content:{}};switch(r.type){case"video":if(typeof r.content=="object"&&r.content){const Z=r.content,ne=Z.url||Z.videoUrl,ue=ne&&ne.trim()!=="";console.log(" Processing video content:",{videoContent:Z,videoUrl:ne,hasValidUrl:ue,isBlobUrl:ne==null?void 0:ne.startsWith("blob:"),videoSourceType:Z.type}),T.content={videoUrl:ue?ne:void 0,videoSourceType:Z.type==="url"?"external":"internal",transcript:Z.transcript||Z.transcriptFile||void 0,notes:r.description||Z.description||"Video lesson content"}}else T.content={videoUrl:void 0,videoSourceType:"external",transcript:void 0,notes:r.description||"Video lesson content"};break;case"quiz":typeof r.content=="object"&&r.content&&(T.content={questions:r.content.questions||[],passingScore:(($=r.content.settings)==null?void 0:$.passingScore)||80,allowRetakes:!0,showCorrectAnswers:!0});break;case"interactive":T.content={exerciseType:"scenario",instructions:r.description,options:[{text:"Continue Learning",feedback:"Great choice!",isCorrect:!0}]};break;case"reflection":T.content={content:r.description,reflectionPrompt:r.title,allowReflection:!0,requireReflection:r.required||!1},T.type="text";break}return T},Jt=()=>{const r=P(k({},l),{status:"published",publishedDate:new Date().toISOString(),lastUpdated:new Date().toISOString()});s(r)},te={video:y.filter(r=>r.type==="video").length,quiz:y.filter(r=>r.type==="quiz").length,interactive:y.filter(r=>r.type==="interactive").length,resource:y.filter(r=>r.type==="resource").length,reflection:y.filter(r=>r.type==="reflection").length};b.useEffect(()=>{(()=>{let T=0;l.title&&l.title.length>5&&(T+=10),l.description&&l.description.length>50&&(T+=10),l.type&&(T+=5),l.difficulty&&(T+=5),te.video>0&&(T+=10),te.quiz>0&&(T+=10),te.interactive>0&&(T+=10),te.resource>0&&(T+=5),te.reflection>0&&(T+=5);const $=y.length;$>=3&&(T+=5),$>=5&&(T+=5),$>=8&&(T+=5),$>=10&&(T+=5),l.learningObjectives&&l.learningObjectives.length>0&&(T+=5),l.prerequisites&&l.prerequisites.length>0&&(T+=3),l.tags&&l.tags.length>0&&(T+=2),Te(Math.min(T,100))})()},[l,y,te]);const ea=[{id:"basic",label:"Basic Info",icon:ts},{id:"content",label:"Course Content",icon:Ae,count:y.length},{id:"videos",label:"Videos",icon:Ke,count:te.video},{id:"quizzes",label:"Quizzes",icon:Cs,count:te.quiz},{id:"interactive",label:"Interactive",icon:$e,count:te.interactive},{id:"resources",label:"Resources",icon:ye,count:te.resource},{id:"reflections",label:"Reflections",icon:ps,count:te.reflection},{id:"analytics",label:"Analytics",icon:Be,badge:ge>0?ge+"%":void 0},{id:"ai-assistant",label:"AI Assistant",icon:qe,badge:le.length>0?le.length:void 0},{id:"settings",label:"Settings",icon:Pe},{id:"enrollment",label:"Enrollment",icon:Se},{id:"certification",label:"Certification",icon:Pt}];return a?e.jsxs("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center p-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:i==="create"?"Create New Course":"Edit Course"}),i==="edit"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[Y==="saving"&&e.jsxs("div",{className:"flex items-center text-blue-600 text-sm",children:[e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600 mr-2"}),"Saving..."]}),Y==="saved"&&e.jsxs("div",{className:"flex items-center text-green-600 text-sm",children:[e.jsx("div",{className:"h-3 w-3 bg-green-600 rounded-full mr-2"}),"Saved"]}),Y==="error"&&e.jsxs("div",{className:"flex items-center text-red-600 text-sm",children:[e.jsx("div",{className:"h-3 w-3 bg-red-600 rounded-full mr-2"}),"Save failed"]})]})]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:e.jsx(Oe,{className:"h-6 w-6"})})]}),v!=="basic"&&e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search content...",value:M,onChange:r=>q(r.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Ze,{className:"h-5 w-5 text-gray-400"})})]})}),e.jsxs("select",{value:S,onChange:r=>u(r.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"video",children:"Videos"}),e.jsx("option",{value:"quiz",children:"Quizzes"}),e.jsx("option",{value:"resource",children:"Resources"}),e.jsx("option",{value:"reflection",children:"Reflections"}),e.jsx("option",{value:"interactive",children:"Interactive"})]}),C.length>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[C.length," selected"]}),e.jsxs("button",{onClick:()=>re(C),className:"flex items-center px-3 py-1 text-sm bg-red-500 text-white rounded-lg hover:bg-red-600",children:[e.jsx(_e,{className:"h-4 w-4 mr-1"}),"Delete"]}),e.jsx("button",{onClick:()=>G([]),className:"text-sm text-gray-600 hover:text-gray-800",children:"Clear"})]})]})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8 px-6",children:ea.map(r=>{const T=r.icon;return e.jsxs("button",{onClick:()=>E(r.id),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${v===r.id?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(T,{className:"h-4 w-4"}),e.jsx("span",{children:r.label}),r.count!==void 0&&r.count>0&&e.jsx("span",{className:"ml-2 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-orange-500 rounded-full",children:r.count}),r.badge!==void 0&&e.jsx("span",{className:"ml-2 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-blue-500 rounded-full",children:r.badge})]},r.id)})})}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:[v==="basic"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Course Title *"}),e.jsx("input",{type:"text",value:l.title,onChange:r=>B("title",r.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter course title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),e.jsxs("select",{value:l.type,onChange:r=>B("type",r.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Category"}),e.jsx("option",{value:"DEI",children:"Diversity, Equity & Inclusion"}),e.jsx("option",{value:"Leadership",children:"Leadership"}),e.jsx("option",{value:"Communication",children:"Communication"}),e.jsx("option",{value:"Professional Development",children:"Professional Development"}),e.jsx("option",{value:"Compliance",children:"Compliance"}),e.jsx("option",{value:"Technical",children:"Technical Skills"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Course Type"}),e.jsxs("select",{value:l.type,onChange:r=>B("type",r.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"video",children:"Video Course"}),e.jsx("option",{value:"interactive",children:"Interactive"}),e.jsx("option",{value:"worksheet",children:"Worksheet"}),e.jsx("option",{value:"case-study",children:"Case Study"}),e.jsx("option",{value:"assessment",children:"Assessment"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Difficulty Level"}),e.jsxs("select",{value:l.difficulty,onChange:r=>B("difficulty",r.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"Beginner",children:"Beginner"}),e.jsx("option",{value:"Intermediate",children:"Intermediate"}),e.jsx("option",{value:"Advanced",children:"Advanced"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration (minutes)"}),e.jsx("input",{type:"number",value:l.duration,onChange:r=>B("duration",r.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent",min:"0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),e.jsx("textarea",{value:l.description,onChange:r=>B("description",r.target.value),rows:4,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Describe the course content and what learners will gain"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:(l.tags||[]).map((r,T)=>e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-orange-100 text-orange-800",children:[r,e.jsx("button",{onClick:()=>De(r),className:"ml-2 text-orange-600 hover:text-orange-800",children:""})]},T))}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:g,onChange:r=>m(r.target.value),onKeyPress:r=>r.key==="Enter"&&ve(),className:"flex-1 border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Add a tag"}),e.jsx("button",{onClick:ve,className:"bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600",children:e.jsx(ca,{className:"h-4 w-4"})})]})]})]}),v==="content"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-lg border border-blue-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Course Content Structure"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Build your course with engaging videos, interactive quizzes, resources, and reflection activities."}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("button",{onClick:()=>Ie("video"),className:"flex items-center px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors duration-200",children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Add Video"]}),e.jsxs("button",{onClick:()=>Ie("quiz"),className:"flex items-center px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors duration-200",children:[e.jsx(Cs,{className:"h-4 w-4 mr-2"}),"Add Quiz"]}),e.jsxs("button",{onClick:()=>Ie("interactive"),className:"flex items-center px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors duration-200",children:[e.jsx($e,{className:"h-4 w-4 mr-2"}),"Add Interactive"]}),e.jsxs("button",{onClick:()=>Ie("resource"),className:"flex items-center px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors duration-200",children:[e.jsx(ye,{className:"h-4 w-4 mr-2"}),"Add Resource"]}),e.jsxs("button",{onClick:()=>Ie("reflection"),className:"flex items-center px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors duration-200",children:[e.jsx(ps,{className:"h-4 w-4 mr-2"}),"Add Reflection"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Learning Objectives"}),e.jsx("div",{className:"space-y-2 mb-3",children:(l.learningObjectives||[]).map((r,T)=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded-lg",children:[e.jsx("span",{className:"text-sm",children:r}),e.jsx("button",{onClick:()=>Fe(T),className:"text-red-600 hover:text-red-800",children:e.jsx(Oe,{className:"h-4 w-4"})})]},T))}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:h,onChange:r=>w(r.target.value),onKeyPress:r=>r.key==="Enter"&&Re(),className:"flex-1 border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Add learning objective"}),e.jsx("button",{onClick:Re,className:"bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600",children:"Add"})]})]}),W&&e.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg text-green-800 text-sm",children:W}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Content"}),e.jsx("input",{type:"text",value:M,onChange:r=>q(r.target.value),placeholder:"Search by title...",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{className:"sm:w-48",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Type"}),e.jsxs("select",{value:S,onChange:r=>u(r.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"video",children:"Videos"}),e.jsx("option",{value:"quiz",children:"Quizzes"}),e.jsx("option",{value:"interactive",children:"Interactive"}),e.jsx("option",{value:"resource",children:"Resources"}),e.jsx("option",{value:"reflection",children:"Reflections"})]})]})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Lesson Content (",K.length," of ",y.length," items)"]}),K.length>1&&e.jsx("p",{className:"text-sm text-gray-500",children:" Tip: Drag items to reorder them"})]}),K.length===0?e.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[e.jsx(Ae,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),y.length===0?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-500 mb-4",children:"No content added yet"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Use the buttons above to add videos, quizzes, and other content"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-500 mb-4",children:"No content matches your filters"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Try adjusting your search or filter settings"})]})]}):e.jsx("div",{className:"space-y-3",children:K.sort((r,T)=>r.order-T.order).map(r=>e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow duration-200 cursor-move",draggable:!0,onDragStart:T=>hs(T,r),onDragOver:o,onDrop:T=>F(T,r),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",title:"Drag to reorder",children:[e.jsx(da,{className:"h-4 w-4 cursor-move"}),e.jsxs("span",{className:"text-sm font-medium",children:["#",r.order]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[r.type==="video"&&e.jsx(Ke,{className:"h-5 w-5 text-red-500"}),r.type==="quiz"&&e.jsx(Cs,{className:"h-5 w-5 text-green-500"}),r.type==="interactive"&&e.jsx($e,{className:"h-5 w-5 text-purple-500"}),r.type==="resource"&&e.jsx(ye,{className:"h-5 w-5 text-blue-500"}),r.type==="reflection"&&e.jsx(ps,{className:"h-5 w-5 text-orange-500"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:r.title}),e.jsxs("p",{className:"text-sm text-gray-500 capitalize",children:[r.type,"  ",r.estimatedDuration," min",r.required&&e.jsx("span",{className:"text-red-500",children:"  Required"})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Le(r),className:"p-2 text-gray-600 hover:text-blue-600 rounded-lg hover:bg-gray-50",title:"Edit",children:e.jsx(Ne,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>he(r),className:"p-2 text-gray-600 hover:text-purple-600 rounded-lg hover:bg-gray-50",title:"Duplicate",children:e.jsx(Ye,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>ze(r),className:"p-2 text-gray-600 hover:text-green-600 rounded-lg hover:bg-gray-50",title:"Preview",children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>ae(r.id),className:"p-2 text-gray-600 hover:text-red-600 rounded-lg hover:bg-gray-50",title:"Delete",children:e.jsx(_e,{className:"h-4 w-4"})})]})]})},r.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prerequisites"}),e.jsx("div",{className:"space-y-2 mb-3",children:(l.prerequisites||[]).map((r,T)=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded-lg",children:[e.jsx("span",{className:"text-sm",children:r}),e.jsx("button",{onClick:()=>H(T),className:"text-red-600 hover:text-red-800",children:e.jsx(Oe,{className:"h-4 w-4"})})]},T))}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:c,onChange:r=>f(r.target.value),onKeyPress:r=>r.key==="Enter"&&D(),className:"flex-1 border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Add prerequisite"}),e.jsx("button",{onClick:D,className:"bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600",children:"Add"})]})]})]}),v==="videos"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Video Content (",te.video," videos)"]}),e.jsxs("button",{onClick:()=>Ie("video"),className:"flex items-center px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600",children:[e.jsx(Ss,{className:"h-4 w-4 mr-2"}),"Add Video"]})]}),te.video>0&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsx("h4",{className:"font-medium text-gray-900",children:"Current Videos"})}),e.jsx("div",{className:"divide-y divide-gray-200",children:y.filter(r=>r.type==="video").sort((r,T)=>r.order-T.order).map(r=>e.jsx("div",{className:"p-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-red-100 rounded-lg",children:e.jsx(Ke,{className:"h-5 w-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900",children:r.title}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("span",{children:["#",r.order]}),e.jsxs("span",{children:[r.estimatedDuration," min"]}),r.required&&e.jsx("span",{className:"text-red-500",children:"Required"}),"url"in r.content&&r.content.url&&e.jsx("span",{className:"text-green-600",children:"Has video"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Le(r),className:"p-2 text-gray-600 hover:text-blue-600 rounded-lg hover:bg-gray-100",title:"Edit Video",children:e.jsx(Ne,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>ze(r),className:"p-2 text-gray-600 hover:text-green-600 rounded-lg hover:bg-gray-100",title:"Preview Video",children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>ae(r.id),className:"p-2 text-gray-600 hover:text-red-600 rounded-lg hover:bg-gray-100",title:"Delete Video",children:e.jsx(_e,{className:"h-4 w-4"})})]})]})},r.id))})]}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-200",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Add New Video"}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"videoType",value:"upload",className:"mr-2",defaultChecked:!0}),e.jsx(Me,{className:"h-4 w-4 mr-2 text-gray-600"}),"Upload Video File"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"videoType",value:"url",className:"mr-2"}),e.jsx(mt,{className:"h-4 w-4 mr-2 text-gray-600"}),"Video URL"]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("input",{ref:A,type:"file",accept:"video/mp4,video/mov,video/avi,video/webm",className:"hidden",onChange:r=>{var T;return((T=r.target.files)==null?void 0:T[0])&&Ys(r.target.files[0])}}),e.jsxs("div",{onClick:()=>{var r;return(r=A.current)==null?void 0:r.click()},className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-red-400 transition-colors",children:[e.jsx(Me,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Click to upload video or drag and drop"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"MP4, MOV, AVI, WebM up to 500MB"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Video URL (YouTube, Vimeo, or direct link)"}),e.jsx("input",{type:"url",placeholder:"https://youtube.com/watch?v=... or https://vimeo.com/...",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Required Watch %"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"50",children:"50%"}),e.jsx("option",{value:"75",children:"75%"}),e.jsx("option",{value:"85",selected:!0,children:"85%"}),e.jsx("option",{value:"100",children:"100%"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"resume",className:"mr-2",defaultChecked:!0}),e.jsx("label",{htmlFor:"resume",className:"text-sm text-gray-700",children:"Resume from last position"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"markWatched",className:"mr-2",defaultChecked:!0}),e.jsx("label",{htmlFor:"markWatched",className:"text-sm text-gray-700",children:"Mark as watched when complete"})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transcript (Optional)"}),e.jsx("input",{type:"file",accept:".txt,.srt",className:"w-full text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Captions (VTT)"}),e.jsx("input",{type:"file",accept:".vtt",className:"w-full text-sm"})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Preview"}),e.jsx("div",{className:"bg-gray-100 rounded-lg aspect-video flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(cs,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500",children:"Video preview will appear here"})]})})]})]}),v==="quizzes"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Quiz & Assessments (",te.quiz," quizzes)"]}),e.jsxs("button",{onClick:()=>Ie("quiz"),className:"flex items-center px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:[e.jsx(Ss,{className:"h-4 w-4 mr-2"}),"Create Quiz"]})]}),te.quiz>0&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsx("h4",{className:"font-medium text-gray-900",children:"Current Quizzes"})}),e.jsx("div",{className:"divide-y divide-gray-200",children:y.filter(r=>r.type==="quiz").sort((r,T)=>r.order-T.order).map(r=>e.jsx("div",{className:"p-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-green-100 rounded-lg",children:e.jsx(de,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900",children:r.title}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("span",{children:["#",r.order]}),e.jsxs("span",{children:[r.estimatedDuration," min"]}),r.required&&e.jsx("span",{className:"text-red-500",children:"Required"}),"questions"in r.content&&e.jsx("span",{className:"text-green-600",children:Array.isArray(r.content.questions)?`${r.content.questions.length} questions`:"Has questions"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Le(r),className:"p-2 text-gray-600 hover:text-blue-600 rounded-lg hover:bg-gray-100",title:"Edit Quiz",children:e.jsx(Ne,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>ze(r),className:"p-2 text-gray-600 hover:text-green-600 rounded-lg hover:bg-gray-100",title:"Preview Quiz",children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>he(r),className:"p-2 text-gray-600 hover:text-purple-600 rounded-lg hover:bg-gray-100",title:"Duplicate Quiz",children:e.jsx(Ye,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>ae(r.id),className:"p-2 text-gray-600 hover:text-red-600 rounded-lg hover:bg-gray-100",title:"Delete Quiz",children:e.jsx(_e,{className:"h-4 w-4"})})]})]})},r.id))})]}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-200",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Quiz Builder"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quiz Title"}),e.jsx("input",{type:"text",placeholder:"Enter quiz title",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Question Type"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"multiple-choice",children:"Multiple Choice"}),e.jsx("option",{value:"multi-select",children:"Multi-Select"}),e.jsx("option",{value:"true-false",children:"True/False"}),e.jsx("option",{value:"short-answer",children:"Short Answer"}),e.jsx("option",{value:"likert",children:"Likert Scale"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Question"}),e.jsx("textarea",{rows:3,placeholder:"Enter your question",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Answer Options"}),e.jsxs("div",{className:"space-y-2",children:[[1,2,3,4].map(r=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"correct",className:"text-green-500"}),e.jsx("input",{type:"text",placeholder:`Option ${r}`,className:"flex-1 border border-gray-300 rounded-lg px-3 py-2 text-sm"}),e.jsx("button",{className:"text-red-500 hover:text-red-700",children:e.jsx(_e,{className:"h-4 w-4"})})]},r)),e.jsx("button",{className:"text-green-500 text-sm hover:text-green-700",children:"+ Add Option"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Explanation (Optional)"}),e.jsx("textarea",{rows:2,placeholder:"Explain why this is the correct answer",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-4 border-t border-gray-200",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Limit (minutes)"}),e.jsx("input",{type:"number",placeholder:"30",className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Passing Score (%)"}),e.jsx("input",{type:"number",placeholder:"80",className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Attempts"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"1",children:"1"}),e.jsx("option",{value:"2",children:"2"}),e.jsx("option",{value:"3",selected:!0,children:"3"}),e.jsx("option",{value:"unlimited",children:"Unlimited"})]})]})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",className:"mr-2",defaultChecked:!0}),e.jsx("span",{className:"text-sm text-gray-700",children:"Randomize question order"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",className:"mr-2",defaultChecked:!0}),e.jsx("span",{className:"text-sm text-gray-700",children:"Show explanations after submission"})]})]})]})]})]}),v==="interactive"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Interactive Elements"}),e.jsxs("button",{onClick:()=>Ie("interactive"),className:"flex items-center px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600",children:[e.jsx(Ss,{className:"h-4 w-4 mr-2"}),"Add Interactive"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow cursor-pointer",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx($e,{className:"h-6 w-6 text-purple-500 mr-3"}),e.jsx("h4",{className:"font-medium text-gray-900",children:"Drag & Drop Exercise"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Create interactive drag-and-drop activities for hands-on learning."}),e.jsx("button",{className:"text-purple-500 text-sm font-medium hover:text-purple-700",children:"Create Exercise"})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow cursor-pointer",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(ps,{className:"h-6 w-6 text-blue-500 mr-3"}),e.jsx("h4",{className:"font-medium text-gray-900",children:"Branching Scenario"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Build decision-based scenarios with multiple pathways and outcomes."}),e.jsx("button",{className:"text-blue-500 text-sm font-medium hover:text-blue-700",children:"Create Scenario"})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow cursor-pointer",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(ce,{className:"h-6 w-6 text-green-500 mr-3"}),e.jsx("h4",{className:"font-medium text-gray-900",children:"Virtual Simulation"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Create immersive simulations for practical skill development."}),e.jsx("button",{className:"text-green-500 text-sm font-medium hover:text-green-700",children:"Create Simulation"})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow cursor-pointer",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(Cs,{className:"h-6 w-6 text-orange-500 mr-3"}),e.jsx("h4",{className:"font-medium text-gray-900",children:"Interactive Checklist"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Guide learners through step-by-step processes with interactive checklists."}),e.jsx("button",{className:"text-orange-500 text-sm font-medium hover:text-orange-700",children:"Create Checklist"})]})]})]}),v==="resources"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Learning Resources (",te.resource," resources)"]}),e.jsxs("button",{onClick:()=>Ie("resource"),className:"flex items-center px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:[e.jsx(Ss,{className:"h-4 w-4 mr-2"}),"Add Resource"]})]}),te.resource>0&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsx("h4",{className:"font-medium text-gray-900",children:"Current Resources"})}),e.jsx("div",{className:"divide-y divide-gray-200",children:y.filter(r=>r.type==="resource").sort((r,T)=>r.order-T.order).map(r=>e.jsx("div",{className:"p-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-blue-100 rounded-lg",children:e.jsx(ye,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900",children:r.title}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("span",{children:["#",r.order]}),r.required&&e.jsx("span",{className:"text-red-500",children:"Required"}),typeof r.content=="object"&&r.content&&"fileUrl"in r.content&&r.content.fileUrl&&e.jsx("span",{className:"text-blue-600",children:"File attached"}),typeof r.content=="object"&&r.content&&"url"in r.content&&r.content.url&&e.jsx("span",{className:"text-green-600",children:"External link"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Le(r),className:"p-2 text-gray-600 hover:text-blue-600 rounded-lg hover:bg-gray-100",title:"Edit Resource",children:e.jsx(Ne,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>ze(r),className:"p-2 text-gray-600 hover:text-green-600 rounded-lg hover:bg-gray-100",title:"Preview Resource",children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>he(r),className:"p-2 text-gray-600 hover:text-purple-600 rounded-lg hover:bg-gray-100",title:"Duplicate Resource",children:e.jsx(Ye,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>ae(r.id),className:"p-2 text-gray-600 hover:text-red-600 rounded-lg hover:bg-gray-100",title:"Delete Resource",children:e.jsx(_e,{className:"h-4 w-4"})})]})]})},r.id))})]}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-200",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Add New Resource"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Resource Title"}),e.jsx("input",{type:"text",placeholder:"Enter resource title",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Resource Type"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"pdf",children:"PDF Document"}),e.jsx("option",{value:"doc",children:"Word Document"}),e.jsx("option",{value:"ppt",children:"Presentation"}),e.jsx("option",{value:"zip",children:"Archive/Zip"}),e.jsx("option",{value:"link",children:"External Link"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{rows:2,placeholder:"Describe this resource",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx(ye,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Click to upload file or drag and drop"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PDF, DOC, PPT, ZIP up to 50MB"})]}),e.jsx("div",{className:"text-center text-gray-500",children:"or"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"External Link"}),e.jsx("input",{type:"url",placeholder:"https://example.com/resource",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"downloadable",className:"mr-2",defaultChecked:!0}),e.jsx("label",{htmlFor:"downloadable",className:"text-sm text-gray-700",children:"Allow download"})]})]})]})]}),v==="reflections"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Reflection Questions (",te.reflection," reflections)"]}),e.jsxs("button",{onClick:()=>Ie("reflection"),className:"flex items-center px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:[e.jsx(Ss,{className:"h-4 w-4 mr-2"}),"Add Reflection"]})]}),te.reflection>0&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsx("h4",{className:"font-medium text-gray-900",children:"Current Reflection Activities"})}),e.jsx("div",{className:"divide-y divide-gray-200",children:y.filter(r=>r.type==="reflection").sort((r,T)=>r.order-T.order).map(r=>e.jsx("div",{className:"p-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-orange-100 rounded-lg",children:e.jsx(ps,{className:"h-5 w-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900",children:r.title}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("span",{children:["#",r.order]}),e.jsxs("span",{children:[r.estimatedDuration," min"]}),r.required&&e.jsx("span",{className:"text-red-500",children:"Required"}),e.jsx("span",{className:"text-orange-600",children:"Reflection Activity"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Le(r),className:"p-2 text-gray-600 hover:text-blue-600 rounded-lg hover:bg-gray-100",title:"Edit Reflection",children:e.jsx(Ne,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>ze(r),className:"p-2 text-gray-600 hover:text-green-600 rounded-lg hover:bg-gray-100",title:"Preview Reflection",children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>he(r),className:"p-2 text-gray-600 hover:text-purple-600 rounded-lg hover:bg-gray-100",title:"Duplicate Reflection",children:e.jsx(Ye,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>ae(r.id),className:"p-2 text-gray-600 hover:text-red-600 rounded-lg hover:bg-gray-100",title:"Delete Reflection",children:e.jsx(_e,{className:"h-4 w-4"})})]})]})},r.id))})]}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-200",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Reflection Activity Builder"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reflection Type"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"text",children:"Written Reflection"}),e.jsx("option",{value:"journal",children:"Journal Entry"}),e.jsx("option",{value:"discussion",children:"Discussion Question"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reflection Question"}),e.jsx("textarea",{rows:4,placeholder:"What question would you like learners to reflect on? Example: 'How will you apply the concepts learned in this module to your current role?'",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Word Limit (Optional)"}),e.jsx("input",{type:"number",placeholder:"500",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center pt-6",children:[e.jsx("input",{type:"checkbox",id:"required",className:"mr-2"}),e.jsx("label",{htmlFor:"required",className:"text-sm text-gray-700",children:"Required for completion"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Guidance Text (Optional)"}),e.jsx("textarea",{rows:2,placeholder:"Provide additional guidance or prompts to help learners with their reflection",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("h5",{className:"font-medium text-blue-900 mb-2",children:"Sample Reflection Questions"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:" How will you apply these concepts in your daily work?"}),e.jsx("li",{children:" What was the most surprising thing you learned?"}),e.jsx("li",{children:" What challenges might you face when implementing these ideas?"}),e.jsx("li",{children:" How does this relate to your personal experience?"}),e.jsx("li",{children:" What questions do you still have about this topic?"})]})]})]}),v==="settings"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Created By"}),e.jsx("input",{type:"text",value:l.createdBy,onChange:r=>B("createdBy",r.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimated Time"}),e.jsx("input",{type:"text",value:l.estimatedTime,onChange:r=>B("estimatedTime",r.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"e.g., 2 hours"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date"}),e.jsx("input",{type:"date",value:l.dueDate||"",onChange:r=>B("dueDate",r.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})]}),v==="enrollment"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Enrollment Count"}),e.jsx("input",{type:"number",value:l.enrollments,onChange:r=>B("enrollments",parseInt(r.target.value)||0),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent",min:"0"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Rating"}),e.jsx("input",{type:"number",value:l.rating,onChange:r=>B("rating",parseFloat(r.target.value)||0),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent",min:"0",max:"5",step:"0.1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Review Count"}),e.jsx("input",{type:"number",value:l.totalRatings,onChange:r=>B("totalRatings",parseInt(r.target.value)||0),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent",min:"0"})]})]})]}),v==="analytics"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Course Analytics & Optimization"}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ge,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Optimization Score:"}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:[ge,"%"]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 p-4 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-700",children:"Content Completeness"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:[Math.min(Math.round(y.length/5*100),100),"%"]})]}),e.jsx(qs,{className:"h-8 w-8 text-blue-600"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-4 rounded-lg border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-700",children:"Engagement Score"}),e.jsxs("p",{className:"text-2xl font-bold text-green-900",children:[Math.min(Math.round(85+te.quiz*3+te.interactive*5),100),"%"]})]}),e.jsx(xs,{className:"h-8 w-8 text-green-600"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 p-4 rounded-lg border border-purple-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-purple-700",children:"Learning Paths"}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:Ee.length})]}),e.jsx(Bs,{className:"h-8 w-8 text-purple-600"})]})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(Be,{className:"h-5 w-5 mr-2 text-blue-600"}),"Content Distribution Analysis"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:Object.entries(te).map(([r,T])=>e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:`w-12 h-12 mx-auto rounded-lg flex items-center justify-center mb-2 ${r==="video"?"bg-red-100 text-red-600":r==="quiz"?"bg-green-100 text-green-600":r==="interactive"?"bg-purple-100 text-purple-600":r==="resource"?"bg-blue-100 text-blue-600":"bg-orange-100 text-orange-600"}`,children:[r==="video"&&e.jsx(Ke,{className:"h-6 w-6"}),r==="quiz"&&e.jsx(Cs,{className:"h-6 w-6"}),r==="interactive"&&e.jsx($e,{className:"h-6 w-6"}),r==="resource"&&e.jsx(ye,{className:"h-6 w-6"}),r==="reflection"&&e.jsx(ps,{className:"h-6 w-6"})]}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:T}),e.jsxs("p",{className:"text-sm text-gray-600 capitalize",children:[r,"s"]})]},r))})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(Es,{className:"h-5 w-5 mr-2 text-yellow-600"}),"Optimization Recommendations"]}),e.jsxs("div",{className:"space-y-3",children:[y.length===0&&e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:[e.jsx(Ce,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-yellow-800",children:"Add Content"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"Start by adding videos, quizzes, or interactive content to your course."})]})]}),te.quiz===0&&y.length>0&&e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx(Bs,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-800",children:"Add Assessments"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Include quizzes to test learner knowledge and increase engagement."})]})]}),te.interactive===0&&y.length>2&&e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsx($e,{className:"h-5 w-5 text-purple-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-purple-800",children:"Boost Interactivity"}),e.jsx("p",{className:"text-sm text-purple-700",children:"Add interactive elements to make learning more engaging and memorable."})]})]}),y.length>5&&te.reflection===0&&e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-orange-50 rounded-lg border border-orange-200",children:[e.jsx(Je,{className:"h-5 w-5 text-orange-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-orange-800",children:"Add Reflection Activities"}),e.jsx("p",{className:"text-sm text-orange-700",children:"Help learners consolidate knowledge with reflection questions."})]})]}),y.length>0&&Object.values(te).every(r=>r>0)&&e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-green-50 rounded-lg border border-green-200",children:[e.jsx(zs,{className:"h-5 w-5 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-800",children:"Excellent Course Structure!"}),e.jsx("p",{className:"text-sm text-green-700",children:"Your course has a well-balanced mix of content types for optimal learning."})]})]})]})]})]}),v==="ai-assistant"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[e.jsx(qe,{className:"h-5 w-5 mr-2 text-blue-600"}),"AI-Powered Course Assistant"]}),e.jsxs("button",{onClick:()=>{je([{type:"content",title:"Add Video Introduction",priority:"high"},{type:"structure",title:"Optimize Learning Path",priority:"medium"},{type:"engagement",title:"Add Interactive Quiz",priority:"high"}])},className:"flex items-center px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:[e.jsx(Es,{className:"h-4 w-4 mr-2"}),"Generate Suggestions"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Content Suggestions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-blue-100 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Bs,{className:"h-5 w-5 text-blue-600 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900",children:"Add Course Introduction Video"}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Welcome learners with a 2-3 minute introduction explaining what they'll learn and why it matters."})]})]}),e.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Apply"})]})}),e.jsx("div",{className:"p-4 bg-gradient-to-r from-green-50 to-green-100 rounded-lg border border-green-200",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ge,{className:"h-5 w-5 text-green-600 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-900",children:"Knowledge Check Quiz"}),e.jsx("p",{className:"text-sm text-green-700 mt-1",children:"Add a quick quiz after every 2-3 content pieces to reinforce learning."})]})]}),e.jsx("button",{className:"text-green-600 hover:text-green-800 text-sm font-medium",children:"Apply"})]})}),e.jsx("div",{className:"p-4 bg-gradient-to-r from-purple-50 to-purple-100 rounded-lg border border-purple-200",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx($e,{className:"h-5 w-5 text-purple-600 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-purple-900",children:"Interactive Scenario"}),e.jsx("p",{className:"text-sm text-purple-700 mt-1",children:"Create a real-world scenario where learners can apply their knowledge."})]})]}),e.jsx("button",{className:"text-purple-600 hover:text-purple-800 text-sm font-medium",children:"Apply"})]})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Structure Optimization"}),e.jsxs("div",{className:"p-4 bg-white border border-gray-200 rounded-lg",children:[e.jsxs("h5",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[e.jsx(Je,{className:"h-4 w-4 mr-2 text-gray-600"}),"Recommended Learning Path"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-2 bg-gray-50 rounded",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold",children:"1"}),e.jsx("span",{className:"text-sm",children:"Course Introduction (Video)"})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-2 bg-gray-50 rounded",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold",children:"2"}),e.jsx("span",{className:"text-sm",children:"Core Learning Content"})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-2 bg-gray-50 rounded",children:[e.jsx("div",{className:"w-6 h-6 bg-green-500 text-white rounded-full flex items-center justify-center text-xs font-bold",children:"3"}),e.jsx("span",{className:"text-sm",children:"Knowledge Assessment"})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-2 bg-gray-50 rounded",children:[e.jsx("div",{className:"w-6 h-6 bg-purple-500 text-white rounded-full flex items-center justify-center text-xs font-bold",children:"4"}),e.jsx("span",{className:"text-sm",children:"Practical Application"})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-2 bg-gray-50 rounded",children:[e.jsx("div",{className:"w-6 h-6 bg-orange-500 text-white rounded-full flex items-center justify-center text-xs font-bold",children:"5"}),e.jsx("span",{className:"text-sm",children:"Reflection & Summary"})]})]}),e.jsx("button",{className:"mt-3 w-full px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg hover:from-blue-600 hover:to-purple-600 transition-all",children:"Auto-Organize Content"})]})]})]})]}),v==="certification"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{type:"checkbox",checked:!!((bt=l.certification)!=null&&bt.available),onChange:r=>{r.target.checked?B("certification",{available:!0,name:"Course Certificate",requirements:["Complete all modules"],validFor:"1 year",renewalRequired:!1}):B("certification",void 0)},className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Enable certification"})]}),l.certification&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Certificate Name"}),e.jsx("input",{type:"text",value:l.certification.name,onChange:r=>B("certification",P(k({},l.certification),{name:r.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[e.jsx("span",{children:"Status: "}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${l.status==="published"?"bg-green-100 text-green-800":l.status==="draft"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:l.status})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:Yt,className:"flex items-center space-x-2 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors",children:[e.jsx(Ls,{className:"h-4 w-4"}),e.jsx("span",{children:"Save as Draft"})]}),l.status!=="published"&&e.jsxs("button",{onClick:Jt,className:"flex items-center space-x-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:[e.jsx(us,{className:"h-4 w-4"}),e.jsx("span",{children:"Publish"})]})]})]})]}),I&&e.jsx("div",{className:"fixed inset-0 z-60 bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[80vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Add ",L.charAt(0).toUpperCase()+L.slice(1)," Content"]}),e.jsx("button",{onClick:()=>j(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Oe,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-96",children:[L==="video"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Video Title *"}),e.jsx("input",{type:"text",value:U.title||"",onChange:r=>pe("title",r.target.value),placeholder:"Enter video title",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{rows:3,value:U.description||"",onChange:r=>pe("description",r.target.value),placeholder:"Describe what learners will gain from this video",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Video Source"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"videoSource",value:"upload",id:"upload",checked:U.videoSource==="upload"||!U.videoSource,onChange:r=>pe("videoSource",r.target.value)}),e.jsx("label",{htmlFor:"upload",className:"font-medium",children:"Upload video file"})]}),(U.videoSource==="upload"||!U.videoSource)&&e.jsxs("div",{className:"ml-6 space-y-3",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6",children:[e.jsx("input",{ref:A,type:"file",accept:"video/mp4,video/mov,video/avi,video/webm",onChange:r=>{var $;const T=($=r.target.files)==null?void 0:$[0];T&&(pe("videoFile",T),pe("fileName",T.name),pe("fileSize",(T.size/1024/1024).toFixed(2)))},className:"hidden"}),e.jsxs("div",{className:"text-center",children:[e.jsx(Me,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{type:"button",onClick:()=>{var r;return(r=A.current)==null?void 0:r.click()},className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Choose Video File"})}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"MP4, MOV, AVI, WebM up to 500MB"})]})]}),U.fileName&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ke,{className:"h-5 w-5 text-green-600 mr-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-800",children:U.fileName}),e.jsxs("p",{className:"text-sm text-green-600",children:[U.fileSize," MB"]})]})]})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"videoSource",value:"youtube",id:"youtube",checked:U.videoSource==="youtube",onChange:r=>pe("videoSource",r.target.value)}),e.jsx("label",{htmlFor:"youtube",className:"font-medium",children:"YouTube URL"})]}),U.videoSource==="youtube"&&e.jsxs("div",{className:"ml-6 space-y-3",children:[e.jsx("input",{type:"url",value:U.videoUrl||"",onChange:r=>pe("videoUrl",r.target.value),placeholder:"https://www.youtube.com/watch?v=...",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-red-500 focus:border-transparent"}),U.videoUrl&&e.jsxs("div",{className:"bg-gray-50 border rounded-lg p-3",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Preview:"}),e.jsx("div",{className:"aspect-video bg-black rounded-lg flex items-center justify-center",children:e.jsx(cs,{className:"h-12 w-12 text-white opacity-75"})})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"videoSource",value:"vimeo",id:"vimeo",checked:U.videoSource==="vimeo",onChange:r=>pe("videoSource",r.target.value)}),e.jsx("label",{htmlFor:"vimeo",className:"font-medium",children:"Vimeo URL"})]}),U.videoSource==="vimeo"&&e.jsxs("div",{className:"ml-6 space-y-3",children:[e.jsx("input",{type:"url",value:U.videoUrl||"",onChange:r=>pe("videoUrl",r.target.value),placeholder:"https://vimeo.com/...",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-red-500 focus:border-transparent"}),U.videoUrl&&e.jsxs("div",{className:"bg-gray-50 border rounded-lg p-3",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Preview:"}),e.jsx("div",{className:"aspect-video bg-black rounded-lg flex items-center justify-center",children:e.jsx(cs,{className:"h-12 w-12 text-white opacity-75"})})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"videoSource",value:"direct",id:"directUrl",checked:U.videoSource==="direct",onChange:r=>pe("videoSource",r.target.value)}),e.jsx("label",{htmlFor:"directUrl",className:"font-medium",children:"Direct Video URL"})]}),U.videoSource==="direct"&&e.jsxs("div",{className:"ml-6 space-y-3",children:[e.jsx("input",{type:"url",value:U.videoUrl||"",onChange:r=>pe("videoUrl",r.target.value),placeholder:"https://example.com/video.mp4",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-red-500 focus:border-transparent"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Direct link to MP4, WebM, or other video file"}),U.videoUrl&&e.jsxs("div",{className:"bg-gray-50 border rounded-lg p-3",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Preview:"}),e.jsxs("video",{className:"w-full rounded",controls:!0,preload:"metadata",children:[e.jsx("source",{src:U.videoUrl}),"Your browser does not support the video tag."]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimated Duration (minutes)"}),e.jsx("input",{type:"number",value:U.duration||"",onChange:r=>pe("duration",parseInt(r.target.value)||0),placeholder:"10",className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Playback Settings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Required Watch Percentage"}),e.jsxs("select",{value:U.watchPercentage||80,onChange:r=>pe("watchPercentage",parseInt(r.target.value)),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:50,children:"50% - Partial viewing required"}),e.jsx("option",{value:75,children:"75% - Most content required"}),e.jsx("option",{value:80,children:"80% - Nearly complete (recommended)"}),e.jsx("option",{value:90,children:"90% - Almost everything"}),e.jsx("option",{value:100,children:"100% - Complete viewing required"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"resumePosition",checked:U.resumeFromLastPosition!==!1,onChange:r=>pe("resumeFromLastPosition",r.target.checked),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"resumePosition",className:"text-sm text-gray-700",children:"Allow resume from last position"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"markAsWatched",checked:U.markAsWatched!==!1,onChange:r=>pe("markAsWatched",r.target.checked),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"markAsWatched",className:"text-sm text-gray-700",children:"Auto-mark as completed when finished"})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Accessibility (Optional)"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transcript (.txt, .srt)"}),e.jsx("input",{type:"file",accept:".txt,.srt",onChange:r=>{var $;const T=($=r.target.files)==null?void 0:$[0];T&&(pe("transcriptFile",T),pe("transcriptName",T.name))},className:"w-full border border-gray-300 rounded-lg px-3 py-2"}),U.transcriptName&&e.jsxs("p",{className:"text-sm text-green-600 mt-1",children:[" ",U.transcriptName]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Captions (.vtt, .srt)"}),e.jsx("input",{type:"file",accept:".vtt,.srt",onChange:r=>{var $;const T=($=r.target.files)==null?void 0:$[0];T&&(pe("captionsFile",T),pe("captionsName",T.name))},className:"w-full border border-gray-300 rounded-lg px-3 py-2"}),U.captionsName&&e.jsxs("p",{className:"text-sm text-green-600 mt-1",children:[" ",U.captionsName]})]})]})]})]}),L==="quiz"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quiz Title *"}),e.jsx("input",{type:"text",placeholder:"Enter quiz title",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{rows:2,placeholder:"Describe the purpose of this quiz",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Passing Score (%)"}),e.jsx("input",{type:"number",value:"80",className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Attempts"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"3",children:"3"}),e.jsx("option",{value:"5",children:"5"}),e.jsx("option",{value:"unlimited",children:"Unlimited"})]})]})]})]}),L==="interactive"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Interactive Title *"}),e.jsx("input",{type:"text",placeholder:"Enter interactive element title",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Interactive Type"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"drag-drop",children:"Drag & Drop Exercise"}),e.jsx("option",{value:"scenario",children:"Branching Scenario"}),e.jsx("option",{value:"simulation",children:"Virtual Simulation"}),e.jsx("option",{value:"checklist",children:"Interactive Checklist"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Instructions"}),e.jsx("textarea",{rows:3,placeholder:"Provide clear instructions for learners",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),L==="resource"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Resource Title *"}),e.jsx("input",{type:"text",placeholder:"Enter resource title",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Resource Type"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"pdf",children:"PDF Document"}),e.jsx("option",{value:"doc",children:"Word Document"}),e.jsx("option",{value:"ppt",children:"PowerPoint Presentation"}),e.jsx("option",{value:"link",children:"External Link"}),e.jsx("option",{value:"zip",children:"Archive/Package"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{rows:2,placeholder:"Describe this resource and how it helps learners",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"downloadableResource",className:"mr-2",defaultChecked:!0}),e.jsx("label",{htmlFor:"downloadableResource",className:"text-sm text-gray-700",children:"Allow download"})]})]}),L==="reflection"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reflection Title *"}),e.jsx("input",{type:"text",placeholder:"Enter reflection activity title",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reflection Question"}),e.jsx("textarea",{rows:4,placeholder:"What would you like learners to reflect on? Be specific and thought-provoking.",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Word Limit"}),e.jsx("input",{type:"number",placeholder:"500",className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{className:"flex items-center pt-6",children:[e.jsx("input",{type:"checkbox",id:"requiredReflection",className:"mr-2"}),e.jsx("label",{htmlFor:"requiredReflection",className:"text-sm text-gray-700",children:"Required for completion"})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:Qt,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Add Content"})]})]})})]}):null},ot="huddle_notifications_v1",Qs=()=>!1,Rs=()=>{const a=localStorage.getItem(ot);if(!a)return[];try{return JSON.parse(a)}catch(t){return console.warn("Failed to parse cached notifications, resetting store",t),localStorage.removeItem(ot),[]}},ys=a=>{localStorage.setItem(ot,JSON.stringify(a))},_t=a=>{var t,s,n,i,l,x,g,m,h,w,c,f,v;return{id:a.id,title:(n=(s=(t=a.subject)!=null?t:a.title)!=null?s:a.type)!=null?n:"Notification",body:(x=(l=a.body)!=null?l:(i=a.metadata)==null?void 0:i.body)!=null?x:void 0,orgId:(g=a.organization_id)!=null?g:void 0,userId:(w=(h=a.recipient_user_id)!=null?h:(m=a.metadata)==null?void 0:m.userId)!=null?w:void 0,createdAt:(c=a.created_at)!=null?c:new Date().toISOString(),read:!!a.read_at,priority:(v=(f=a.metadata)==null?void 0:f.priority)!=null?v:"normal"}},hr=a=>z(void 0,null,function*(){if(Qs()){const s=fe.from("notifications").select("*").order("created_at",{ascending:!1}).limit(50);a!=null&&a.orgId&&s.eq("organization_id",a.orgId),a!=null&&a.userId&&s.or(`recipient_user_id.eq.${a.userId},metadata->>userId.eq.${a.userId},recipient_user_id.is.null`);const{data:n,error:i}=yield s;if(i)console.warn("Supabase notifications fetch failed, falling back to cache",i);else if(n){const l=n.map(_t);return ys(l),l}}let t=Rs();return a!=null&&a.orgId&&(t=t.filter(s=>s.orgId===a.orgId||!s.orgId)),a!=null&&a.userId&&(t=t.filter(s=>s.userId===a.userId||!s.userId)),t.slice().sort((s,n)=>+new Date(n.createdAt)-+new Date(s.createdAt))}),pr=a=>z(void 0,null,function*(){var i,l,x,g;const t=new Date().toISOString(),s=k({id:`note-${Date.now()}`,createdAt:t,read:!1,priority:(i=a.priority)!=null?i:"normal"},a);if(Qs()){const{data:m,error:h}=yield fe.from("notifications").insert({id:s.id,organization_id:(l=a.orgId)!=null?l:null,recipient_user_id:(x=a.userId)!=null?x:null,subject:a.title,body:(g=a.body)!=null?g:null,metadata:k({priority:s.priority},a.metadata)}).select().single();if(!h&&m){const w=_t(m),c=Rs();return c.unshift(w),ys(c.slice(0,50)),w}console.warn("Supabase notification insert failed, persisting locally",h)}const n=Rs();return n.unshift(s),ys(n.slice(0,50)),s}),br=a=>z(void 0,null,function*(){var n;if(Qs()){const{error:i}=yield fe.from("notifications").update({read_at:new Date().toISOString()}).eq("id",a);i&&console.warn("Failed to mark notification as read remotely",i)}const s=Rs().map(i=>i.id===a?P(k({},i),{read:!0}):i);return ys(s),(n=s.find(i=>i.id===a))!=null?n:null}),fr=a=>z(void 0,null,function*(){if(Qs()&&(a!=null&&a.orgId)){const{error:s}=yield fe.from("notifications").delete().match({organization_id:a.orgId});s&&console.warn("Failed to clear notifications remotely",s)}if(!(a!=null&&a.orgId)){ys([]);return}const t=Rs().filter(s=>s.orgId&&s.orgId!==a.orgId);ys(t)}),Ks={listNotifications:hr,addNotification:pr,clearNotifications:fr,markNotificationRead:br},$t="huddle_user_profiles_v1",qt="huddle_org_profiles_v1",kt=()=>[{id:"user-1",userId:"1",name:"Sarah Chen",email:"sarah.chen@pacificcoast.edu",role:"VP Student Affairs",organization:"Pacific Coast University",organizationId:"1",enrollmentDate:"2025-01-15",lastActivity:"2025-03-10",bio:"Passionate about student success and inclusive leadership development.",avatar:"https://images.pexels.com/photos/3184416/pexels-photo-3184416.jpeg?auto=compress&cs=tinysrgb&w=100",contactInfo:{phone:"+1 (555) 123-4567",department:"Student Affairs",title:"Vice President"},learningProgress:{completedModules:3,totalModules:5,completionRate:85,modules:{foundations:100,bias:100,empathy:100,conversations:75,planning:50}},preferences:{notifications:!0,emailUpdates:!0,language:"en"},resources:[{id:"res-1",type:"document",title:"Leadership Best Practices",description:"Comprehensive guide for effective leadership",documentId:"doc-123",createdAt:"2025-03-01T10:00:00Z",createdBy:"Admin",tags:["leadership","best-practices"],category:"Training",priority:"high",status:"read"}],createdAt:"2025-01-15T08:00:00Z",updatedAt:"2025-03-10T14:30:00Z"},{id:"user-2",userId:"5",name:"Lisa Park",email:"lpark@techforward.com",role:"Chief HR Officer",organization:"TechForward Solutions",organizationId:"5",enrollmentDate:"2025-02-01",lastActivity:"2025-03-11",bio:"Driving inclusive culture transformation in tech organizations.",avatar:"https://images.pexels.com/photos/3184465/pexels-photo-3184465.jpeg?auto=compress&cs=tinysrgb&w=100",contactInfo:{phone:"+1 (555) 987-6543",department:"Human Resources",title:"Chief HR Officer"},learningProgress:{completedModules:4,totalModules:5,completionRate:96,modules:{foundations:100,bias:100,empathy:100,conversations:100,planning:80}},preferences:{notifications:!0,emailUpdates:!0,language:"en"},resources:[],createdAt:"2025-02-01T08:00:00Z",updatedAt:"2025-03-11T16:45:00Z"}],At=()=>{try{const a=localStorage.getItem("huddle_orgs_v1");if(a)return JSON.parse(a).map(s=>({id:`org-profile-${s.id}`,orgId:s.id,name:s.name,type:s.type,contactPerson:s.contactPerson,contactEmail:s.contactEmail,description:`${s.type} organization committed to inclusive leadership development.`,enrollmentDate:s.enrollmentDate,status:s.status,subscription:s.subscription,lastActivity:s.lastActivity,metrics:{totalLearners:s.totalLearners,activeLearners:s.activeLearners,completionRate:s.completionRate,totalDownloads:Math.floor(Math.random()*200)+50},cohorts:s.cohorts||[],modules:s.modules||{},notes:s.notes,resources:s.id==="1"?[{id:"org-res-1",type:"document",title:"University Leadership Framework",description:"Customized leadership framework for university settings",documentId:"doc-456",createdAt:"2025-02-15T09:00:00Z",createdBy:"Admin",tags:["university","framework","leadership"],category:"Framework",priority:"high",status:"unread"}]:[],createdAt:s.enrollmentDate||"2025-01-01T08:00:00Z",updatedAt:s.lastActivity||new Date().toISOString()}))}catch(a){console.error("Failed to sync org profiles with existing orgs:",a)}return[{id:"org-profile-1",orgId:"1",name:"Pacific Coast University",type:"University",contactPerson:"Dr. Sarah Chen",contactEmail:"sarah.chen@pacificcoast.edu",description:"Leading public university committed to inclusive excellence and student success.",website:"https://pacificcoast.edu",logo:"https://via.placeholder.com/120x120?text=PCU",address:{street:"123 University Ave",city:"San Francisco",state:"CA",zip:"94122",country:"USA"},enrollmentDate:"2025-01-15",status:"active",subscription:"Premium",lastActivity:"2025-03-11",metrics:{totalLearners:45,activeLearners:42,completionRate:94,totalDownloads:127},cohorts:["Spring 2025 Leadership","Faculty Development 2025"],modules:{foundations:98,bias:91,empathy:87,conversations:82,planning:76},notes:"Excellent engagement. Requested additional modules for faculty.",resources:[{id:"org-res-1",type:"document",title:"University Leadership Framework",description:"Customized leadership framework for university settings",documentId:"doc-456",createdAt:"2025-02-15T09:00:00Z",createdBy:"Admin",tags:["university","framework","leadership"],category:"Framework",priority:"high",status:"unread"}],createdAt:"2025-01-15T08:00:00Z",updatedAt:"2025-03-11T12:00:00Z"}]},gs=()=>{try{const a=localStorage.getItem($t);return a?JSON.parse(a):kt()}catch(a){return kt()}},Os=a=>localStorage.setItem($t,JSON.stringify(a)),ls=()=>{try{const a=localStorage.getItem(qt);return a?JSON.parse(a):At()}catch(a){return At()}},Ms=a=>localStorage.setItem(qt,JSON.stringify(a)),yr=a=>z(void 0,null,function*(){let t=gs();if(a!=null&&a.organizationId&&(t=t.filter(s=>s.organizationId===a.organizationId)),a!=null&&a.search){const s=a.search.toLowerCase();t=t.filter(n=>{var i,l;return n.name.toLowerCase().includes(s)||n.email.toLowerCase().includes(s)||((i=n.organization)==null?void 0:i.toLowerCase().includes(s))||((l=n.role)==null?void 0:l.toLowerCase().includes(s))})}return t.sort((s,n)=>new Date(n.updatedAt).getTime()-new Date(s.updatedAt).getTime())}),Bt=a=>z(void 0,null,function*(){return gs().find(s=>s.id===a)||null}),jr=a=>z(void 0,null,function*(){const t=gs(),s=P(k({},a),{id:`user-${Date.now()}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});return t.push(s),Os(t),s}),vr=(a,t)=>z(void 0,null,function*(){const s=gs(),n=s.findIndex(i=>i.id===a);if(n===-1)throw new Error("User profile not found");return s[n]=P(k(k({},s[n]),t),{updatedAt:new Date().toISOString()}),Os(s),s[n]}),Nr=a=>z(void 0,null,function*(){const t=gs(),s=t.findIndex(n=>n.id===a);return s===-1?!1:(t.splice(s,1),Os(t),!0)}),wr=a=>z(void 0,null,function*(){let t=ls();if(a!=null&&a.status&&(t=t.filter(s=>s.status===a.status)),a!=null&&a.search){const s=a.search.toLowerCase();t=t.filter(n=>{var i;return n.name.toLowerCase().includes(s)||n.type.toLowerCase().includes(s)||n.contactPerson.toLowerCase().includes(s)||((i=n.contactEmail)==null?void 0:i.toLowerCase().includes(s))})}return t.sort((s,n)=>new Date(n.updatedAt).getTime()-new Date(s.updatedAt).getTime())}),Vt=a=>z(void 0,null,function*(){return ls().find(s=>s.id===a)||null}),Cr=a=>z(void 0,null,function*(){return ls().find(s=>s.orgId===a)||null}),Sr=a=>z(void 0,null,function*(){const t=ls(),s=P(k({},a),{id:`org-profile-${Date.now()}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});return t.push(s),Ms(t),s}),kr=(a,t)=>z(void 0,null,function*(){const s=ls(),n=s.findIndex(i=>i.id===a);if(n===-1)throw new Error("Organization profile not found");return s[n]=P(k(k({},s[n]),t),{updatedAt:new Date().toISOString()}),Ms(s),s[n]}),Ar=a=>z(void 0,null,function*(){const t=ls(),s=t.findIndex(n=>n.id===a);return s===-1?!1:(t.splice(s,1),Ms(t),!0)}),Tr=a=>z(void 0,null,function*(){const t=P(k({},a.resource),{id:`res-${Date.now()}`,createdAt:new Date().toISOString(),createdBy:"Admin",status:"unread"});if(a.profileType==="user"){const s=gs(),n=s.findIndex(i=>i.id===a.profileId);if(n===-1)throw new Error("User profile not found");if(s[n].resources.push(t),s[n].updatedAt=new Date().toISOString(),Os(s),a.notifyRecipient)try{yield Ks.addNotification({title:`New ${t.type}: ${t.title}`,body:a.message||`You have received a new ${t.type}`,userId:s[n].userId})}catch(i){console.warn("Failed to send notification:",i)}}else{const s=ls(),n=s.findIndex(i=>i.id===a.profileId);if(n===-1)throw new Error("Organization profile not found");if(s[n].resources.push(t),s[n].updatedAt=new Date().toISOString(),Ms(s),a.notifyRecipient)try{yield Ks.addNotification({title:`New ${t.type}: ${t.title}`,body:a.message||`Your organization has received a new ${t.type}`,orgId:s[n].orgId})}catch(i){console.warn("Failed to send notification:",i)}}return t}),Er=(a,t,s,n)=>z(void 0,null,function*(){if(a==="user"){const i=gs(),l=i.findIndex(g=>g.id===t);if(l===-1)return!1;const x=i[l].resources.findIndex(g=>g.id===s);if(x===-1)return!1;i[l].resources[x].status=n,i[l].updatedAt=new Date().toISOString(),Os(i)}else{const i=ls(),l=i.findIndex(g=>g.id===t);if(l===-1)return!1;const x=i[l].resources.findIndex(g=>g.id===s);if(x===-1)return!1;i[l].resources[x].status=n,i[l].updatedAt=new Date().toISOString(),Ms(i)}return!0}),Ir=(a,t,s)=>z(void 0,null,function*(){let n=[];if(a==="user"){const i=yield Bt(t);if(!i)return[];n=i.resources}else{const i=yield Vt(t);if(!i)return[];n=i.resources}return s&&(s.type&&(n=n.filter(i=>i.type===s.type)),s.category&&(n=n.filter(i=>i.category===s.category)),s.priority&&(n=n.filter(i=>i.priority===s.priority)),s.status&&(n=n.filter(i=>i.status===s.status)),s.tag&&(n=n.filter(i=>i.tags.includes(s.tag))),s.createdBy&&(n=n.filter(i=>i.createdBy===s.createdBy)),s.dateFrom&&(n=n.filter(i=>new Date(i.createdAt)>=new Date(s.dateFrom))),s.dateTo&&(n=n.filter(i=>new Date(i.createdAt)<=new Date(s.dateTo)))),n.sort((i,l)=>new Date(l.createdAt).getTime()-new Date(i.createdAt).getTime())}),as={listUserProfiles:yr,getUserProfile:Bt,createUserProfile:jr,updateUserProfile:vr,deleteUserProfile:Nr,listOrganizationProfiles:wr,getOrganizationProfile:Vt,getOrganizationProfileByOrgId:Cr,createOrganizationProfile:Sr,updateOrganizationProfile:kr,deleteOrganizationProfile:Ar,addResourceToProfile:Tr,updateResourceStatus:Er,getProfileResources:Ir},Wt="huddle_course_assignments_v1",Kt=typeof window!="undefined",Xt=(a,t,s)=>`${a}:${t}:${s}`,ht=()=>{if(!Kt)return{};try{const a=localStorage.getItem(Wt);return a?JSON.parse(a).reduce((s,n)=>(s[Xt(n.courseId,n.assigneeType,n.assigneeId)]=n,s),{}):{}}catch(a){return console.warn("[courseAssignmentService] Failed to read assignments from storage",a),{}}},Pr=a=>{if(Kt)try{const t=Object.values(a);localStorage.setItem(Wt,JSON.stringify(t))}catch(t){console.warn("[courseAssignmentService] Failed to write assignments to storage",t)}},Dr=()=>!1,Rr=a=>z(void 0,null,function*(){if(!(!Dr()||a.length===0))try{const t=a.map(n=>({id:n.id,course_id:n.courseId,course_title:n.courseTitle,assignee_type:n.assigneeType,assignee_id:n.assigneeId,assignee_name:n.assigneeName,assignment_date:n.assignmentDate,due_date:n.dueDate,status:n.status,assigned_by:n.assignedBy,message:n.message,notify_learners:n.notifyLearners,created_at:n.createdAt,updated_at:n.updatedAt})),{error:s}=yield fe.from("course_assignments").upsert(t,{onConflict:"id"});if(s)throw s}catch(t){console.warn("[courseAssignmentService] Failed to persist assignments to Supabase",t)}}),Gt=(a,t,s,n)=>{const i=a.filter(m=>m.courseId===t),l=i.filter(m=>m.assigneeType==="organization").length,x=i.filter(m=>m.assigneeType==="user").length,g=i.slice().sort((m,h)=>new Date(h.updatedAt).getTime()-new Date(m.updatedAt).getTime())[0];return{courseId:t,courseTitle:s,totalAssignments:i.length,totalOrganizations:l,totalUsers:x,newAssignments:n,lastAssignedAt:g==null?void 0:g.updatedAt,lastAssignedBy:g==null?void 0:g.assignedBy,lastAssigneeName:g==null?void 0:g.assigneeName,dueDate:g==null?void 0:g.dueDate}},Lr=a=>z(void 0,null,function*(){return Object.values(ht()).filter(s=>s.courseId===a)}),zr=(a,t)=>z(void 0,null,function*(){const s=Object.values(ht());return Gt(s,a,t,0)}),Or=a=>z(void 0,null,function*(){const t=ht(),s=new Date().toISOString(),n=yield fs.listOrgs(),i=new Map(n.map(c=>[c.id,c.name])),l=yield as.listUserProfiles(),x=new Map(l.map(c=>[c.id,c.name])),g=[],m=[],h=(c,f,v)=>{const E=Xt(a.courseId,c,f),y=t[E];if(y){const I=P(k({},y),{assignmentDate:a.assignmentDate,dueDate:a.dueDate,message:a.message,notifyLearners:a.notifyLearners,assignedBy:a.assignedBy,updatedAt:s,status:"assigned"});t[E]=I,g.push(I);return}const d={id:xt(),courseId:a.courseId,courseTitle:a.courseTitle,assigneeType:c,assigneeId:f,assigneeName:v,assignmentDate:a.assignmentDate,dueDate:a.dueDate,status:"assigned",assignedBy:a.assignedBy,message:a.message,notifyLearners:a.notifyLearners,createdAt:s,updatedAt:s};t[E]=d,g.push(d),m.push(d)};a.organizationIds.forEach(c=>{const f=i.get(c)||`Organization ${c}`;h("organization",c,f)}),a.userIds.forEach(c=>{const f=x.get(c)||`User ${c}`;h("user",c,f)}),Pr(t),yield Rr(g);const w=Gt(Object.values(t),a.courseId,a.courseTitle,m.length);return{assignments:g,summary:w,newAssignments:m}}),Tt={assignCourse:Or,listAssignmentsByCourse:Lr,getAssignmentSummary:zr},Mr=({message:a,retryLabel:t,dismissLabel:s,onRetry:n,onDismiss:i})=>e.jsx("div",{role:"alert",className:"w-80 max-w-sm rounded-lg border border-red-100 bg-white p-4 shadow-lg ring-1 ring-black/5",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Ce,{className:"mt-0.5 h-5 w-5 text-red-500","aria-hidden":"true"}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("p",{className:"text-sm font-semibold text-red-700",children:a}),e.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:n,className:"inline-flex flex-1 items-center justify-center rounded-md bg-red-600 px-3 py-1.5 text-sm font-semibold text-white shadow-sm transition hover:bg-red-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-400 focus-visible:ring-offset-2",children:t}),e.jsx("button",{type:"button",onClick:i,className:"inline-flex items-center justify-center rounded-md bg-red-50 px-3 py-1.5 text-sm font-semibold text-red-700 transition hover:bg-red-100 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-200 focus-visible:ring-offset-2",children:s})]})]})]})}),Fr=()=>{const a=b.useRef(null),t=b.useCallback((l,...x)=>z(void 0,[l,...x],function*(n,i={}){const{loadingMessage:g="Processing...",retryLoadingMessage:m="Retrying...",successMessage:h="Action completed successfully",errorMessage:w="Something went wrong. Please try again.",retryLabel:c="Retry",dismissLabel:f="Dismiss",toastId:v,onSuccess:E,onError:y}=i;a.current={action:n,options:i};let d;g&&(d=os.loading(g,{id:v}));try{const I=yield n();return d?os.success(h,{id:d}):h&&os.success(h),E==null||E(I),a.current=null,I}catch(I){d&&os.dismiss(d),console.error("[RetryableAction] Action failed:",I),y==null||y(I);const j=`retry-${Date.now()}`,L=P(k({},i),{loadingMessage:m});throw os.custom(()=>e.jsx(Mr,{message:w,retryLabel:c,dismissLabel:f,onRetry:()=>{os.dismiss(j),t(n,L)},onDismiss:()=>os.dismiss(j)}),{id:j,duration:1/0,position:"top-right"}),I}}),[]),s=b.useCallback(()=>{var l;if(!a.current)return;const{action:n,options:i}=a.current;t(n,P(k({},i),{loadingMessage:(l=i.retryLoadingMessage)!=null?l:"Retrying..."})).catch(()=>{})},[t]);return{execute:t,retryLast:s}},Ur=()=>{const{showToast:a}=Ve(),t=qa(),{execute:s}=Fr(),[n,i]=b.useState(""),[l,x]=b.useState("all"),[g,m]=b.useState([]),[h,w]=b.useState(0),[c,f]=b.useState(!1),[v,E]=b.useState(null),[y,d]=b.useState(!1),[I,j]=b.useState(!1),[L,N]=b.useState(null),[A,_]=b.useState("edit"),[O,Y]=b.useState(!1),[Q,U]=b.useState(null),[R,W]=b.useState([]),[X,ee]=b.useState([]),[p,M]=b.useState({}),[q,S]=b.useState(!1),u=is(),C=b.useMemo(()=>xe.getAllCourses(),[h]);b.useEffect(()=>{fs.listOrgs().then(W).catch(o=>console.warn("Failed to load organizations for assignment modal",o)),as.listUserProfiles().then(ee).catch(o=>console.warn("Failed to load user profiles for assignment modal",o))},[]),b.useEffect(()=>{let o=!0;const F=()=>z(void 0,null,function*(){try{const K=yield Promise.all(C.map(re=>z(void 0,null,function*(){const he=yield Tt.getAssignmentSummary(re.id,re.title);return[re.id,he]})));o&&M(Object.fromEntries(K))}catch(K){console.warn("Failed to load assignment summaries",K)}});return C.length>0?F():M({}),()=>{o=!1}},[C]);const G=C.filter(o=>{const F=o.title.toLowerCase().includes(n.toLowerCase())||o.description.toLowerCase().includes(n.toLowerCase())||(o.tags||[]).some(re=>re.toLowerCase().includes(n.toLowerCase())),K=l==="all"||o.status===l;return F&&K}),le=o=>{m(F=>F.includes(o)?F.filter(K=>K!==o):[...F,o])},je=()=>{g.length===G.length?m([]):m(G.map(o=>o.id))},ge=o=>{N(o),_("edit"),j(!0)},Te=()=>{N(null),_("create"),j(!0)},Ee=o=>{if(A==="create"){const F=xe.createCourse(o);xe.saveCourse(F),t.logEvent({type:"course_created",data:F,timestamp:Date.now()}),a("Course created successfully","success")}else xe.saveCourse(o),t.logEvent({type:"course_updated",data:o,timestamp:Date.now()}),a("Course updated successfully","success");j(!1),w(F=>F+1)},B=o=>{U(o),Y(!0)},ve=o=>z(void 0,null,function*(){const F=C.find(K=>K.id===o.courseId)||Q;if(!F){a("Unable to assign course. Please try again.","error");return}try{S(!0);const K=yield Tt.assignCourse(P(k({},o),{courseId:F.id,courseTitle:F.title,assignedBy:"admin-portal"})),re=P(k({},F),{enrollments:(F.enrollments||0)+K.summary.newAssignments,assignmentSummary:K.summary});xe.saveCourse(re),M(Ie=>P(k({},Ie),{[re.id]:K.summary})),w(Ie=>Ie+1);const he=K.summary.totalAssignments,Ys=he===1?"recipient":"recipients";a(`Course "${K.summary.courseTitle}" assigned to ${he} ${Ys}.`,"success"),t.logEvent({type:"course_assigned",data:{courseId:F.id,courseTitle:F.title,assignment:K.summary,assignments:K.assignments},timestamp:Date.now()}),Y(!1),U(null)}catch(K){console.error("Assignment error:",K),a("Assignment failed. Please try again.","error")}finally{S(!1)}}),De=o=>{switch(o){case"published":return"bg-green-100 text-green-800";case"draft":return"bg-yellow-100 text-yellow-800";case"archived":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},Re=o=>{switch(o){case"video":return e.jsx(Ke,{className:"h-4 w-4"});case"interactive":return e.jsx(cs,{className:"h-4 w-4"});case"worksheet":return e.jsx(Ae,{className:"h-4 w-4"});case"case-study":return e.jsx(ts,{className:"h-4 w-4"});default:return e.jsx(ts,{className:"h-4 w-4"})}},Fe=o=>{switch(o){case"video":return"text-blue-600 bg-blue-50";case"interactive":return"text-green-600 bg-green-50";case"worksheet":return"text-orange-600 bg-orange-50";case"case-study":return"text-purple-600 bg-purple-50";default:return"text-gray-600 bg-gray-50"}},D=o=>{const F=xe.getCourse(o);if(!F)return;const K=`course-${Date.now()}`,re=P(k({},F),{id:K,title:`${F.title} (Copy)`,createdDate:new Date().toISOString(),lastUpdated:new Date().toISOString(),enrollments:0,completions:0,completionRate:0});try{xe.saveCourse(re),w(he=>he+1),u(`/admin/course-builder/${K}`)}catch(he){console.warn("Failed to duplicate course",he)}},H=()=>w(o=>o+1),se=()=>z(void 0,null,function*(){if(g.length===0){a("No courses selected","error");return}d(!0);const o=g.length;try{yield s(()=>z(void 0,null,function*(){return g.forEach(F=>{const K=xe.getCourse(F);if(!K)return;const re=P(k({},K),{status:"published",publishedDate:new Date().toISOString(),lastUpdated:new Date().toISOString()});xe.saveCourse(re)}),o}),{loadingMessage:`Publishing ${o} course${o>1?"s":""}...`,retryLoadingMessage:"Retrying publish...",successMessage:`${o} course${o>1?"s":""} published successfully!`,errorMessage:"Failed to publish selected courses. Please try again.",onSuccess:()=>{m([]),H()},onError:F=>{console.error("Bulk publish failed",F)}})}catch(F){}finally{d(!1)}}),me=(o="selected")=>{let F=G;o==="selected"&&g.length>0?F=g.map(K=>xe.getCourse(K)).filter(Boolean):o==="all"&&(F=xe.getAllCourses());try{const K="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(F,null,2)),re=document.createElement("a");re.setAttribute("href",K),re.setAttribute("download",`courses-export-${Date.now()}.json`),document.body.appendChild(re),re.click(),re.remove()}catch(K){console.warn("Export failed",K),alert("Failed to export courses")}},ae=o=>{E(o),f(!0)},Le=()=>z(void 0,null,function*(){if(v){d(!0);try{xe.deleteCourse(v),m(o=>o.filter(F=>F!==v)),H(),a("Course deleted successfully!","success"),f(!1),E(null)}catch(o){a("Failed to delete course","error")}finally{d(!1)}}}),ze=()=>{const o=document.createElement("input");o.type="file",o.accept=".json,.csv",o.onchange=F=>{var re,he;const K=(he=(re=F.target)==null?void 0:re.files)==null?void 0:he[0];K&&(a(`Importing ${K.name}...`,"info"),setTimeout(()=>{a("Course import completed successfully!","success"),H()},3e3))},o.click()},hs=()=>z(void 0,null,function*(){d(!0);try{yield new Promise(o=>setTimeout(o,1500)),me(g.length>0?"selected":"all"),a("Courses exported successfully!","success")}catch(o){a("Failed to export courses","error")}finally{d(!1)}});return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Course Management"}),e.jsx("p",{className:"text-gray-600",children:"Create, edit, and manage training modules and learning paths"})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 flex-1",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(Ze,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search courses...",value:n,onChange:o=>i(o.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(js,{className:"h-5 w-5 text-gray-400"}),e.jsxs("select",{value:l,onChange:o=>x(o.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"archived",children:"Archived"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[g.length>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>u(`/admin/courses/bulk?ids=${g.join(",")}`),className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors duration-200",children:["Bulk Assign (",g.length,")"]}),e.jsx("button",{onClick:se,className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors duration-200",children:"Publish Selected"})]}),e.jsx(oe,{onClick:Te,variant:"primary",size:"md",icon:ns,children:"New Course"}),e.jsx(oe,{onClick:ze,variant:"secondary",icon:Me,disabled:y,children:"Import"})]})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6 mb-8",children:G.map(o=>{const F=o.assignmentSummary||p[o.id];return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow duration-200",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:o.thumbnail,alt:o.title,className:"w-full h-48 object-cover"}),e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${De(o.status)}`,children:o.status})}),e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("input",{type:"checkbox",checked:g.includes(o.id),onChange:()=>le(o.id),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-gray-300 rounded"})}),e.jsx("div",{className:"absolute bottom-4 left-4",children:e.jsxs("div",{className:`flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium ${Fe(o.type||"Mixed")}`,children:[Re(o.type||"Mixed"),e.jsx("span",{className:"capitalize",children:o.type})]})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-2",children:o.title}),e.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:o.description}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-4",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(Je,{className:"h-4 w-4 mr-1"}),o.duration]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(ts,{className:"h-4 w-4 mr-1"}),o.lessons," lessons"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(Se,{className:"h-4 w-4 mr-1"}),o.enrollments]})]}),F&&F.totalAssignments>0&&e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-4",children:[e.jsxs("span",{children:["Assigned to ",F.totalAssignments," recipient",F.totalAssignments===1?"":"s"]}),F.lastAssignedAt&&e.jsxs("span",{children:["Last assigned ",new Date(F.lastAssignedAt).toLocaleDateString()]})]}),o.status==="published"&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"Completion Rate"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[o.completionRate,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-green-400 to-green-500 h-2 rounded-full",style:{width:`${o.completionRate}%`}})})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:(o.tags||[]).map((K,re)=>e.jsx("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded-full text-xs",children:K},re))}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Updated ",new Date(o.lastUpdated||o.createdDate||new Date().toISOString()).toLocaleDateString()]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ie,{to:`/admin/courses/${o.id}/details`,className:"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg",title:"Preview as Participant",children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>ge(o),className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-50 rounded-lg",title:"Edit Course",children:e.jsx(Ne,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>D(o.id),className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-50 rounded-lg",title:"Duplicate",children:e.jsx(Ye,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>B(o),className:"p-2 text-orange-600 hover:text-orange-800 hover:bg-orange-50 rounded-lg",title:"Assign Course",children:e.jsx(tt,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>u(`/admin/reports?courseId=${o.id}`),className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-50 rounded-lg",title:"Analytics",children:e.jsx(Be,{className:"h-4 w-4"})}),e.jsx(oe,{onClick:()=>ae(o.id),variant:"danger",size:"sm",icon:_e,loading:y&&v===o.id,disabled:y,title:"Delete course",children:"Delete"})]})]})]})]},o.id)})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Course Details"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:je,className:"text-sm text-gray-600 hover:text-gray-900 font-medium",children:g.length===G.length?"Deselect All":"Select All"}),e.jsx(oe,{onClick:hs,variant:"secondary",icon:ye,loading:y,disabled:y,children:"Export"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-6",children:e.jsx("input",{type:"checkbox",checked:g.length===G.length&&G.length>0,onChange:je,className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-gray-300 rounded"})}),e.jsx("th",{className:"text-left py-3 px-6 font-semibold text-gray-900",children:"Course"}),e.jsx("th",{className:"text-center py-3 px-6 font-semibold text-gray-900",children:"Type"}),e.jsx("th",{className:"text-center py-3 px-6 font-semibold text-gray-900",children:"Enrollments"}),e.jsx("th",{className:"text-center py-3 px-6 font-semibold text-gray-900",children:"Completion"}),e.jsx("th",{className:"text-center py-3 px-6 font-semibold text-gray-900",children:"Rating"}),e.jsx("th",{className:"text-center py-3 px-6 font-semibold text-gray-900",children:"Status"}),e.jsx("th",{className:"text-center py-3 px-6 font-semibold text-gray-900",children:"Actions"})]})}),e.jsx("tbody",{children:G.map(o=>{const F=o.assignmentSummary||p[o.id];return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-4 px-6",children:e.jsx("input",{type:"checkbox",checked:g.includes(o.id),onChange:()=>le(o.id),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-gray-300 rounded"})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:o.thumbnail,alt:o.title,className:"w-12 h-12 rounded-lg object-cover"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:o.title}),e.jsxs("div",{className:"text-sm text-gray-600",children:[o.lessons," lessons  ",o.duration]})]})]})}),e.jsx("td",{className:"py-4 px-6 text-center",children:e.jsxs("div",{className:`inline-flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium ${Fe(o.type||"Mixed")}`,children:[Re(o.type||"Mixed"),e.jsx("span",{className:"capitalize",children:o.type})]})}),e.jsxs("td",{className:"py-4 px-6 text-center",children:[e.jsx("div",{className:"font-medium text-gray-900",children:o.enrollments}),e.jsxs("div",{className:"text-sm text-gray-600",children:[o.completions," completed"]}),F&&F.totalAssignments>0&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[F.totalAssignments," assigned"]})]}),e.jsxs("td",{className:"py-4 px-6 text-center",children:[e.jsxs("div",{className:"font-medium text-gray-900",children:[o.completionRate,"%"]}),e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-1 mt-1 mx-auto",children:e.jsx("div",{className:"bg-gradient-to-r from-green-400 to-green-500 h-1 rounded-full",style:{width:`${o.completionRate}%`}})})]}),e.jsx("td",{className:"py-4 px-6 text-center",children:(o.avgRating||0)>0?e.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[e.jsx("span",{className:"font-medium text-gray-900",children:o.avgRating}),e.jsx("div",{className:"text-yellow-400",children:""})]}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"py-4 px-6 text-center",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${De(o.status)}`,children:o.status})}),e.jsx("td",{className:"py-4 px-6 text-center",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(ie,{to:`/admin/courses/${o.id}/details?viewMode=learner`,className:"p-1 text-blue-600 hover:text-blue-800",title:"Preview as Participant",children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsx(ie,{to:`/admin/course-builder/${o.id}`,className:"p-1 text-gray-600 hover:text-gray-800",title:"Edit Course",children:e.jsx(Ne,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>D(o.id),className:"p-1 text-gray-600 hover:text-gray-800",title:"Duplicate",children:e.jsx(Ye,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>u(`/admin/courses/${o.id}/settings`),className:"p-1 text-gray-600 hover:text-gray-800",title:"Settings",children:e.jsx(Pe,{className:"h-4 w-4"})}),e.jsx(oe,{onClick:()=>ae(o.id),variant:"danger",size:"sm",icon:_e,loading:y&&v===o.id,disabled:y,title:"Delete course",children:"Delete"})]})})]},o.id)})})]})})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:C.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Courses"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:C.filter(o=>o.status==="published").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Published"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:C.reduce((o,F)=>o+(F.enrollments||0),0)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Enrollments"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:Math.round(C.filter(o=>(o.avgRating||0)>0).reduce((o,F)=>o+(F.avgRating||0),0)/C.filter(o=>(o.avgRating||0)>0).length*10)/10||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Avg. Rating"})]})]}),e.jsx(gt,{isOpen:c,onClose:()=>{f(!1),E(null)},onConfirm:Le,title:"Delete Course",message:"Are you sure you want to delete this course? This action cannot be undone and will remove all associated data including enrollments and progress.",confirmText:"Delete Course",cancelText:"Cancel",type:"danger"}),e.jsx(gr,{isOpen:I,onClose:()=>j(!1),onSave:Ee,course:L,mode:A}),e.jsx(Ot,{isOpen:O,onClose:()=>{q||(Y(!1),U(null))},selectedUsers:[],course:Q?{id:Q.id,title:Q.title,duration:Q.duration}:void 0,courseOptions:C.map(o=>({id:o.id,title:o.title,duration:o.duration})),availableOrganizations:R.map(o=>({id:o.id,name:o.name,contactEmail:o.contactEmail})),availableUsers:X.map(o=>({id:o.id,name:o.name,email:o.email,organization:o.organization})),onAssignComplete:ve})]})},xn=Object.freeze(Object.defineProperty({__proto__:null,default:Ur},Symbol.toStringTag,{value:"Module"})),_r=()=>{var y;const[a,t]=b.useState("profile"),[s,n]=b.useState(!1),[i,l]=b.useState({profile:{name:"Mya Dennis",email:"mya@thehuddleco.com",title:"Founder & Lead Facilitator",bio:"Passionate about creating inclusive workplaces where everyone can thrive.",phone:"+1 (555) 123-4567",timezone:"America/New_York"},notifications:{emailNewEnrollment:!0,emailCourseCompletion:!0,emailFeedbackSubmitted:!0,emailWeeklyReport:!0,emailSystemAlerts:!0,pushNewEnrollment:!1,pushCourseCompletion:!0,pushSystemAlerts:!0},security:{twoFactorEnabled:!0,sessionTimeout:60,passwordExpiry:90,loginAttempts:5},system:{maintenanceMode:!1,allowNewRegistrations:!0,requireEmailVerification:!0,autoArchiveInactive:180,backupFrequency:"daily"},branding:{primaryColor:"#FF8895",secondaryColor:"#D72638",accentColor:"#3A7DFF",logoUrl:"",faviconUrl:"",customCss:""},integrations:{mailchimpApiKey:"",stripeApiKey:"",zoomApiKey:"",slackWebhook:"",googleAnalyticsId:""}}),x=[{id:"profile",name:"Profile",icon:Xe},{id:"notifications",name:"Notifications",icon:It},{id:"security",name:"Security",icon:Ps},{id:"system",name:"System",icon:rt},{id:"branding",name:"Branding",icon:Ts},{id:"integrations",name:"Integrations",icon:us}],g=(d,I,j)=>{l(L=>P(k({},L),{[d]:P(k({},L[d]),{[I]:j})}))},m=()=>{console.log("Saving settings:",i)},h=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:"https://images.pexels.com/photos/3184416/pexels-photo-3184416.jpeg?auto=compress&cs=tinysrgb&w=200",alt:"Profile",className:"w-24 h-24 rounded-full object-cover"}),e.jsx("button",{className:"absolute bottom-0 right-0 bg-orange-500 text-white p-2 rounded-full hover:bg-orange-600 transition-colors duration-200",children:e.jsx(Me,{className:"h-4 w-4"})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Profile Photo"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Upload a professional photo for your admin profile"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),e.jsx("input",{type:"text",value:i.profile.name,onChange:d=>g("profile","name",d.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:i.profile.email,onChange:d=>g("profile","email",d.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),e.jsx("input",{type:"text",value:i.profile.title,onChange:d=>g("profile","title",d.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),e.jsx("input",{type:"tel",value:i.profile.phone,onChange:d=>g("profile","phone",d.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bio"}),e.jsx("textarea",{value:i.profile.bio,onChange:d=>g("profile","bio",d.target.value),rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Timezone"}),e.jsxs("select",{value:i.profile.timezone,onChange:d=>g("profile","timezone",d.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"America/New_York",children:"Eastern Time (ET)"}),e.jsx("option",{value:"America/Chicago",children:"Central Time (CT)"}),e.jsx("option",{value:"America/Denver",children:"Mountain Time (MT)"}),e.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time (PT)"})]})]})]}),w=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Email Notifications"}),e.jsx("div",{className:"space-y-4",children:[{key:"emailNewEnrollment",label:"New learner enrollments",description:"Get notified when someone joins a course"},{key:"emailCourseCompletion",label:"Course completions",description:"Get notified when learners complete modules"},{key:"emailFeedbackSubmitted",label:"Feedback submissions",description:"Get notified when learners submit feedback"},{key:"emailWeeklyReport",label:"Weekly progress reports",description:"Receive weekly summary of platform activity"},{key:"emailSystemAlerts",label:"System alerts",description:"Important system notifications and updates"}].map(d=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:d.label}),e.jsx("div",{className:"text-sm text-gray-600",children:d.description})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.notifications[d.key],onChange:I=>g("notifications",d.key,I.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-500"})]})]},d.key))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Push Notifications"}),e.jsx("div",{className:"space-y-4",children:[{key:"pushNewEnrollment",label:"New enrollments",description:"Browser notifications for new learners"},{key:"pushCourseCompletion",label:"Course completions",description:"Browser notifications for completions"},{key:"pushSystemAlerts",label:"System alerts",description:"Critical system notifications"}].map(d=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:d.label}),e.jsx("div",{className:"text-sm text-gray-600",children:d.description})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.notifications[d.key],onChange:I=>g("notifications",d.key,I.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-500"})]})]},d.key))})]})]}),c=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{className:"h-5 w-5 text-green-500"}),e.jsx("span",{className:"font-medium text-green-800",children:"Security Status: Good"})]}),e.jsx("p",{className:"text-sm text-green-700 mt-1",children:"Your account security settings are properly configured."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Timeout (minutes)"}),e.jsx("input",{type:"number",value:i.security.sessionTimeout,onChange:d=>g("security","sessionTimeout",parseInt(d.target.value)),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password Expiry (days)"}),e.jsx("input",{type:"number",value:i.security.passwordExpiry,onChange:d=>g("security","passwordExpiry",parseInt(d.target.value)),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})]}),e.jsx("div",{children:e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Two-Factor Authentication"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Add an extra layer of security to your account"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.security.twoFactorEnabled,onChange:d=>g("security","twoFactorEnabled",d.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-500"})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"API Access"}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"API Key"}),e.jsxs("button",{onClick:()=>n(!s),className:"text-sm text-orange-500 hover:text-orange-600 flex items-center space-x-1",children:[s?e.jsx(Ws,{className:"h-4 w-4"}):e.jsx(ce,{className:"h-4 w-4"}),e.jsx("span",{children:s?"Hide":"Show"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:s?"text":"password",value:"hc_live_1234567890abcdef",readOnly:!0,className:"flex-1 px-3 py-2 bg-white border border-gray-300 rounded-lg text-sm"}),e.jsxs("button",{className:"bg-orange-500 text-white px-3 py-2 rounded-lg hover:bg-orange-600 transition-colors duration-200 flex items-center space-x-1",children:[e.jsx(ds,{className:"h-4 w-4"}),e.jsx("span",{children:"Regenerate"})]})]})]})]})]}),f=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{className:"h-5 w-5 text-yellow-500"}),e.jsx("span",{className:"font-medium text-yellow-800",children:"System Configuration"})]}),e.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Changes to these settings affect all users and organizations."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Maintenance Mode"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Temporarily disable access for system updates"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.system.maintenanceMode,onChange:d=>g("system","maintenanceMode",d.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-500"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Allow New Registrations"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Enable new organizations to request access"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.system.allowNewRegistrations,onChange:d=>g("system","allowNewRegistrations",d.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-500"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Require Email Verification"}),e.jsx("div",{className:"text-sm text-gray-600",children:"New users must verify their email address"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.system.requireEmailVerification,onChange:d=>g("system","requireEmailVerification",d.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-500"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Auto-archive Inactive Users (days)"}),e.jsx("input",{type:"number",value:i.system.autoArchiveInactive,onChange:d=>g("system","autoArchiveInactive",parseInt(d.target.value)),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Backup Frequency"}),e.jsxs("select",{value:i.system.backupFrequency,onChange:d=>g("system","backupFrequency",d.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"})]})]})]})]}),v=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Brand Colors"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Primary Color"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"color",value:i.branding.primaryColor,onChange:d=>g("branding","primaryColor",d.target.value),className:"w-12 h-12 border border-gray-300 rounded-lg cursor-pointer"}),e.jsx("input",{type:"text",value:i.branding.primaryColor,onChange:d=>g("branding","primaryColor",d.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Secondary Color"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"color",value:i.branding.secondaryColor,onChange:d=>g("branding","secondaryColor",d.target.value),className:"w-12 h-12 border border-gray-300 rounded-lg cursor-pointer"}),e.jsx("input",{type:"text",value:i.branding.secondaryColor,onChange:d=>g("branding","secondaryColor",d.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Accent Color"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"color",value:i.branding.accentColor,onChange:d=>g("branding","accentColor",d.target.value),className:"w-12 h-12 border border-gray-300 rounded-lg cursor-pointer"}),e.jsx("input",{type:"text",value:i.branding.accentColor,onChange:d=>g("branding","accentColor",d.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Logo & Assets"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Logo URL"}),e.jsx("input",{type:"url",value:i.branding.logoUrl,onChange:d=>g("branding","logoUrl",d.target.value),placeholder:"https://example.com/logo.png",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Favicon URL"}),e.jsx("input",{type:"url",value:i.branding.faviconUrl,onChange:d=>g("branding","faviconUrl",d.target.value),placeholder:"https://example.com/favicon.ico",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom CSS"}),e.jsx("textarea",{value:i.branding.customCss,onChange:d=>g("branding","customCss",d.target.value),rows:8,placeholder:"/* Add your custom CSS here */",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent font-mono text-sm"})]})]}),E=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mailchimp API Key"}),e.jsx("input",{type:"password",value:i.integrations.mailchimpApiKey,onChange:d=>g("integrations","mailchimpApiKey",d.target.value),placeholder:"Enter Mailchimp API key",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stripe API Key"}),e.jsx("input",{type:"password",value:i.integrations.stripeApiKey,onChange:d=>g("integrations","stripeApiKey",d.target.value),placeholder:"Enter Stripe API key",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Zoom API Key"}),e.jsx("input",{type:"password",value:i.integrations.zoomApiKey,onChange:d=>g("integrations","zoomApiKey",d.target.value),placeholder:"Enter Zoom API key",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Slack Webhook URL"}),e.jsx("input",{type:"url",value:i.integrations.slackWebhook,onChange:d=>g("integrations","slackWebhook",d.target.value),placeholder:"Enter Slack webhook URL",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Google Analytics ID"}),e.jsx("input",{type:"text",value:i.integrations.googleAnalyticsId,onChange:d=>g("integrations","googleAnalyticsId",d.target.value),placeholder:"GA-XXXXXXXXX-X",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Integration Status"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-blue-800",children:"Email Marketing"}),e.jsxs("span",{className:"text-sm text-green-600 flex items-center",children:[e.jsx(de,{className:"h-4 w-4 mr-1"}),"Connected"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-blue-800",children:"Payment Processing"}),e.jsxs("span",{className:"text-sm text-yellow-600 flex items-center",children:[e.jsx(Ce,{className:"h-4 w-4 mr-1"}),"Not Configured"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-blue-800",children:"Video Conferencing"}),e.jsxs("span",{className:"text-sm text-green-600 flex items-center",children:[e.jsx(de,{className:"h-4 w-4 mr-1"}),"Connected"]})]})]})]})]});return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Settings"}),e.jsx("p",{className:"text-gray-600",children:"Manage your admin profile, system configuration, and integrations"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx("nav",{className:"space-y-2",children:x.map(d=>{const I=d.icon;return e.jsxs("button",{onClick:()=>t(d.id),className:`w-full flex items-center space-x-3 px-4 py-3 text-left rounded-lg transition-colors duration-200 ${a===d.id?"bg-orange-50 text-orange-600 border-r-2 border-orange-500":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[e.jsx(I,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:d.name})]},d.id)})})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:(y=x.find(d=>d.id===a))==null?void 0:y.name}),e.jsxs("button",{onClick:m,className:"bg-orange-500 text-white px-6 py-3 rounded-lg hover:bg-orange-600 transition-colors duration-200 flex items-center space-x-2",children:[e.jsx(Ls,{className:"h-4 w-4"}),e.jsx("span",{children:"Save Changes"})]})]}),a==="profile"&&h(),a==="notifications"&&w(),a==="security"&&c(),a==="system"&&f(),a==="branding"&&v(),a==="integrations"&&E()]})})]})]})},un=Object.freeze(Object.defineProperty({__proto__:null,default:_r},Symbol.toStringTag,{value:"Module"})),$r=()=>{const[a,t]=b.useState(""),[s,n]=b.useState("all"),[i,l]=b.useState([]),x=[{id:"1",name:"Inclusive Leadership Certification",description:"Comprehensive certification for completing all 5 core modules",template:"Professional Template A",issued:142,expiry:"1 year",status:"active",lastUpdated:"2025-02-15",requirements:["Complete all 5 modules","Pass final assessment (80%)","Submit action plan"],design:{primaryColor:"#FF8895",secondaryColor:"#D72638",logo:"huddle-co-logo.png",background:"certificate-bg-1.jpg"}},{id:"2",name:"Courageous Conversations Certificate",description:"Specialized certificate for mastering difficult conversations",template:"Modern Template B",issued:89,expiry:"6 months",status:"active",lastUpdated:"2025-02-10",requirements:["Complete Conversations module","Practice session recording","Peer feedback"],design:{primaryColor:"#3A7DFF",secondaryColor:"#2D9B66",logo:"huddle-co-logo.png",background:"certificate-bg-2.jpg"}},{id:"3",name:"DEI Foundations Certificate",description:"Entry-level certificate for basic DEI understanding",template:"Classic Template C",issued:234,expiry:"No expiry",status:"active",lastUpdated:"2025-01-20",requirements:["Complete Foundations module","Pass quiz (70%)","Reflection submission"],design:{primaryColor:"#2D9B66",secondaryColor:"#FF8895",logo:"huddle-co-logo.png",background:"certificate-bg-3.jpg"}},{id:"4",name:"Advanced Leadership Certificate",description:"Premium certification for senior leaders",template:"Executive Template D",issued:45,expiry:"2 years",status:"draft",lastUpdated:"2025-03-01",requirements:["Complete all modules","Leadership project","Mentor 2 colleagues","Executive assessment"],design:{primaryColor:"#D72638",secondaryColor:"#3A7DFF",logo:"huddle-co-logo.png",background:"certificate-bg-4.jpg"}}],g=[{learner:"Sarah Chen",certificate:"Inclusive Leadership",expires:"2025-03-20",daysLeft:9},{learner:"Marcus Rodriguez",certificate:"Courageous Conversations",expires:"2025-03-25",daysLeft:14},{learner:"Jennifer Walsh",certificate:"DEI Foundations",expires:"2025-04-01",daysLeft:21},{learner:"David Thompson",certificate:"Inclusive Leadership",expires:"2025-04-05",daysLeft:25}],m=[{id:"template-1",name:"Professional Template A",preview:"template-1-preview.jpg"},{id:"template-2",name:"Modern Template B",preview:"template-2-preview.jpg"},{id:"template-3",name:"Classic Template C",preview:"template-3-preview.jpg"},{id:"template-4",name:"Executive Template D",preview:"template-4-preview.jpg"}],h=x.filter(v=>{const E=v.name.toLowerCase().includes(a.toLowerCase())||v.description.toLowerCase().includes(a.toLowerCase()),y=s==="all"||v.status===s;return E&&y}),w=v=>{l(E=>E.includes(v)?E.filter(y=>y!==v):[...E,v])},c=v=>{switch(v){case"active":return"bg-green-100 text-green-800";case"draft":return"bg-yellow-100 text-yellow-800";case"archived":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},f=v=>v<=7?"text-red-600":v<=14?"text-yellow-600":"text-green-600";return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Certificate Management"}),e.jsx("p",{className:"text-gray-600",children:"Create, manage, and track digital certificates and credentials"})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 flex-1",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(Ze,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search certificates...",value:a,onChange:v=>t(v.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(js,{className:"h-5 w-5 text-gray-400"}),e.jsxs("select",{value:s,onChange:v=>n(v.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"archived",children:"Archived"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[i.length>0&&e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("button",{className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors duration-200",children:["Bulk Actions (",i.length,")"]})}),e.jsxs("button",{className:"bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition-colors duration-200 flex items-center space-x-2",children:[e.jsx(ns,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Certificate"})]}),e.jsxs("button",{className:"border border-gray-300 px-4 py-2 rounded-lg hover:bg-gray-50 transition-colors duration-200 flex items-center space-x-2",children:[e.jsx(Me,{className:"h-4 w-4"}),e.jsx("span",{children:"Import Template"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:h.map(v=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow duration-200",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-32 bg-gradient-to-br from-orange-100 to-blue-100 flex items-center justify-center",children:e.jsx(zs,{className:"h-12 w-12 text-orange-500"})}),e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${c(v.status)}`,children:v.status})}),e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("input",{type:"checkbox",checked:i.includes(v.id),onChange:()=>w(v.id),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-gray-300 rounded"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-2",children:v.name}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:v.description}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Issued:"}),e.jsx("span",{className:"font-medium text-gray-900",children:v.issued})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Expiry:"}),e.jsx("span",{className:"font-medium text-gray-900",children:v.expiry})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Template:"}),e.jsx("span",{className:"font-medium text-gray-900",children:v.template})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Requirements:"}),e.jsxs("ul",{className:"space-y-1",children:[v.requirements.slice(0,2).map((E,y)=>e.jsxs("li",{className:"flex items-center text-xs text-gray-600",children:[e.jsx(de,{className:"h-3 w-3 text-green-500 mr-2"}),E]},y)),v.requirements.length>2&&e.jsxs("li",{className:"text-xs text-gray-500",children:["+",v.requirements.length-2," more requirements"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Updated ",new Date(v.lastUpdated).toLocaleDateString()]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg",title:"Preview",children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-50 rounded-lg",title:"Edit",children:e.jsx(Ne,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-50 rounded-lg",title:"Duplicate",children:e.jsx(Ye,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-50 rounded-lg",title:"Settings",children:e.jsx(Pe,{className:"h-4 w-4"})})]})]})]})]},v.id))}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Certificate Templates"}),e.jsxs("button",{className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors duration-200 flex items-center space-x-2",children:[e.jsx(Ts,{className:"h-4 w-4"}),e.jsx("span",{children:"Design New Template"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:m.map(v=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow duration-200",children:[e.jsx("div",{className:"h-24 bg-gradient-to-br from-gray-100 to-gray-200 rounded-lg mb-3 flex items-center justify-center",children:e.jsx(Ae,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:v.name}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{className:"text-sm text-blue-600 hover:text-blue-700",children:"Preview"}),e.jsx("button",{className:"text-sm text-gray-600 hover:text-gray-700",children:"Use Template"})]})]},v.id))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Ce,{className:"h-5 w-5 text-yellow-500"}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Expiring Soon"})]}),e.jsx("div",{className:"space-y-3",children:g.map((v,E)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 text-sm",children:v.learner}),e.jsx("div",{className:"text-xs text-gray-600",children:v.certificate})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`text-sm font-medium ${f(v.daysLeft)}`,children:[v.daysLeft," days"]}),e.jsx("div",{className:"text-xs text-gray-500",children:new Date(v.expires).toLocaleDateString()})]})]},E))}),e.jsx("button",{className:"w-full mt-4 bg-yellow-500 text-white py-2 rounded-lg hover:bg-yellow-600 transition-colors duration-200 text-sm",children:"Send Renewal Reminders"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Certificate Stats"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Issued"}),e.jsx("span",{className:"font-bold text-gray-900",children:"510"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Active"}),e.jsx("span",{className:"font-bold text-green-600",children:"467"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Expiring (30 days)"}),e.jsx("span",{className:"font-bold text-yellow-600",children:"43"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Expired"}),e.jsx("span",{className:"font-bold text-red-600",children:"12"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{className:"w-full bg-white text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-50 transition-colors duration-200 flex items-center space-x-2",children:[e.jsx(ye,{className:"h-4 w-4"}),e.jsx("span",{children:"Export All Certificates"})]}),e.jsxs("button",{className:"w-full bg-white text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-50 transition-colors duration-200 flex items-center space-x-2",children:[e.jsx(ms,{className:"h-4 w-4"}),e.jsx("span",{children:"Schedule Renewals"})]}),e.jsxs("button",{className:"w-full bg-white text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-50 transition-colors duration-200 flex items-center space-x-2",children:[e.jsx(Se,{className:"h-4 w-4"}),e.jsx("span",{children:"Bulk Issue Certificates"})]})]})]})]})]})]})},gn=Object.freeze(Object.defineProperty({__proto__:null,default:$r},Symbol.toStringTag,{value:"Module"})),qr=()=>{const[a,t]=b.useState({}),[s,n]=b.useState("overview"),i=[{id:"mailchimp",name:"Mailchimp",description:"Email marketing and automation",category:"Marketing",status:"connected",icon:rs,color:"text-yellow-600",bgColor:"bg-yellow-50",lastSync:"2025-03-11 10:30 AM",features:["Email campaigns","Subscriber management","Automation workflows"],apiKey:"mc_live_1234567890abcdef",webhookUrl:"https://api.thehuddleco.com/webhooks/mailchimp"},{id:"stripe",name:"Stripe",description:"Payment processing and billing",category:"Payments",status:"connected",icon:Is,color:"text-blue-600",bgColor:"bg-blue-50",lastSync:"2025-03-11 09:15 AM",features:["Payment processing","Subscription billing","Invoice generation"],apiKey:"sk_live_1234567890abcdef",webhookUrl:"https://api.thehuddleco.com/webhooks/stripe"},{id:"zoom",name:"Zoom",description:"Video conferencing and webinars",category:"Communication",status:"connected",icon:Se,color:"text-blue-500",bgColor:"bg-blue-50",lastSync:"2025-03-11 08:45 AM",features:["Meeting scheduling","Webinar hosting","Recording management"],apiKey:"zoom_jwt_1234567890abcdef",webhookUrl:"https://api.thehuddleco.com/webhooks/zoom"},{id:"slack",name:"Slack",description:"Team communication and notifications",category:"Communication",status:"connected",icon:Ds,color:"text-purple-600",bgColor:"bg-purple-50",lastSync:"2025-03-11 11:00 AM",features:["Notifications","Team updates","Progress alerts"],apiKey:"xoxb-1234567890-abcdef",webhookUrl:"https://hooks.slack.com/services/T00000000/B00000000/XXXXXXXXXXXXXXXXXXXXXXXX"},{id:"salesforce",name:"Salesforce",description:"Customer relationship management",category:"CRM",status:"pending",icon:rt,color:"text-blue-700",bgColor:"bg-blue-50",lastSync:"Never",features:["Contact sync","Lead management","Opportunity tracking"],apiKey:"",webhookUrl:""},{id:"google-analytics",name:"Google Analytics",description:"Website and learning analytics",category:"Analytics",status:"connected",icon:Be,color:"text-orange-600",bgColor:"bg-orange-50",lastSync:"2025-03-11 10:00 AM",features:["User tracking","Engagement metrics","Conversion analysis"],apiKey:"GA4-XXXXXXXXX-X",webhookUrl:"https://api.thehuddleco.com/webhooks/google-analytics"},{id:"microsoft-teams",name:"Microsoft Teams",description:"Enterprise communication platform",category:"Communication",status:"disconnected",icon:Se,color:"text-blue-600",bgColor:"bg-blue-50",lastSync:"2025-02-15 03:20 PM",features:["Team meetings","File sharing","Collaboration"],apiKey:"",webhookUrl:""},{id:"hubspot",name:"HubSpot",description:"Marketing and sales automation",category:"CRM",status:"error",icon:rt,color:"text-orange-600",bgColor:"bg-orange-50",lastSync:"2025-03-10 02:30 PM",features:["Contact management","Email marketing","Sales pipeline"],apiKey:"hub_live_1234567890abcdef",webhookUrl:"https://api.thehuddleco.com/webhooks/hubspot"}],l=[{id:"1",name:"Course Completion Webhook",url:"https://api.client-org.com/webhooks/completion",events:["course.completed","certificate.issued"],status:"active",lastTriggered:"2025-03-11 10:45 AM",successRate:98.5},{id:"2",name:"User Progress Webhook",url:"https://api.university.edu/lms/progress",events:["user.progress","module.started"],status:"active",lastTriggered:"2025-03-11 09:30 AM",successRate:99.2},{id:"3",name:"Enrollment Webhook",url:"https://api.nonprofit.org/training/enroll",events:["user.enrolled","cohort.created"],status:"error",lastTriggered:"2025-03-10 04:15 PM",successRate:85.3}],x=[{method:"GET",endpoint:"/api/v1/users",description:"Retrieve user list with progress data",usage:"1,234 calls/month"},{method:"POST",endpoint:"/api/v1/users/{id}/enroll",description:"Enroll user in specific course",usage:"567 calls/month"},{method:"GET",endpoint:"/api/v1/courses/{id}/progress",description:"Get course completion statistics",usage:"890 calls/month"},{method:"POST",endpoint:"/api/v1/certificates/issue",description:"Issue certificate to user",usage:"234 calls/month"}],g=d=>{t(I=>P(k({},I),{[d]:!I[d]}))},m=is(),h=d=>{m(`/admin/integrations/${d}`)},w=d=>{alert(`Testing integration: ${d} (demo)`)},c=d=>{alert(`Regenerated ${d} (demo)`)},f=()=>{alert("Open webhook creation modal (demo)")},v=d=>{switch(d){case"connected":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"error":return"bg-red-100 text-red-800";case"disconnected":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},E=d=>{switch(d){case"connected":return e.jsx(de,{className:"h-4 w-4 text-green-500"});case"pending":return e.jsx(ds,{className:"h-4 w-4 text-yellow-500"});case"error":return e.jsx(Ce,{className:"h-4 w-4 text-red-500"});default:return e.jsx(Ce,{className:"h-4 w-4 text-gray-500"})}},y=[{id:"overview",name:"Overview",icon:us},{id:"webhooks",name:"Webhooks",icon:$e},{id:"api",name:"API Access",icon:nt},{id:"sso",name:"SSO & Auth",icon:Ps}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Integrations & API"}),e.jsx("p",{className:"text-gray-600",children:"Connect with third-party services and manage API access"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mb-8",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:y.map(d=>{const I=d.icon;return e.jsxs("button",{onClick:()=>n(d.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ${s===d.id?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(I,{className:"h-4 w-4"}),e.jsx("span",{children:d.name})]},d.id)})})}),e.jsxs("div",{className:"p-6",children:[s==="overview"&&e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:"6"}),e.jsx("div",{className:"text-sm text-green-700",children:"Connected"})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:"1"}),e.jsx("div",{className:"text-sm text-yellow-700",children:"Pending"})]}),e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:"1"}),e.jsx("div",{className:"text-sm text-red-700",children:"Error"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-600",children:"1"}),e.jsx("div",{className:"text-sm text-gray-700",children:"Disconnected"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(d=>{const I=d.icon;return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow duration-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${d.bgColor}`,children:e.jsx(I,{className:`h-6 w-6 ${d.color}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900",children:d.name}),e.jsx("p",{className:"text-sm text-gray-600",children:d.category})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[E(d.status),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${v(d.status)}`,children:d.status})]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:d.description}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Features:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:d.features.map((j,L)=>e.jsx("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded-full text-xs",children:j},L))})]}),e.jsxs("div",{className:"text-xs text-gray-500 mb-4",children:["Last sync: ",d.lastSync]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:()=>h(d.id),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Configure"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>w(d.name),className:"p-1 text-gray-400 hover:text-gray-600",title:"Test",children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>h(d.id),className:"p-1 text-gray-400 hover:text-gray-600",title:"Settings",children:e.jsx(Pe,{className:"h-4 w-4"})})]})]})]},d.id)})})]}),s==="webhooks"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Webhook Management"}),e.jsxs("button",{onClick:f,className:"bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition-colors duration-200 flex items-center space-x-2",children:[e.jsx(ns,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Webhook"})]})]}),e.jsx("div",{className:"space-y-4",children:l.map(d=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900 mb-1",children:d.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:d.url}),e.jsx("div",{className:"flex flex-wrap gap-2",children:d.events.map((I,j)=>e.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs",children:I},j))})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[E(d.status),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${v(d.status)}`,children:d.status})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Last Triggered:"}),e.jsx("div",{className:"font-medium text-gray-900",children:d.lastTriggered})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Success Rate:"}),e.jsxs("div",{className:"font-medium text-gray-900",children:[d.successRate,"%"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>w(d.name),className:"text-blue-600 hover:text-blue-700",children:"Test"}),e.jsx("button",{onClick:()=>alert("Edit webhook (demo)"),className:"text-gray-600 hover:text-gray-700",children:"Edit"}),e.jsx("button",{onClick:()=>{confirm("Delete webhook?")&&alert("Deleted (demo)")},className:"text-red-600 hover:text-red-700",children:"Delete"})]})]})]},d.id))})]}),s==="api"&&e.jsx("div",{children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"API Keys"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Production API Key"}),e.jsxs("button",{onClick:()=>g("production"),className:"text-sm text-orange-500 hover:text-orange-600 flex items-center space-x-1",children:[a.production?e.jsx(Ws,{className:"h-4 w-4"}):e.jsx(ce,{className:"h-4 w-4"}),e.jsx("span",{children:a.production?"Hide":"Show"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:a.production?"text":"password",value:"hc_live_1234567890abcdef1234567890abcdef",readOnly:!0,className:"flex-1 px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg text-sm font-mono"}),e.jsxs("button",{onClick:()=>c("production"),className:"bg-orange-500 text-white px-3 py-2 rounded-lg hover:bg-orange-600 transition-colors duration-200 flex items-center space-x-1",children:[e.jsx(ds,{className:"h-4 w-4"}),e.jsx("span",{children:"Regenerate"})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Test API Key"}),e.jsxs("button",{onClick:()=>g("test"),className:"text-sm text-orange-500 hover:text-orange-600 flex items-center space-x-1",children:[a.test?e.jsx(Ws,{className:"h-4 w-4"}):e.jsx(ce,{className:"h-4 w-4"}),e.jsx("span",{children:a.test?"Hide":"Show"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:a.test?"text":"password",value:"hc_test_1234567890abcdef1234567890abcdef",readOnly:!0,className:"flex-1 px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg text-sm font-mono"}),e.jsxs("button",{onClick:()=>c("test"),className:"bg-gray-500 text-white px-3 py-2 rounded-lg hover:bg-gray-600 transition-colors duration-200 flex items-center space-x-1",children:[e.jsx(ds,{className:"h-4 w-4"}),e.jsx("span",{children:"Regenerate"})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"API Endpoints"}),e.jsx("div",{className:"space-y-3",children:x.map((d,I)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${d.method==="GET"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:d.method}),e.jsx("code",{className:"text-sm font-mono text-gray-900",children:d.endpoint})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:d.description}),e.jsx("div",{className:"text-xs text-gray-500",children:d.usage})]},I))})]})]})}),s==="sso"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Single Sign-On & Authentication"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"SSO Providers"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-blue-50 p-2 rounded-lg",children:e.jsx(Ps,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"SAML 2.0"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Enterprise SSO"})]})]}),e.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium",children:"Active"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("div",{children:"Metadata URL: https://api.thehuddleco.com/saml/metadata"}),e.jsx("div",{children:"ACS URL: https://api.thehuddleco.com/saml/acs"})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-green-50 p-2 rounded-lg",children:e.jsx(nt,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"OAuth 2.0"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Modern authentication"})]})]}),e.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium",children:"Active"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("div",{children:"Client ID: hc_oauth_1234567890"}),e.jsx("div",{children:"Redirect URI: https://app.thehuddleco.com/auth/callback"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Security Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Two-Factor Authentication"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Require 2FA for admin accounts"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-500"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Session Timeout"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Auto-logout after inactivity"})]}),e.jsxs("select",{className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[e.jsx("option",{children:"30 minutes"}),e.jsx("option",{children:"1 hour"}),e.jsx("option",{children:"2 hours"}),e.jsx("option",{children:"4 hours"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"IP Restrictions"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Limit access by IP address"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-500"})]})]})]})]})]})]})]})]})]})},hn=Object.freeze(Object.defineProperty({__proto__:null,default:qr},Symbol.toStringTag,{value:"Module"})),Br=()=>{const{integrationId:a}=vs(),t=is(),{showToast:s}=Ve(),[n,i]=b.useState(!1),[l,x]=b.useState(!1),[g,m]=b.useState(!1),h=j=>({mailchimp:{id:"mailchimp",name:"Mailchimp",description:"Email marketing and automation platform",status:"connected",apiKey:"mc_live_1234567890abcdef",webhookUrl:"https://api.thehuddleco.com/webhooks/mailchimp",settings:{listId:"abc123def456",automationEnabled:!0,doubleOptIn:!0,tagNewSubscribers:!0,defaultTags:"huddle-learner,inclusive-leadership"}},stripe:{id:"stripe",name:"Stripe",description:"Payment processing and billing",status:"connected",apiKey:"sk_live_1234567890abcdef",webhookUrl:"https://api.thehuddleco.com/webhooks/stripe",settings:{publicKey:"pk_live_1234567890abcdef",currency:"USD",collectTaxes:!0,invoiceReminders:!0,trialPeriod:14}},zoom:{id:"zoom",name:"Zoom",description:"Video conferencing and webinars",status:"connected",apiKey:"zoom_jwt_1234567890abcdef",settings:{accountId:"zoom_account_123",autoRecord:!0,waitingRoom:!0,defaultDuration:60,allowScreenShare:!0}},slack:{id:"slack",name:"Slack",description:"Team communication and notifications",status:"connected",apiKey:"xoxb-1234567890-abcdef",webhookUrl:"https://hooks.slack.com/services/T00000000/B00000000/XXXXXXXXXXXXXXXXXXXXXXXX",settings:{channel:"#general",notifyCompletions:!0,notifyEnrollments:!0,mentionUsers:!1,quietHours:!0}}})[j]||{id:j,name:j.charAt(0).toUpperCase()+j.slice(1),description:`${j.charAt(0).toUpperCase()+j.slice(1)} integration`,status:"disconnected",settings:{}},[w,c]=b.useState(h(a||"")),f=()=>z(void 0,null,function*(){i(!0);try{yield new Promise(j=>setTimeout(j,2e3)),s(`${w.name} configuration saved successfully!`,"success")}catch(j){s("Failed to save configuration. Please try again.","error")}finally{i(!1)}}),v=()=>z(void 0,null,function*(){x(!0);try{yield new Promise(j=>setTimeout(j,3e3)),s(`${w.name} connection test successful!`,"success")}catch(j){s("Connection test failed. Please check your settings.","error")}finally{x(!1)}}),E=()=>z(void 0,null,function*(){var j;i(!0);try{yield new Promise(N=>setTimeout(N,1500));const L=`${(j=w.apiKey)==null?void 0:j.split("_")[0]}_live_${Math.random().toString(36).substring(7)}`;c(N=>P(k({},N),{apiKey:L})),s("API key regenerated successfully!","success")}catch(L){s("Failed to regenerate API key.","error")}finally{i(!1)}}),y=(j,L)=>{c(N=>P(k({},N),{settings:P(k({},N.settings),{[j]:L})}))},d=j=>{switch(j){case"connected":return e.jsx(de,{className:"h-5 w-5 text-green-500"});default:return e.jsx(As,{className:"h-5 w-5 text-red-500"})}},I=j=>{switch(j){case"connected":return"bg-green-100 text-green-800";default:return"bg-red-100 text-red-800"}};return a?e.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("button",{onClick:()=>t("/admin/integrations"),className:"p-2 text-gray-500 hover:text-gray-700 rounded-lg transition-colors",title:"Back to Integrations",children:e.jsx(He,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:[w.name," Configuration"]}),e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${I(w.status)} flex items-center space-x-1`,children:[d(w.status),e.jsx("span",{children:w.status})]})]}),e.jsx("p",{className:"text-gray-600 mt-1",children:w.description})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs(oe,{onClick:v,loading:l,variant:"secondary",children:[e.jsx($e,{className:"h-4 w-4"}),"Test Connection"]})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[e.jsx(nt,{className:"h-5 w-5 text-gray-600"}),e.jsx("span",{children:"API Configuration"})]}),e.jsxs("div",{className:"space-y-4",children:[w.apiKey&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Key"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:g?"text":"password",value:w.apiKey,onChange:j=>c(L=>P(k({},L),{apiKey:j.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),e.jsx("button",{type:"button",onClick:()=>m(!g),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:g?e.jsx(Ws,{className:"h-4 w-4"}):e.jsx(ce,{className:"h-4 w-4"})})]}),e.jsxs("button",{onClick:E,disabled:n,className:"px-3 py-2 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors flex items-center space-x-1",children:[e.jsx(ds,{className:"h-3 w-3"}),e.jsx("span",{children:"Regenerate"})]})]})]}),w.webhookUrl&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Webhook URL"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(us,{className:"h-4 w-4 text-gray-400"}),e.jsx("input",{type:"url",value:w.webhookUrl,onChange:j=>c(L=>P(k({},L),{webhookUrl:j.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[e.jsx(Ps,{className:"h-5 w-5 text-gray-600"}),e.jsx("span",{children:"Settings"})]}),e.jsx("div",{className:"space-y-4",children:Object.entries(w.settings).map(([j,L])=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:j.replace(/([A-Z])/g," $1").replace(/^./,N=>N.toUpperCase())}),typeof L=="boolean"?e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:L,onChange:N=>y(j,N.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-gray-300 rounded"}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:L?"Enabled":"Disabled"})]}):typeof L=="number"?e.jsx("input",{type:"number",value:L,onChange:N=>y(j,parseInt(N.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"}):e.jsx("input",{type:"text",value:L,onChange:N=>y(j,N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]},j))})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>t("/admin/integrations"),className:"px-6 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors duration-200",disabled:n||l,children:"Cancel"}),e.jsxs(oe,{onClick:f,loading:n,variant:"primary",children:[e.jsx(Ls,{className:"h-4 w-4"}),"Save Configuration"]})]})]})]}):e.jsx("div",{children:"Integration not found"})},pn=Object.freeze(Object.defineProperty({__proto__:null,default:Br},Symbol.toStringTag,{value:"Module"})),Vr=()=>{const{courseId:a}=vs(),[t]=ma(),s=is(),[n,i]=b.useState(t.get("viewMode")==="learner"?"learner":"admin"),l=a?xe.getCourse(a):null;if(!l)return e.jsxs("div",{className:"p-6 max-w-4xl mx-auto text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Course Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"The course you're looking for doesn't exist or has been removed."}),e.jsxs(ie,{to:"/admin/courses",className:"inline-flex items-center text-orange-500 hover:text-orange-600 font-medium",children:[e.jsx(He,{className:"h-4 w-4 mr-2"}),"Back to Course Management"]})]});const x=c=>{switch(c){case"published":return"bg-green-100 text-green-800";case"draft":return"bg-yellow-100 text-yellow-800";case"archived":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},g=c=>{switch(c){case"Beginner":return"bg-blue-100 text-blue-800";case"Intermediate":return"bg-yellow-100 text-yellow-800";case"Advanced":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},m=c=>{switch(c){case"video":return e.jsx(Ke,{className:"h-5 w-5 text-blue-500"});case"interactive":return e.jsx(Ds,{className:"h-5 w-5 text-green-500"});case"quiz":return e.jsx(de,{className:"h-5 w-5 text-orange-500"});case"download":return e.jsx(Ae,{className:"h-5 w-5 text-purple-500"});default:return e.jsx(ts,{className:"h-5 w-5 text-gray-500"})}},h=l.modules.reduce((c,f)=>c+f.lessons.length,0),w=l.modules.reduce((c,f)=>{const v=f.lessons.reduce((E,y)=>{const d=parseInt(y.duration.split(" ")[0]);return E+d},0);return c+v},0);return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs(ie,{to:"/admin/courses",className:"inline-flex items-center text-orange-500 hover:text-orange-600 mb-4 font-medium",children:[e.jsx(He,{className:"h-4 w-4 mr-2"}),"Back to Course Management"]}),e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:l.title}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${x(l.status)}`,children:l.status}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${g(l.difficulty)}`,children:l.difficulty})]}),e.jsx("p",{className:"text-gray-600 text-lg mb-4",children:l.description}),e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"View Mode:"}),e.jsxs("div",{className:"flex items-center bg-gray-100 rounded-lg p-1",children:[e.jsxs("button",{onClick:()=>i("admin"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${n==="admin"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(Pe,{className:"h-4 w-4 mr-1 inline"}),"Admin Preview"]}),e.jsxs("button",{onClick:()=>i("learner"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${n==="learner"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(ce,{className:"h-4 w-4 mr-1 inline"}),"Learner View"]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(ie,{to:`/admin/course-builder/${l.id}`,className:"bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition-colors duration-200 flex items-center space-x-2",children:[e.jsx(Ne,{className:"h-4 w-4"}),e.jsx("span",{children:"Edit Course"})]}),e.jsxs("button",{onClick:()=>{try{const c=`course-${Date.now()}`,f=P(k({},l),{id:c,title:`${l.title} (Copy)`,createdDate:new Date().toISOString(),lastUpdated:new Date().toISOString(),enrollments:0,completions:0,completionRate:0});xe.saveCourse(f),s(`/admin/course-builder/${c}`)}catch(c){console.warn("Duplicate failed",c)}},className:"border border-gray-300 px-4 py-2 rounded-lg hover:bg-gray-50 transition-colors duration-200 flex items-center space-x-2",children:[e.jsx(Ye,{className:"h-4 w-4"}),e.jsx("span",{children:"Duplicate"})]}),e.jsxs("button",{onClick:()=>{var c;try{const f=`${window.location.origin}/courses/${l.id}`;(c=navigator.clipboard)==null||c.writeText(f).then(()=>console.log("Link copied:",f)).catch(()=>console.log("Copy not supported"))}catch(f){console.warn("Share failed",f)}},className:"border border-gray-300 px-4 py-2 rounded-lg hover:bg-gray-50 transition-colors duration-200 flex items-center space-x-2",children:[e.jsx(dt,{className:"h-4 w-4"}),e.jsx("span",{children:"Copy Link"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("img",{src:l.thumbnail,alt:l.title,className:"w-full h-64 object-cover"}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:h}),e.jsx("div",{className:"text-sm text-gray-600",children:"Lessons"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[w,"m"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Duration"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:l.enrollments}),e.jsx("div",{className:"text-sm text-gray-600",children:"Enrolled"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:l.avgRating}),e.jsx("div",{className:"text-sm text-gray-600",children:"Rating"})]})]}),n==="admin"&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Et,{className:"h-5 w-5 text-blue-500"}),e.jsx("span",{className:"font-medium text-blue-900",children:"Admin Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700",children:"Created by:"}),e.jsx("span",{className:"font-medium text-blue-900 ml-2",children:l.createdBy})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700",children:"Created:"}),e.jsx("span",{className:"font-medium text-blue-900 ml-2",children:new Date(l.createdDate).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700",children:"Last Updated:"}),e.jsx("span",{className:"font-medium text-blue-900 ml-2",children:new Date(l.lastUpdated).toLocaleDateString()})]}),l.publishedDate&&e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700",children:"Published:"}),e.jsx("span",{className:"font-medium text-blue-900 ml-2",children:new Date(l.publishedDate).toLocaleDateString()})]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.tags.map((c,f)=>e.jsx("span",{className:"bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-sm",children:c},f))})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Learning Objectives"}),e.jsx("ul",{className:"space-y-3",children:l.learningObjectives.map((c,f)=>e.jsxs("li",{className:"flex items-start space-x-3",children:[e.jsx(Ge,{className:"h-5 w-5 text-orange-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700",children:c})]},f))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Course Content"}),e.jsx("div",{className:"space-y-6",children:l.modules.map((c,f)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900",children:["Module ",c.order,": ",c.title]}),e.jsx("p",{className:"text-gray-600",children:c.description})]}),e.jsxs("div",{className:"text-sm text-gray-600 flex items-center",children:[e.jsx(Je,{className:"h-4 w-4 mr-1"}),c.duration]})]}),e.jsx("div",{className:"space-y-3",children:c.lessons.map((v,E)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-white rounded-full border border-gray-200",children:m(v.type)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:v.title}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(Je,{className:"h-3 w-3 mr-1"}),v.duration]}),e.jsx("span",{className:"capitalize",children:v.type})]})]})]}),n==="admin"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>{try{const y=`/courses/${l.id}/modules/${c.id}/lessons/${v.id}`;window.open(y,"_blank")}catch(y){console.warn("Preview failed",y)}},className:"p-1 text-blue-600 hover:text-blue-800",title:"Preview Lesson",children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>s(`/admin/course-builder/${l.id}?module=${c.id}&lesson=${v.id}`),className:"p-1 text-gray-600 hover:text-gray-800",title:"Edit Lesson",children:e.jsx(Ne,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>s(`/admin/reports?courseId=${l.id}`),className:"p-1 text-gray-600 hover:text-gray-800",title:"Analytics",children:e.jsx(Be,{className:"h-4 w-4"})})]}),n==="learner"&&e.jsxs("button",{onClick:()=>{try{const y=`/courses/${l.id}/modules/${c.id}/lessons/${v.id}`;window.open(y,"_blank")}catch(y){console.warn("Start failed",y)}},className:"bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition-colors duration-200 flex items-center space-x-2",children:[e.jsx(cs,{className:"h-4 w-4"}),e.jsx("span",{children:"Start"})]})]},v.id))})]},c.id))})]}),l.prerequisites&&l.prerequisites.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Prerequisites"}),e.jsx("ul",{className:"space-y-2",children:l.prerequisites.map((c,f)=>e.jsxs("li",{className:"flex items-center space-x-3",children:[e.jsx(Ce,{className:"h-4 w-4 text-yellow-500 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700",children:c})]},f))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Course Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Duration:"}),e.jsx("span",{className:"font-medium text-gray-900",children:l.estimatedTime})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Difficulty:"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${g(l.difficulty)}`,children:l.difficulty})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Due Date:"}),e.jsxs("span",{className:"font-medium text-gray-900 flex items-center",children:[e.jsx(ms,{className:"h-4 w-4 mr-1 text-orange-500"}),l.dueDate?new Date(l.dueDate).toLocaleDateString():""]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Enrolled:"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[l.enrollments," learners"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Completion Rate:"}),e.jsxs("span",{className:"font-medium text-green-600",children:[l.completionRate,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Average Rating:"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Pt,{className:"h-4 w-4 text-yellow-400 fill-current"}),e.jsx("span",{className:"font-medium text-gray-900",children:l.avgRating}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",l.totalRatings,")"]})]})]})]})]}),l.certification&&l.certification.available&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(zs,{className:"h-5 w-5 text-orange-500"}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Certification"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:l.certification.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Valid for ",l.certification.validFor]}),l.certification.renewalRequired&&e.jsx("p",{className:"text-xs text-yellow-600 mt-1",children:"Renewal required"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Requirements:"}),e.jsx("ul",{className:"space-y-1",children:l.certification.requirements.map((c,f)=>e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx(de,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-gray-700",children:c})]},f))})]})]})]}),n==="admin"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Be,{className:"h-5 w-5 text-blue-500"}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Performance Analytics"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Completion Progress"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[l.completionRate,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-green-400 to-green-500 h-2 rounded-full",style:{width:`${l.completionRate}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[e.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-green-600",children:l.completions}),e.jsx("div",{className:"text-xs text-green-700",children:"Completed"})]}),e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600",children:l.enrollments-l.completions}),e.jsx("div",{className:"text-xs text-blue-700",children:"In Progress"})]})]}),e.jsx("button",{className:"w-full bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600 transition-colors duration-200 text-sm",children:"View Detailed Analytics"})]})]}),n==="learner"&&e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Ready to Start Learning?"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"This course will help you develop essential inclusive leadership skills through interactive lessons, real-world scenarios, and practical exercises."}),e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3",children:[e.jsxs("button",{className:"bg-gradient-to-r from-orange-400 to-red-500 text-white px-6 py-3 rounded-lg hover:from-orange-500 hover:to-red-600 transition-all duration-200 flex items-center justify-center space-x-2",children:[e.jsx(cs,{className:"h-5 w-5"}),e.jsx("span",{children:"Start Course"})]}),e.jsxs("button",{className:"border border-orange-500 text-orange-500 px-6 py-3 rounded-lg hover:bg-orange-500 hover:text-white transition-all duration-200 flex items-center justify-center space-x-2",children:[e.jsx(ye,{className:"h-5 w-5"}),e.jsx("span",{children:"Download Syllabus"})]})]})]})]})]})]})},bn=Object.freeze(Object.defineProperty({__proto__:null,default:Vr},Symbol.toStringTag,{value:"Module"})),Wr=()=>{const[a,t]=b.useState(""),[s,n]=b.useState("all"),[i,l]=b.useState("all"),[x,g]=b.useState([]),[m,h]=b.useState([{id:"climate-2025-q1",title:"Q1 2025 Climate Assessment",description:"Quarterly organizational climate and culture assessment",type:"climate-assessment",status:"active",createdAt:"2025-03-01",launchedAt:"2025-03-05",closedAt:null,totalInvites:247,totalResponses:189,completionRate:77,avgCompletionTime:12,assignedOrgs:["Pacific Coast University","Regional Fire Department","TechForward Solutions"],assignedOrgIds:["1","4","5"],lastActivity:"2025-03-11"},{id:"inclusion-index-2025",title:"Annual Inclusion Index",description:"Comprehensive inclusion measurement with benchmarking",type:"inclusion-index",status:"draft",createdAt:"2025-02-28",launchedAt:null,closedAt:null,totalInvites:0,totalResponses:0,completionRate:0,avgCompletionTime:0,assignedOrgs:[],assignedOrgIds:[],lastActivity:"2025-03-10"},{id:"equity-lens-pilot",title:"Equity Lens Pilot Study",description:"Pilot assessment of equity in organizational practices",type:"equity-lens",status:"completed",createdAt:"2025-01-15",launchedAt:"2025-01-20",closedAt:"2025-02-20",totalInvites:156,totalResponses:142,completionRate:91,avgCompletionTime:15,assignedOrgs:["Community Impact Network","Mountain View High School"],assignedOrgIds:["3","2"],lastActivity:"2025-02-20"},{id:"leadership-360",title:"Leadership 360 Assessment",description:"Multi-rater feedback for inclusive leadership development",type:"custom",status:"paused",createdAt:"2025-02-10",launchedAt:"2025-02-15",closedAt:null,totalInvites:89,totalResponses:34,completionRate:38,avgCompletionTime:18,assignedOrgs:["Pacific Coast University"],assignedOrgIds:["1"],lastActivity:"2025-03-08"}]),w=[{id:"1",name:"Pacific Coast University"},{id:"2",name:"Mountain View High School"},{id:"3",name:"Community Impact Network"},{id:"4",name:"Regional Fire Department"},{id:"5",name:"TechForward Solutions"},{id:"6",name:"Regional Medical Center"},{id:"7",name:"Unity Community Church"}],[c,f]=b.useState(!1),[v,E]=b.useState(null),[y,d]=b.useState([]),I=p=>{var q;const M=m.find(S=>S.id===p);E(p),d((q=M==null?void 0:M.assignedOrgIds)!=null?q:[]),f(!0)},j=is(),L=()=>{if(x.length===0){alert("Select at least one survey to perform bulk actions");return}j(`/admin/surveys/bulk?ids=${x.join(",")}`)},N=()=>{j("/admin/surveys/builder?ai=1")},A=()=>{j("/admin/surveys/import")},_=p=>{const M=m.find(S=>S.id===p);if(!M)return;const q=P(k({},M),{id:`${M.id}-copy-${Date.now()}`,title:`Copy of ${M.title}`,createdAt:new Date().toISOString(),lastActivity:new Date().toISOString()});h(S=>[q,...S]),j(`/admin/surveys/builder/${q.id}`)},O=()=>{f(!1),E(null),d([])},Y=p=>{d(M=>M.includes(p)?M.filter(q=>q!==p):[...M,p])},Q=()=>{v&&(h(p=>p.map(M=>M.id===v?P(k({},M),{assignedOrgIds:y,assignedOrgs:w.filter(q=>y.includes(q.id)).map(q=>q.name)}):M)),z(void 0,null,function*(){try{const p={survey_id:v,organization_ids:y,updated_at:new Date().toISOString()},{data:M,error:q}=yield fe.from("survey_assignments").upsert(p).select();q?console.warn("Failed to save assignment to Supabase:",q.message||q):console.log("Saved survey assignment to Supabase:",M)}catch(p){console.warn("Supabase error saving assignment:",p)}}),O())},U=m.filter(p=>{const M=p.title.toLowerCase().includes(a.toLowerCase())||p.description.toLowerCase().includes(a.toLowerCase()),q=s==="all"||p.status===s,S=i==="all"||p.type===i;return M&&q&&S}),R=p=>{switch(p){case"active":return"bg-green-100 text-green-800";case"draft":return"bg-gray-100 text-gray-800";case"paused":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-blue-100 text-blue-800";case"archived":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},W=p=>{switch(p){case"active":return e.jsx(cs,{className:"h-4 w-4 text-green-500"});case"draft":return e.jsx(Ne,{className:"h-4 w-4 text-gray-500"});case"paused":return e.jsx(ua,{className:"h-4 w-4 text-yellow-500"});case"completed":return e.jsx(de,{className:"h-4 w-4 text-blue-500"});case"archived":return e.jsx(xa,{className:"h-4 w-4 text-purple-500"});default:return e.jsx(Je,{className:"h-4 w-4 text-gray-500"})}},X=p=>{switch(p){case"climate-assessment":return"bg-blue-100 text-blue-800";case"inclusion-index":return"bg-green-100 text-green-800";case"equity-lens":return"bg-orange-100 text-orange-800";case"custom":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},ee=p=>{g(M=>M.includes(p)?M.filter(q=>q!==p):[...M,p])};return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"DEI Survey Platform"}),e.jsx("p",{className:"text-gray-600",children:"Create, manage, and analyze DEI surveys with advanced analytics and insights"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Surveys"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:m.filter(p=>p.status==="active").length})]}),e.jsx("div",{className:"p-3 rounded-lg bg-green-50",children:e.jsx(Ge,{className:"h-6 w-6 text-green-500"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Responses"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:m.reduce((p,M)=>p+M.totalResponses,0)})]}),e.jsx("div",{className:"p-3 rounded-lg bg-blue-50",children:e.jsx(Ds,{className:"h-6 w-6 text-blue-500"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg. Completion"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:[Math.round(m.filter(p=>p.totalInvites>0).reduce((p,M)=>p+M.completionRate,0)/m.filter(p=>p.totalInvites>0).length)||0,"%"]})]}),e.jsx("div",{className:"p-3 rounded-lg bg-orange-50",children:e.jsx(xs,{className:"h-6 w-6 text-orange-500"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Organizations"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:new Set(m.flatMap(p=>p.assignedOrgs)).size})]}),e.jsx("div",{className:"p-3 rounded-lg bg-purple-50",children:e.jsx(Se,{className:"h-6 w-6 text-purple-500"})})]})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 flex-1",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(Ze,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search surveys...",value:a,onChange:p=>t(p.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(js,{className:"h-5 w-5 text-gray-400"}),e.jsxs("select",{value:s,onChange:p=>n(p.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"paused",children:"Paused"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"archived",children:"Archived"})]}),e.jsxs("select",{value:i,onChange:p=>l(p.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"climate-assessment",children:"Climate Assessment"}),e.jsx("option",{value:"inclusion-index",children:"Inclusion Index"}),e.jsx("option",{value:"equity-lens",children:"Equity Lens"}),e.jsx("option",{value:"custom",children:"Custom"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[x.length>0&&e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("button",{onClick:L,className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors duration-200",children:["Bulk Actions (",x.length,")"]})}),e.jsxs("button",{onClick:N,className:"bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 transition-colors duration-200 flex items-center space-x-2",children:[e.jsx(qe,{className:"h-4 w-4"}),e.jsx("span",{children:"AI Survey Creator"})]}),e.jsxs(ie,{to:"/admin/surveys/builder",className:"bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition-colors duration-200 flex items-center space-x-2",children:[e.jsx(ns,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Survey"})]}),e.jsxs("button",{onClick:A,className:"border border-gray-300 px-4 py-2 rounded-lg hover:bg-gray-50 transition-colors duration-200 flex items-center space-x-2",children:[e.jsx(Me,{className:"h-4 w-4"}),e.jsx("span",{children:"Import"})]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6 mb-8",children:U.map(p=>e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow duration-200",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900",children:p.title}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${R(p.status)}`,children:p.status})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-3",children:p.description}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${X(p.type)}`,children:p.type.replace("-"," ").replace(/\b\w/g,M=>M.toUpperCase())})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[W(p.status),e.jsx("input",{type:"checkbox",checked:x.includes(p.id),onChange:()=>ee(p.id),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-gray-300 rounded"})]})]}),p.status!=="draft"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold text-blue-600",children:p.totalResponses}),e.jsx("div",{className:"text-xs text-gray-600",children:"Responses"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xl font-bold text-green-600",children:[p.completionRate,"%"]}),e.jsx("div",{className:"text-xs text-gray-600",children:"Completion"})]})]}),p.status==="active"&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Progress"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[p.completionRate,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-orange-400 to-red-500 h-2 rounded-full",style:{width:`${p.completionRate}%`}})})]}),p.assignedOrgs.length===0&&e.jsx("div",{className:"mb-4",children:e.jsx("span",{className:"text-xs text-red-500 italic",children:"Not assigned"})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Assigned Organizations:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[p.assignedOrgs.length>0?p.assignedOrgs.slice(0,2).map((M,q)=>e.jsx("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded-full text-xs",children:M},q)):e.jsx("span",{className:"text-xs text-gray-500 italic",children:"No assignments"}),p.assignedOrgs.length>2&&e.jsxs("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded-full text-xs",children:["+",p.assignedOrgs.length-2," more"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[p.status==="draft"?"Created":"Last activity",": ",new Date(p.lastActivity).toLocaleDateString()]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"p-2 text-purple-600 hover:text-purple-800 hover:bg-purple-50 rounded-lg",title:"AI Insights",children:e.jsx(qe,{className:"h-4 w-4"})}),e.jsx(ie,{to:`/admin/surveys/${p.id}/analytics`,className:"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg",title:"View Analytics",children:e.jsx(Be,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>I(p.id),className:"p-2 text-green-600 hover:text-green-800 hover:bg-green-50 rounded-lg",title:"Assign to Organizations",children:e.jsx(Se,{className:"h-4 w-4"})}),e.jsx(ie,{to:`/admin/surveys/${p.id}/preview`,className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-50 rounded-lg",title:"Preview Survey",children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsx(ie,{to:`/admin/surveys/builder/${p.id}`,className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-50 rounded-lg",title:"Edit Survey",children:e.jsx(Ne,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>_(p.id),className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-50 rounded-lg",title:"Duplicate",children:e.jsx(Ye,{className:"h-4 w-4"})})]})]})]})},p.id))}),U.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ge,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No surveys found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Try adjusting your search or filter criteria, or create a new survey."}),e.jsxs(ie,{to:"/admin/surveys/builder",className:"bg-orange-500 text-white px-6 py-3 rounded-lg hover:bg-orange-600 transition-colors duration-200 inline-flex items-center space-x-2",children:[e.jsx(ns,{className:"h-5 w-5"}),e.jsx("span",{children:"Create Your First Survey"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 rounded-xl p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Start with a Template"}),e.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Choose from our research-backed DEI survey templates designed by experts in organizational psychology and inclusive leadership."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200",children:[e.jsx("div",{className:"bg-blue-100 w-12 h-12 rounded-lg flex items-center justify-center mb-4",children:e.jsx(Be,{className:"h-6 w-6 text-blue-600"})}),e.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:"Climate Assessment"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Comprehensive workplace culture and belonging assessment"}),e.jsx(ie,{to:"/admin/surveys/builder?template=climate-assessment",className:"text-blue-600 hover:text-blue-700 font-medium text-sm",children:"Use Template "})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200",children:[e.jsx("div",{className:"bg-green-100 w-12 h-12 rounded-lg flex items-center justify-center mb-4",children:e.jsx(Ge,{className:"h-6 w-6 text-green-600"})}),e.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:"Inclusion Index"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Measure inclusion across key dimensions with benchmarking"}),e.jsx(ie,{to:"/admin/surveys/builder?template=inclusion-index",className:"text-green-600 hover:text-green-700 font-medium text-sm",children:"Use Template "})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200",children:[e.jsx("div",{className:"bg-orange-100 w-12 h-12 rounded-lg flex items-center justify-center mb-4",children:e.jsx(de,{className:"h-6 w-6 text-orange-600"})}),e.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:"Equity Lens"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Evaluate organizational practices through an equity framework"}),e.jsx(ie,{to:"/admin/surveys/builder?template=equity-lens",className:"text-orange-600 hover:text-orange-700 font-medium text-sm",children:"Use Template "})]})]})]}),c&&e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-30",onClick:O}),e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl z-50 w-full max-w-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Assign Survey to Organizations"}),e.jsx("button",{onClick:O,className:"text-gray-500 hover:text-gray-800",children:"Close"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Select which organizations should receive this survey. Assignments can be changed later."}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4 max-h-64 overflow-y-auto",children:w.map(p=>e.jsxs("label",{className:`flex items-center space-x-3 p-3 rounded-lg border ${y.includes(p.id)?"border-orange-400 bg-orange-50":"border-gray-100 bg-white"}`,children:[e.jsx("input",{type:"checkbox",checked:y.includes(p.id),onChange:()=>Y(p.id),className:"h-4 w-4 text-orange-500"}),e.jsx("div",{children:e.jsx("div",{className:"font-medium text-gray-900",children:p.name})})]},p.id))}),e.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[e.jsx("button",{onClick:O,className:"border border-gray-300 px-4 py-2 rounded-lg",children:"Cancel"}),e.jsx("button",{onClick:Q,className:"bg-orange-500 text-white px-4 py-2 rounded-lg",children:"Save Assignment"})]})]})]})]})},fn=Object.freeze(Object.defineProperty({__proto__:null,default:Wr},Symbol.toStringTag,{value:"Module"})),Kr=()=>{const{surveyId:a}=vs(),[t,s]=b.useState("all-time"),[n,i]=b.useState("all");b.useState("overview");const l={id:a,title:"Q1 2025 Climate Assessment",description:"Quarterly organizational climate and culture assessment",status:"active",totalInvites:247,totalResponses:189,completionRate:77,avgCompletionTime:12,launchedAt:"2025-03-05",lastResponse:"2025-03-11"},x=[{label:"Response Rate",value:"77%",change:"+5%",changeType:"positive"},{label:"Avg. Completion Time",value:"12 min",change:"-2 min",changeType:"positive"},{label:"Belonging Score",value:"3.8/5",change:"+0.3",changeType:"positive"},{label:"Psychological Safety",value:"3.6/5",change:"+0.1",changeType:"positive"}],g=[{category:"Department",data:[{label:"Engineering",responses:45,percentage:24},{label:"Marketing",responses:38,percentage:20},{label:"Sales",responses:32,percentage:17},{label:"Operations",responses:28,percentage:15},{label:"HR",responses:25,percentage:13},{label:"Finance",responses:21,percentage:11}]},{category:"Tenure",data:[{label:"< 1 year",responses:42,percentage:22},{label:"1-2 years",responses:38,percentage:20},{label:"3-5 years",responses:45,percentage:24},{label:"6-10 years",responses:35,percentage:19},{label:"> 10 years",responses:29,percentage:15}]},{category:"Role Level",data:[{label:"Individual Contributor",responses:89,percentage:47},{label:"Team Lead",responses:34,percentage:18},{label:"Manager",responses:28,percentage:15},{label:"Director",responses:23,percentage:12},{label:"VP/Executive",responses:15,percentage:8}]}],m=[{id:"belonging-1",title:"I feel a strong sense of belonging at this organization",type:"likert-scale",responses:189,avgScore:3.8,distribution:[8,15,32,89,45],sentiment:"positive",insights:["Strong positive trend","Higher scores in Engineering dept","Lower scores for new hires"]},{id:"safety-1",title:"I feel safe speaking up about problems or concerns",type:"likert-scale",responses:187,avgScore:3.6,distribution:[12,23,45,78,29],sentiment:"neutral",insights:["Room for improvement","Varies significantly by department","Tenure affects comfort level"]},{id:"belonging-open",title:"What would make you feel a stronger sense of belonging at work?",type:"open-ended",responses:156,themes:[{theme:"Flexible work arrangements",mentions:45,sentiment:"positive"},{theme:"Better communication from leadership",mentions:38,sentiment:"neutral"},{theme:"More diverse leadership",mentions:32,sentiment:"positive"},{theme:"Recognition and appreciation",mentions:28,sentiment:"positive"},{theme:"Professional development opportunities",mentions:25,sentiment:"positive"}],sentimentBreakdown:{positive:68,neutral:22,negative:10}}],h=[{type:"strength",title:"Strong Belonging Foundation",description:"Belonging scores are 15% above industry average, particularly strong in Engineering and Marketing departments.",confidence:92,icon:de,color:"text-green-600",bgColor:"bg-green-50"},{type:"opportunity",title:"Psychological Safety Gap",description:"New hires (< 1 year) report 23% lower psychological safety scores. Consider enhanced onboarding support.",confidence:87,icon:Ge,color:"text-orange-600",bgColor:"bg-orange-50"},{type:"risk",title:"Department Disparity",description:"Finance department shows concerning trends with 35% lower inclusion scores than organization average.",confidence:94,icon:Ce,color:"text-red-600",bgColor:"bg-red-50"}],w={executiveSummary:"The Q1 2025 Climate Assessment reveals a generally positive organizational culture with strong belonging scores (3.8/5) and good psychological safety (3.6/5). Key strengths include high engagement in Engineering and Marketing, while opportunities exist in supporting new hires and addressing department-specific challenges in Finance. AI analysis indicates 87% confidence in these patterns based on response clustering and sentiment analysis.",discussionQuestions:["What specific actions can we take to improve psychological safety for new team members?","How can we replicate the positive culture in Engineering across other departments?","What barriers prevent people from speaking up, and how can leadership address them?","How might unconscious bias be affecting our team dynamics and decision-making?","What would make our organization feel more inclusive for underrepresented groups?"],actionSteps:[{priority:"high",action:"Implement enhanced onboarding buddy system",owner:"HR Leadership",timeline:"30 days",resources:["Buddy training materials","Check-in templates"]},{priority:"medium",action:"Conduct focus groups with Finance department",owner:"DEI Committee",timeline:"45 days",resources:["Focus group facilitator","Discussion guides"]},{priority:"high",action:"Launch psychological safety training for managers",owner:"Learning & Development",timeline:"60 days",resources:["Training curriculum","Manager toolkit","Assessment rubric"]},{priority:"medium",action:"Create cross-departmental mentorship program",owner:"DEI Committee",timeline:"90 days",resources:["Mentorship guidelines","Matching algorithm","Success metrics"]}],aiRecommendations:[{category:"Immediate Actions",recommendations:["Send personalized follow-up surveys to Finance department within 2 weeks","Schedule listening sessions with new hires (< 6 months tenure)","Implement weekly check-ins between managers and direct reports"]},{category:"Strategic Initiatives",recommendations:["Develop department-specific inclusion strategies based on survey data","Create inclusion metrics dashboard for leadership team","Establish employee resource groups for underrepresented populations"]},{category:"Measurement & Tracking",recommendations:["Implement quarterly pulse surveys to track progress","Create inclusion scorecards for each department","Establish baseline metrics for future benchmarking"]}],riskAreas:["New hire retention risk due to low psychological safety scores","Potential talent flight from Finance department","Communication gaps between leadership and individual contributors"],successFactors:["Strong peer relationships and team collaboration","High trust in immediate supervisors","Positive organizational mission alignment"]};return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs(ie,{to:"/admin/surveys",className:"inline-flex items-center text-orange-500 hover:text-orange-600 mb-4 font-medium",children:[e.jsx(He,{className:"h-4 w-4 mr-2"}),"Back to Surveys"]}),e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:l.title}),e.jsx("p",{className:"text-gray-600",children:l.description}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-600",children:[e.jsxs("span",{children:["Launched: ",new Date(l.launchedAt).toLocaleDateString()]}),e.jsx("span",{children:""}),e.jsxs("span",{children:["Last response: ",new Date(l.lastResponse).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{className:"border border-gray-300 px-4 py-2 rounded-lg hover:bg-gray-50 transition-colors duration-200 flex items-center space-x-2",children:[e.jsx(ds,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{className:"border border-gray-300 px-4 py-2 rounded-lg hover:bg-gray-50 transition-colors duration-200 flex items-center space-x-2",children:[e.jsx(dt,{className:"h-4 w-4"}),e.jsx("span",{children:"Share"})]}),e.jsxs("button",{className:"bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition-colors duration-200 flex items-center space-x-2",children:[e.jsx(ye,{className:"h-4 w-4"}),e.jsx("span",{children:"Export Report"})]})]})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:e.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ms,{className:"h-5 w-5 text-gray-400"}),e.jsxs("select",{value:t,onChange:c=>s(c.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"all-time",children:"All Time"}),e.jsx("option",{value:"last-7-days",children:"Last 7 Days"}),e.jsx("option",{value:"last-30-days",children:"Last 30 Days"}),e.jsx("option",{value:"last-90-days",children:"Last 90 Days"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(js,{className:"h-5 w-5 text-gray-400"}),e.jsxs("select",{value:n,onChange:c=>i(c.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Participants"}),e.jsx("option",{value:"department",children:"By Department"}),e.jsx("option",{value:"tenure",children:"By Tenure"}),e.jsx("option",{value:"role-level",children:"By Role Level"})]})]})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:x.map((c,f)=>e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:c.label}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:c.value}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx("span",{className:`text-sm font-medium ${c.changeType==="positive"?"text-green-600":"text-red-600"}`,children:c.change}),e.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"vs last survey"})]})]}),e.jsx("div",{className:"p-3 rounded-lg bg-orange-50",children:e.jsx(xs,{className:"h-6 w-6 text-orange-500"})})]})},f))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Response Demographics"}),e.jsx("div",{className:"space-y-6",children:g.map((c,f)=>e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:c.category}),e.jsx("div",{className:"space-y-2",children:c.data.map((v,E)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("span",{className:"text-sm text-gray-700 w-24",children:v.label}),e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-orange-400 to-red-500 h-2 rounded-full",style:{width:`${v.percentage}%`}})})]}),e.jsxs("div",{className:"text-sm font-medium text-gray-900 ml-3",children:[v.responses," (",v.percentage,"%)"]})]},E))})]},f))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[e.jsx(qe,{className:"h-6 w-6 text-purple-500"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"AI-Powered Insights"})]}),e.jsx("div",{className:"space-y-4",children:h.map((c,f)=>{const v=c.icon;return e.jsx("div",{className:`p-4 rounded-lg border ${c.bgColor}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(v,{className:`h-5 w-5 ${c.color} mt-0.5`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:c.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:c.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:["Confidence: ",c.confidence,"%"]}),e.jsx("button",{className:`text-sm font-medium ${c.color} hover:underline`,children:"View Details "})]})]})]})},f)})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Question Analysis"}),e.jsx("div",{className:"space-y-6",children:m.map((c,f)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:c.title}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("span",{children:[c.responses," responses"]}),c.avgScore&&e.jsxs("span",{className:"font-medium",children:["Avg: ",c.avgScore,"/5"]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${c.sentiment==="positive"?"bg-green-100 text-green-800":c.sentiment==="neutral"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:c.sentiment})]})]}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:e.jsx(ce,{className:"h-4 w-4"})})]}),c.type==="likert-scale"&&c.distribution&&e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"grid grid-cols-5 gap-2",children:c.distribution.map((v,E)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-gray-100 rounded-lg p-3 mb-1",children:e.jsx("div",{className:"text-lg font-bold text-gray-900",children:v})}),e.jsx("div",{className:"text-xs text-gray-600",children:E+1})]},E))})}),c.type==="open-ended"&&c.themes&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Key Themes"}),e.jsx("div",{className:"space-y-2",children:c.themes.map((v,E)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:v.theme}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${v.sentiment==="positive"?"bg-green-100 text-green-800":v.sentiment==="neutral"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:v.sentiment})]}),e.jsxs("span",{className:"text-sm text-gray-600",children:[v.mentions," mentions"]})]},E))})]}),c.insights&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Key Insights"}),e.jsx("ul",{className:"space-y-1",children:c.insights.map((v,E)=>e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-orange-400 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-700",children:v})]},E))})]})]},f))})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 rounded-xl p-8 mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"bg-orange-500 p-3 rounded-lg",children:e.jsx(Ae,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Huddle Report Preview"}),e.jsx("p",{className:"text-gray-600",children:"AI-generated team discussion guide and action plan"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Executive Summary"}),e.jsx("p",{className:"text-gray-700 text-sm mb-6",children:w.executiveSummary}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Discussion Questions"}),e.jsx("ul",{className:"space-y-2",children:w.discussionQuestions.map((c,f)=>e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx(Ds,{className:"h-4 w-4 text-blue-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-gray-700",children:c})]},f))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Recommended Actions"}),e.jsx("div",{className:"space-y-3",children:w.actionSteps.map((c,f)=>e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:c.action}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${c.priority==="high"?"bg-red-100 text-red-800":c.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:c.priority})]}),e.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[e.jsxs("div",{children:["Owner: ",c.owner]}),e.jsxs("div",{children:["Timeline: ",c.timeline]}),e.jsxs("div",{children:["Resources: ",c.resources.join(", ")]})]})]},f))})]})]}),e.jsx("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-3 gap-6",children:w.aiRecommendations.map((c,f)=>e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:c.category}),e.jsx("ul",{className:"space-y-2",children:c.recommendations.map((v,E)=>e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx(qe,{className:"h-4 w-4 text-purple-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-gray-700",children:v})]},E))})]},f))}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-red-900 mb-3 flex items-center space-x-2",children:[e.jsx(Ce,{className:"h-5 w-5"}),e.jsx("span",{children:"Risk Areas"})]}),e.jsx("ul",{className:"space-y-2",children:w.riskAreas.map((c,f)=>e.jsxs("li",{className:"text-sm text-red-800",children:[" ",c]},f))})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-green-900 mb-3 flex items-center space-x-2",children:[e.jsx(de,{className:"h-5 w-5"}),e.jsx("span",{children:"Success Factors"})]}),e.jsx("ul",{className:"space-y-2",children:w.successFactors.map((c,f)=>e.jsxs("li",{className:"text-sm text-green-800",children:[" ",c]},f))})]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center space-y-3 sm:space-y-0 sm:space-x-3",children:[e.jsxs("button",{className:"bg-white text-orange-500 px-6 py-3 rounded-lg hover:bg-gray-50 transition-colors duration-200 border border-orange-500 font-medium flex items-center space-x-2",children:[e.jsx(qe,{className:"h-5 w-5"}),e.jsx("span",{children:"Generate Full AI Report"})]}),e.jsxs("button",{className:"bg-purple-500 text-white px-6 py-3 rounded-lg hover:bg-purple-600 transition-colors duration-200 font-medium flex items-center space-x-2",children:[e.jsx(qe,{className:"h-5 w-5"}),e.jsx("span",{children:"Generate Full Huddle Report"})]}),e.jsxs("button",{className:"bg-orange-500 text-white px-6 py-3 rounded-lg hover:bg-orange-600 transition-colors duration-200 font-medium flex items-center space-x-2",children:[e.jsx(ye,{className:"h-5 w-5"}),e.jsx("span",{children:"Download Executive Summary"})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx(qe,{className:"h-6 w-6 text-purple-500"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Advanced AI Analytics"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Predictive Insights"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Ge,{className:"h-5 w-5 text-purple-600"}),e.jsx("span",{className:"font-medium text-purple-900",children:"Turnover Risk Prediction"})]}),e.jsx("p",{className:"text-sm text-purple-800 mb-2",children:"AI model predicts 23% increased turnover risk in Finance department based on survey responses."}),e.jsx("div",{className:"text-xs text-purple-700",children:"Confidence: 89% | Based on 247 data points"})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(xs,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"font-medium text-blue-900",children:"Engagement Forecast"})]}),e.jsx("p",{className:"text-sm text-blue-800 mb-2",children:"Current trajectory suggests 15% improvement in overall engagement if recommended actions are implemented."}),e.jsx("div",{className:"text-xs text-blue-700",children:"Confidence: 76% | 6-month projection"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Sentiment Analysis"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"Positive Themes (68%)"}),e.jsxs("ul",{className:"text-sm text-green-800 space-y-1",children:[e.jsx("li",{children:" Team collaboration and support"}),e.jsx("li",{children:" Meaningful work and mission alignment"}),e.jsx("li",{children:" Growth and learning opportunities"})]})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-yellow-900 mb-2",children:"Neutral Themes (22%)"}),e.jsxs("ul",{className:"text-sm text-yellow-800 space-y-1",children:[e.jsx("li",{children:" Communication processes"}),e.jsx("li",{children:" Work-life balance policies"})]})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-red-900 mb-2",children:"Concerning Themes (10%)"}),e.jsxs("ul",{className:"text-sm text-red-800 space-y-1",children:[e.jsx("li",{children:" Limited advancement opportunities"}),e.jsx("li",{children:" Inconsistent management practices"})]})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"AI-Generated Reports"}),e.jsxs("button",{className:"bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 transition-colors duration-200 flex items-center space-x-2",children:[e.jsx(qe,{className:"h-4 w-4"}),e.jsx("span",{children:"Generate New Report"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("button",{className:"p-6 border border-gray-200 rounded-lg hover:shadow-md transition-shadow duration-200 text-center group",children:[e.jsx("div",{className:"bg-blue-100 w-12 h-12 rounded-lg flex items-center justify-center mx-auto mb-3 group-hover:bg-blue-200 transition-colors duration-200",children:e.jsx(Ae,{className:"h-6 w-6 text-blue-600"})}),e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Executive Summary"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"AI-generated executive summary with key findings and recommendations"}),e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-blue-600",children:[e.jsx(ye,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Download PDF"})]})]}),e.jsxs("button",{className:"p-6 border border-gray-200 rounded-lg hover:shadow-md transition-shadow duration-200 text-center group",children:[e.jsx("div",{className:"bg-green-100 w-12 h-12 rounded-lg flex items-center justify-center mx-auto mb-3 group-hover:bg-green-200 transition-colors duration-200",children:e.jsx(Be,{className:"h-6 w-6 text-green-600"})}),e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Detailed Analytics"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Comprehensive data analysis with charts, trends, and statistical insights"}),e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-green-600",children:[e.jsx(ye,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Download Excel"})]})]}),e.jsxs("button",{className:"p-6 border border-gray-200 rounded-lg hover:shadow-md transition-shadow duration-200 text-center group",children:[e.jsx("div",{className:"bg-orange-100 w-12 h-12 rounded-lg flex items-center justify-center mx-auto mb-3 group-hover:bg-orange-200 transition-colors duration-200",children:e.jsx(Ds,{className:"h-6 w-6 text-orange-600"})}),e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Team Discussion Guide"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Facilitation guide with discussion questions and activities"}),e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-orange-600",children:[e.jsx(ye,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Download PowerPoint"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Benchmarking & Comparison"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Industry Benchmarks"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Belonging Score"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"3.8"}),e.jsx("span",{className:"text-xs text-gray-500",children:"vs"}),e.jsx("span",{className:"text-sm text-gray-600",children:"3.2 (industry avg)"}),e.jsx("span",{className:"text-xs text-green-600 font-medium",children:"+19%"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Psychological Safety"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"3.6"}),e.jsx("span",{className:"text-xs text-gray-500",children:"vs"}),e.jsx("span",{className:"text-sm text-gray-600",children:"3.4 (industry avg)"}),e.jsx("span",{className:"text-xs text-green-600 font-medium",children:"+6%"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Inclusion Index"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"3.7"}),e.jsx("span",{className:"text-xs text-gray-500",children:"vs"}),e.jsx("span",{className:"text-sm text-gray-600",children:"3.5 (industry avg)"}),e.jsx("span",{className:"text-xs text-green-600 font-medium",children:"+6%"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Historical Trends"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"6-Month Trend"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{children:"Belonging: 3.5  3.8 (+8.6%)"}),e.jsx("p",{children:"Safety: 3.4  3.6 (+5.9%)"}),e.jsx("p",{children:"Inclusion: 3.6  3.7 (+2.8%)"})]})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"Progress Indicators"}),e.jsxs("div",{className:"text-sm text-green-800",children:[e.jsx("p",{children:" Consistent upward trend"}),e.jsx("p",{children:" Above industry benchmarks"}),e.jsx("p",{children:" Strong leadership engagement"})]})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Export & Sharing"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("button",{className:"p-6 border border-gray-200 rounded-lg hover:shadow-md transition-shadow duration-200 text-center",children:[e.jsx("div",{className:"bg-green-100 w-12 h-12 rounded-lg flex items-center justify-center mx-auto mb-3",children:e.jsx(Ae,{className:"h-6 w-6 text-green-600"})}),e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Excel Report"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Detailed data with charts and pivot tables"})]}),e.jsxs("button",{className:"p-6 border border-gray-200 rounded-lg hover:shadow-md transition-shadow duration-200 text-center",children:[e.jsx("div",{className:"bg-red-100 w-12 h-12 rounded-lg flex items-center justify-center mx-auto mb-3",children:e.jsx(Ae,{className:"h-6 w-6 text-red-600"})}),e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"PDF Summary"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Executive summary with key insights"})]}),e.jsxs("button",{className:"p-6 border border-gray-200 rounded-lg hover:shadow-md transition-shadow duration-200 text-center",children:[e.jsx("div",{className:"bg-blue-100 w-12 h-12 rounded-lg flex items-center justify-center mx-auto mb-3",children:e.jsx(Ae,{className:"h-6 w-6 text-blue-600"})}),e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"PowerPoint Deck"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Presentation-ready slides with visuals"})]})]})]})]})},yn=Object.freeze(Object.defineProperty({__proto__:null,default:Kr},Symbol.toStringTag,{value:"Module"})),Xr=()=>{const[a,t]=b.useState([]),[s,n]=b.useState(""),[i,l]=b.useState("Training"),[x,g]=b.useState(""),[m,h]=b.useState(""),[w,c]=b.useState("global"),[f,v]=b.useState(""),[E,y]=b.useState(""),[d,I]=b.useState(null),j=b.useRef(null),L=()=>z(void 0,null,function*(){const O=yield ks.listDocuments();t(O)});b.useEffect(()=>{L()},[]);const N=O=>I(O),A=()=>z(void 0,null,function*(){if(!d&&!s)return alert("Provide a name or file");let O;const Y=d==null?void 0:d.type;d&&(O=yield new Promise((U,R)=>{const W=new FileReader;W.onload=()=>U(String(W.result)),W.onerror=R,W.readAsDataURL(d)}));const Q=yield ks.addDocument({name:s||d.name,filename:d==null?void 0:d.name,url:O,category:i,subcategory:x||void 0,tags:m?m.split(",").map(U=>U.trim()).filter(Boolean):[],fileType:Y,visibility:w,orgId:w==="org"?f:void 0,userId:w==="user"?E:void 0,createdBy:"Admin"},d);w==="org"&&f&&(yield Ks.addNotification({title:"New Document Shared",body:`A document "${Q.name}" was shared with your organization.`,orgId:f})),w==="user"&&E&&(yield Ks.addNotification({title:"New Document Shared",body:`A document "${Q.name}" was shared with you.`,userId:E})),n(""),I(null),h(""),v(""),y(""),L()}),_=O=>z(void 0,null,function*(){confirm("Delete document?")&&(yield ks.deleteDocument(O),L())});return e.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Document Library"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ga,{className:"h-6 w-6 text-orange-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Upload and manage documents"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow p-6 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),e.jsx("input",{value:s,onChange:O=>n(O.target.value),className:"mt-1 block w-full border rounded-lg p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),e.jsx("input",{value:i,onChange:O=>l(O.target.value),className:"mt-1 block w-full border rounded-lg p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Subcategory"}),e.jsx("input",{value:x,onChange:O=>g(O.target.value),className:"mt-1 block w-full border rounded-lg p-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tags (comma separated)"}),e.jsx("input",{value:m,onChange:O=>h(O.target.value),className:"mt-1 block w-full border rounded-lg p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Visibility"}),e.jsxs("select",{value:w,onChange:O=>c(O.target.value),className:"mt-1 block w-full border rounded-lg p-2",children:[e.jsx("option",{value:"global",children:"Global"}),e.jsx("option",{value:"org",children:"Organization"}),e.jsx("option",{value:"user",children:"User"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Org ID / User ID"}),e.jsx("input",{placeholder:"orgId or userId",value:w==="org"?f:E,onChange:O=>w==="org"?v(O.target.value):y(O.target.value),className:"mt-1 block w-full border rounded-lg p-2"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"File"}),e.jsxs("div",{className:"border-dashed border-2 border-gray-200 rounded-lg p-6 text-center",children:[e.jsx("input",{ref:j,type:"file",onChange:O=>{var Y;return N(((Y=O.target.files)==null?void 0:Y[0])||null)},className:"hidden"}),e.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[e.jsx(ha,{className:"h-5 w-5 text-gray-400"}),e.jsx("button",{onClick:()=>{var O;return(O=j.current)==null?void 0:O.click()},className:"text-sm text-orange-500",children:"Choose file"}),e.jsx("span",{className:"text-sm text-gray-500",children:"or drag and drop (not implemented)"})]}),d&&e.jsxs("div",{className:"mt-3 text-sm text-gray-700",children:["Selected: ",d.name," ",e.jsx("button",{onClick:()=>I(null),className:"ml-3 text-red-500",children:"Remove"})]})]})]}),e.jsx("div",{className:"mt-4 text-right",children:e.jsx("button",{onClick:A,className:"bg-gradient-to-r from-orange-400 to-red-500 text-white py-2 px-4 rounded-lg",children:"Upload"})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow p-6",children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:"All Documents"}),e.jsx("div",{className:"space-y-4",children:a.map(O=>e.jsxs("div",{className:"flex items-center justify-between border p-3 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:O.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:[O.category,"  ",O.subcategory,"  ",O.tags.join(", ")]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[O.visibility,O.orgId?`  org:${O.orgId}`:"",O.userId?`  user:${O.userId}`:""]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[O.url&&e.jsx("a",{onClick:()=>ks.recordDownload(O.id),href:O.url,target:"_blank",rel:"noreferrer",className:"text-sm text-blue-600",children:"Open"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[O.downloadCount||0," downloads"]}),e.jsx("button",{onClick:()=>_(O.id),className:"text-red-500",children:e.jsx(pa,{className:"h-4 w-4"})})]})]},O.id))})]})]})},jn=Object.freeze(Object.defineProperty({__proto__:null,default:Xr},Symbol.toStringTag,{value:"Module"})),Ht=({profileType:a,profileId:t,isAdmin:s=!1,onResourceStatusChange:n})=>{const[i,l]=b.useState(null),[x,g]=b.useState(null),[m,h]=b.useState([]),[w,c]=b.useState("overview"),[f,v]=b.useState("all"),[E,y]=b.useState(!0);b.useEffect(()=>{d()},[a,t]);const d=()=>z(void 0,null,function*(){try{if(y(!0),a==="user"){const R=yield as.getUserProfile(t);l(R),R&&h(R.resources)}else{const R=yield as.getOrganizationProfile(t);g(R),R&&h(R.resources)}}catch(R){console.error("Failed to load profile:",R)}finally{y(!1)}}),I=(R,W)=>z(void 0,null,function*(){try{yield as.updateResourceStatus(a,t,R,W),h(X=>X.map(ee=>ee.id===R?P(k({},ee),{status:W}):ee)),n==null||n(R,W)}catch(X){console.error("Failed to update resource status:",X)}}),j=R=>{switch(R){case"document":return e.jsx(Ae,{className:"h-4 w-4"});case"link":return e.jsx(mt,{className:"h-4 w-4"});case"video":return e.jsx(Ke,{className:"h-4 w-4"});case"note":return e.jsx(Rt,{className:"h-4 w-4"});case"assignment":return e.jsx(Dt,{className:"h-4 w-4"});default:return e.jsx(Ae,{className:"h-4 w-4"})}},L=R=>{switch(R){case"completed":return"text-green-600 bg-green-100";case"read":return"text-blue-600 bg-blue-100";case"unread":return"text-gray-600 bg-gray-100";default:return"text-gray-600 bg-gray-100"}},N=R=>{switch(R){case"high":return"border-l-red-500";case"medium":return"border-l-yellow-500";case"low":return"border-l-green-500";default:return"border-l-gray-300"}},A=m.filter(R=>f==="all"?!0:f==="unread"?R.status==="unread":f==="read"?R.status==="read":f==="completed"?R.status==="completed":R.type===f);if(E)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading profile..."})]})});if(!i&&!x)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400",children:a==="user"?e.jsx(Xe,{className:"h-16 w-16 mx-auto mb-4"}):e.jsx(we,{className:"h-16 w-16 mx-auto mb-4"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Profile Not Found"}),e.jsxs("p",{className:"text-gray-600",children:["The requested ",a," profile could not be found."]})]});if(!(i||x))return null;const O=()=>{var R;return i?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:i.avatar?e.jsx("img",{src:i.avatar,alt:i.name,className:"h-16 w-16 rounded-full object-cover"}):e.jsx("div",{className:"h-16 w-16 rounded-full bg-orange-100 flex items-center justify-center",children:e.jsx(Xe,{className:"h-8 w-8 text-orange-600"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:i.name}),e.jsx("p",{className:"text-lg text-gray-600",children:i.role}),e.jsx("p",{className:"text-sm text-gray-500",children:i.organization}),i.bio&&e.jsx("p",{className:"mt-3 text-gray-700",children:i.bio})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 text-gray-600",children:[e.jsx(rs,{className:"h-4 w-4"}),e.jsx("span",{children:i.email})]}),((R=i.contactInfo)==null?void 0:R.phone)&&e.jsxs("div",{className:"flex items-center space-x-3 text-gray-600",children:[e.jsx(ct,{className:"h-4 w-4"}),e.jsx("span",{children:i.contactInfo.phone})]}),i.enrollmentDate&&e.jsxs("div",{className:"flex items-center space-x-3 text-gray-600",children:[e.jsx(ms,{className:"h-4 w-4"}),e.jsxs("span",{children:["Enrolled: ",new Date(i.enrollmentDate).toLocaleDateString()]})]}),i.lastActivity&&e.jsxs("div",{className:"flex items-center space-x-3 text-gray-600",children:[e.jsx(Vs,{className:"h-4 w-4"}),e.jsxs("span",{children:["Last active: ",new Date(i.lastActivity).toLocaleDateString()]})]})]})]}),i.contactInfo&&e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.contactInfo.department&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Department"}),e.jsx("p",{className:"mt-1 text-gray-900",children:i.contactInfo.department})]}),i.contactInfo.title&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),e.jsx("p",{className:"mt-1 text-gray-900",children:i.contactInfo.title})]})]})]})]}):null},Y=()=>x?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:x.logo?e.jsx("img",{src:x.logo,alt:x.name,className:"h-16 w-16 rounded-lg object-cover"}):e.jsx("div",{className:"h-16 w-16 rounded-lg bg-blue-100 flex items-center justify-center",children:e.jsx(we,{className:"h-8 w-8 text-blue-600"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:x.name}),e.jsx("p",{className:"text-lg text-gray-600",children:x.type}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${x.status==="active"?"bg-green-100 text-green-800":x.status==="inactive"?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"}`,children:x.status.charAt(0).toUpperCase()+x.status.slice(1)})}),x.description&&e.jsx("p",{className:"mt-3 text-gray-700",children:x.description})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 text-gray-600",children:[e.jsx(Xe,{className:"h-4 w-4"}),e.jsx("span",{children:x.contactPerson})]}),x.contactEmail&&e.jsxs("div",{className:"flex items-center space-x-3 text-gray-600",children:[e.jsx(rs,{className:"h-4 w-4"}),e.jsx("span",{children:x.contactEmail})]}),x.website&&e.jsxs("div",{className:"flex items-center space-x-3 text-gray-600",children:[e.jsx(us,{className:"h-4 w-4"}),e.jsx("a",{href:x.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800",children:"Website"})]}),x.enrollmentDate&&e.jsxs("div",{className:"flex items-center space-x-3 text-gray-600",children:[e.jsx(ms,{className:"h-4 w-4"}),e.jsxs("span",{children:["Enrolled: ",new Date(x.enrollmentDate).toLocaleDateString()]})]}),x.lastActivity&&e.jsxs("div",{className:"flex items-center space-x-3 text-gray-600",children:[e.jsx(Vs,{className:"h-4 w-4"}),e.jsxs("span",{children:["Last active: ",new Date(x.lastActivity).toLocaleDateString()]})]}),x.subscription&&e.jsxs("div",{className:"flex items-center space-x-3 text-gray-600",children:[e.jsx(zs,{className:"h-4 w-4"}),e.jsxs("span",{children:[x.subscription," Plan"]})]})]})]}),x.address&&e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Xs,{className:"h-5 w-5 mr-2"}),"Address"]}),e.jsxs("div",{className:"text-gray-700",children:[x.address.street&&e.jsx("p",{children:x.address.street}),e.jsxs("p",{children:[x.address.city,x.address.state?`, ${x.address.state}`:""," ",x.address.zip]}),x.address.country&&e.jsx("p",{children:x.address.country})]})]}),x.metrics&&e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Metrics"}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg text-center",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Learners"}),e.jsx("div",{className:"text-2xl font-bold",children:x.metrics.totalLearners})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg text-center",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Active Learners"}),e.jsx("div",{className:"text-2xl font-bold",children:x.metrics.activeLearners})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg text-center",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Completion Rate"}),e.jsxs("div",{className:"text-2xl font-bold",children:[x.metrics.completionRate,"%"]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg text-center",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Downloads"}),e.jsx("div",{className:"text-2xl font-bold",children:x.metrics.totalDownloads})]})]})]})]}):null,Q=()=>{var W;const R=(i==null?void 0:i.learningProgress)||(x?{completedModules:Object.values(x.modules).filter(X=>X>=80).length,totalModules:Object.keys(x.modules).length,completionRate:((W=x.metrics)==null?void 0:W.completionRate)||0,modules:x.modules}:null);return R?e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(ts,{className:"h-5 w-5 mr-2"}),"Learning Progress"]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[R.completionRate,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Overall Progress"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[R.completedModules," of ",R.totalModules," modules completed"]})}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-orange-500 h-2 rounded-full",style:{width:`${R.completedModules/R.totalModules*100}%`}})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-900",children:"Module Breakdown"}),Object.entries(R.modules).map(([X,ee])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700 capitalize",children:X.replace(/([A-Z])/g," $1").trim()}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${ee>=80?"bg-green-500":ee>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${ee}%`}})}),e.jsxs("span",{className:"text-sm font-medium text-gray-900 w-12 text-right",children:[ee,"%"]})]})]},X))]})]}):null},U=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Resources"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(js,{className:"h-4 w-4 text-gray-400"}),e.jsxs("select",{value:f,onChange:R=>v(R.target.value),className:"text-sm border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Resources"}),e.jsx("option",{value:"unread",children:"Unread"}),e.jsx("option",{value:"read",children:"Read"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"document",children:"Documents"}),e.jsx("option",{value:"link",children:"Links"}),e.jsx("option",{value:"video",children:"Videos"}),e.jsx("option",{value:"note",children:"Notes"}),e.jsx("option",{value:"assignment",children:"Assignments"})]})]})]}),A.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No resources found."}):e.jsx("div",{className:"space-y-3",children:A.map(R=>e.jsx("div",{className:`bg-white p-4 rounded-lg border-l-4 shadow-sm hover:shadow-md transition-shadow ${N(R.priority)}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:j(R.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:R.title}),R.priority&&e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${R.priority==="high"?"bg-red-100 text-red-800":R.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:R.priority})]}),R.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:R.description}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500",children:[e.jsxs("span",{children:["Type: ",R.type]}),R.category&&e.jsxs("span",{children:["Category: ",R.category]}),e.jsxs("span",{children:["From: ",R.createdBy]}),e.jsx("span",{children:new Date(R.createdAt).toLocaleDateString()})]}),R.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:R.tags.map(W=>e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:W},W))})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${L(R.status)}`,children:R.status}),!s&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("button",{onClick:()=>I(R.id,"read"),className:`p-1 rounded ${R.status==="read"?"text-blue-600":"text-gray-400 hover:text-blue-600"}`,title:"Mark as read",children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>I(R.id,"completed"),className:`p-1 rounded ${R.status==="completed"?"text-green-600":"text-gray-400 hover:text-green-600"}`,title:"Mark as completed",children:R.status==="completed"?e.jsx(de,{className:"h-4 w-4"}):e.jsx(ba,{className:"h-4 w-4"})})]}),e.jsx("button",{onClick:()=>{R.url&&window.open(R.url,"_blank")},title:"Open resource",className:"p-1 rounded text-gray-400 hover:text-gray-700",children:e.jsx(fa,{className:"h-4 w-4"})})]})]})},R.id))})]});return e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsx("nav",{className:"flex space-x-1",children:["overview","resources","progress"].map(R=>e.jsx("button",{onClick:()=>c(R),className:`px-4 py-2 rounded-lg text-sm font-medium capitalize ${w===R?"bg-orange-500 text-white":"bg-white text-gray-700 hover:text-gray-900 hover:bg-gray-50"}`,children:R},R))})}),e.jsxs("div",{children:[w==="overview"&&(a==="user"?O():Y()),w==="resources"&&U(),w==="progress"&&Q()]})]})},Gr=()=>{const{userId:a}=vs();return a?e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(ie,{to:"/admin/users",className:"flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(He,{className:"h-4 w-4 mr-2"}),"Back to Users"]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Profile"}),e.jsx("p",{className:"text-gray-600",children:"View user details, learning progress, and manage resources."})]}),e.jsx(Ht,{profileType:"user",profileId:a,isAdmin:!0})]}):e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"User ID Not Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Please select a user to view their profile."}),e.jsx(ie,{to:"/admin/users",className:"text-orange-600 hover:text-orange-700 font-medium",children:"Back to Users"})]})})},vn=Object.freeze(Object.defineProperty({__proto__:null,default:Gr},Symbol.toStringTag,{value:"Module"})),Hr=()=>{const{orgProfileId:a}=vs();return a?e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(ie,{to:"/admin/organizations",className:"flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(He,{className:"h-4 w-4 mr-2"}),"Back to Organizations"]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Organization Profile"}),e.jsx("p",{className:"text-gray-600",children:"View organization details, metrics, and manage resources."})]}),e.jsx(Ht,{profileType:"organization",profileId:a,isAdmin:!0})]}):e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Organization Profile ID Not Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Please select an organization to view their profile."}),e.jsx(ie,{to:"/admin/organizations",className:"text-orange-600 hover:text-orange-700 font-medium",children:"Back to Organizations"})]})})},Nn=Object.freeze(Object.defineProperty({__proto__:null,default:Hr},Symbol.toStringTag,{value:"Module"})),Qr=({onResourceSent:a,onClose:t,isModal:s=!1,preselectedProfile:n})=>{const[i,l]=b.useState((n==null?void 0:n.type)||"user"),[x,g]=b.useState((n==null?void 0:n.id)||""),[m,h]=b.useState("document"),[w,c]=b.useState(""),[f,v]=b.useState(""),[E,y]=b.useState(""),[d,I]=b.useState(""),[j,L]=b.useState(""),[N,A]=b.useState("medium"),[_,O]=b.useState(""),[Y,Q]=b.useState(""),[U,R]=b.useState(""),[W,X]=b.useState(!0),[ee,p]=b.useState([]),[M,q]=b.useState([]),[S,u]=b.useState([]),[C,G]=b.useState(""),[le,je]=b.useState(""),[ge,Te]=b.useState(!1),[Ee,B]=b.useState(""),[ve,De]=b.useState("");b.useEffect(()=>{Re(),Fe()},[]);const Re=()=>z(void 0,null,function*(){try{const[o,F]=yield Promise.all([as.listUserProfiles(),as.listOrganizationProfiles()]);p(o),q(F)}catch(o){console.error("Failed to load profiles:",o),B("Failed to load profiles")}}),Fe=()=>z(void 0,null,function*(){try{const o=yield ks.listDocuments();u(o)}catch(o){console.error("Failed to load documents:",o)}}),D=()=>{n||(l("user"),g("")),h("document"),c(""),v(""),y(""),I(""),L(""),A("medium"),O(""),Q(""),R(""),X(!0),B(""),De("")},H=o=>z(void 0,null,function*(){if(o.preventDefault(),!x){B("Please select a profile");return}if(!w.trim()){B("Please provide a title");return}if(m==="document"&&!Y){B("Please select a document");return}if((m==="link"||m==="video")&&!E.trim()){B("Please provide a URL");return}if(m==="note"&&!d.trim()){B("Please provide content for the note");return}Te(!0),B("");try{const F={type:m,title:w.trim(),description:f.trim()||void 0,url:m==="link"||m==="video"?E.trim():void 0,content:m==="note"?d.trim():void 0,documentId:m==="document"?Y:void 0,tags:_?_.split(",").map(he=>he.trim()).filter(he=>he):[],category:j.trim()||void 0,priority:N},K={profileType:i,profileId:x,resource:F,notifyRecipient:W,message:U.trim()||void 0},re=yield as.addResourceToProfile(K);De("Resource sent successfully!"),a==null||a(re,i,x),setTimeout(()=>{D(),s&&t&&t()},1500)}catch(F){console.error("Failed to send resource:",F),B("Failed to send resource. Please try again.")}finally{Te(!1)}}),se=o=>{switch(o){case"document":return e.jsx(Ae,{className:"h-4 w-4"});case"link":return e.jsx(mt,{className:"h-4 w-4"});case"video":return e.jsx(Ke,{className:"h-4 w-4"});case"note":return e.jsx(Rt,{className:"h-4 w-4"});case"assignment":return e.jsx(Dt,{className:"h-4 w-4"})}},me=ee.filter(o=>{var F;return o.name.toLowerCase().includes(C.toLowerCase())||o.email.toLowerCase().includes(C.toLowerCase())||((F=o.organization)==null?void 0:F.toLowerCase().includes(C.toLowerCase()))}),ae=M.filter(o=>o.name.toLowerCase().includes(C.toLowerCase())||o.type.toLowerCase().includes(C.toLowerCase())||o.contactPerson.toLowerCase().includes(C.toLowerCase())),Le=S.filter(o=>o.name.toLowerCase().includes(le.toLowerCase())||o.category.toLowerCase().includes(le.toLowerCase())||o.tags.some(F=>F.toLowerCase().includes(le.toLowerCase()))),ze=i==="user"?ee.find(o=>o.id===x):M.find(o=>o.id===x),hs=e.jsxs("div",{className:`bg-white ${s?"p-6 rounded-lg shadow-xl max-w-2xl mx-auto":"p-6 rounded-xl shadow-sm border border-gray-200"}`,children:[s&&e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Send Resource"}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:e.jsx(Oe,{className:"h-6 w-6"})})]}),!s&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Send Resource to Profile"}),e.jsx("p",{className:"text-gray-600",children:"Send documents, links, notes, and other resources to user or organization profiles."})]}),Ee&&e.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start space-x-2",children:[e.jsx(Ce,{className:"h-5 w-5 text-red-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-red-700",children:Ee})]}),ve&&e.jsxs("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg flex items-start space-x-2",children:[e.jsx(de,{className:"h-5 w-5 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-green-700",children:ve})]}),e.jsxs("form",{onSubmit:H,className:"space-y-6",children:[!n&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profile Type"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"user",checked:i==="user",onChange:o=>{l(o.target.value),g("")},className:"mr-2"}),e.jsx(Xe,{className:"h-4 w-4 mr-1"}),"User Profile"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"organization",checked:i==="organization",onChange:o=>{l(o.target.value),g("")},className:"mr-2"}),e.jsx(we,{className:"h-4 w-4 mr-1"}),"Organization Profile"]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Search ",i==="user"?"Users":"Organizations"]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ze,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:`Search ${i==="user"?"users":"organizations"}...`,value:C,onChange:o=>G(o.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select ",i==="user"?"User":"Organization"]}),e.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-lg",children:i==="user"?me.length===0?e.jsx("div",{className:"p-4 text-center text-gray-500",children:"No users found"}):me.map(o=>e.jsxs("label",{className:"flex items-center p-3 hover:bg-gray-50 cursor-pointer border-b last:border-b-0",children:[e.jsx("input",{type:"radio",value:o.id,checked:x===o.id,onChange:F=>g(F.target.value),className:"mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:o.name}),e.jsx("div",{className:"text-sm text-gray-600",children:o.email}),o.organization&&e.jsx("div",{className:"text-xs text-gray-500",children:o.organization})]})]},o.id)):ae.length===0?e.jsx("div",{className:"p-4 text-center text-gray-500",children:"No organizations found"}):ae.map(o=>e.jsxs("label",{className:"flex items-center p-3 hover:bg-gray-50 cursor-pointer border-b last:border-b-0",children:[e.jsx("input",{type:"radio",value:o.id,checked:x===o.id,onChange:F=>g(F.target.value),className:"mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:o.name}),e.jsx("div",{className:"text-sm text-gray-600",children:o.type}),e.jsx("div",{className:"text-xs text-gray-500",children:o.contactPerson})]})]},o.id))})]})]}),n&&ze&&e.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[i==="user"?e.jsx(Xe,{className:"h-5 w-5 text-gray-600"}):e.jsx(we,{className:"h-5 w-5 text-gray-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:ze.name}),e.jsx("div",{className:"text-sm text-gray-600",children:i==="user"?ze.email:ze.type})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Resource Type"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:["document","link","video","note","assignment"].map(o=>e.jsxs("label",{className:`flex flex-col items-center p-3 border rounded-lg cursor-pointer transition-colors ${m===o?"border-orange-500 bg-orange-50 text-orange-700":"border-gray-300 hover:border-gray-400"}`,children:[e.jsx("input",{type:"radio",value:o,checked:m===o,onChange:F=>h(F.target.value),className:"sr-only"}),se(o),e.jsx("span",{className:"text-xs mt-1 capitalize",children:o})]},o))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),e.jsx("input",{type:"text",id:"title",value:w,onChange:o=>c(o.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter resource title",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{id:"description",value:f,onChange:o=>v(o.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter resource description"})]}),m==="document"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Document *"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ze,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search documents...",value:le,onChange:o=>je(o.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsx("div",{className:"max-h-40 overflow-y-auto border border-gray-300 rounded-lg",children:Le.length===0?e.jsx("div",{className:"p-4 text-center text-gray-500",children:"No documents found"}):Le.map(o=>e.jsxs("label",{className:"flex items-center p-3 hover:bg-gray-50 cursor-pointer border-b last:border-b-0",children:[e.jsx("input",{type:"radio",value:o.id,checked:Y===o.id,onChange:F=>Q(F.target.value),className:"mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:o.name}),e.jsx("div",{className:"text-sm text-gray-600",children:o.category}),o.tags&&o.tags.length>0&&e.jsxs("div",{className:"text-xs text-gray-500",children:["Tags: ",o.tags.join(", ")]})]})]},o.id))})]})]}),(m==="link"||m==="video")&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"url",className:"block text-sm font-medium text-gray-700 mb-1",children:"URL *"}),e.jsx("input",{type:"url",id:"url",value:E,onChange:o=>y(o.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:`Enter ${m} URL`,required:!0})]}),m==="note"&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-1",children:"Content *"}),e.jsx("textarea",{id:"content",value:d,onChange:o=>I(o.target.value),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter note content",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsx("input",{type:"text",id:"category",value:j,onChange:o=>L(o.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"e.g., Training, Documentation"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),e.jsxs("select",{id:"priority",value:N,onChange:o=>A(o.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"tags",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags"}),e.jsx("input",{type:"text",id:"tags",value:_,onChange:o=>O(o.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter tags separated by commas"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Separate multiple tags with commas"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 mb-1",children:"Message to Recipient"}),e.jsx("textarea",{id:"message",value:U,onChange:o=>R(o.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Optional message to include with the resource"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"notify",checked:W,onChange:o=>X(o.target.checked),className:"mr-2"}),e.jsx("label",{htmlFor:"notify",className:"text-sm text-gray-700",children:"Send notification to recipient"})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[s&&e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",disabled:ge,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:ge||!x,className:"flex items-center space-x-2 px-6 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed",children:ge?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Sending..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(ya,{className:"h-4 w-4"}),e.jsx("span",{children:"Send Resource"})]})})]})]})]});return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"max-h-[90vh] overflow-y-auto",children:hs})}):hs},Yr=()=>{const[a,t]=b.useState([]),s=(n,i,l)=>{t(x=>[...x,{resource:n,profileType:i,profileId:l,sentAt:new Date}])};return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Send Resources"}),e.jsx("p",{className:"text-gray-600",children:"Send documents, links, notes, and other resources directly to user or organization profiles."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(Qr,{onResourceSent:s})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),a.length===0?e.jsx("p",{className:"text-gray-500 text-sm",children:"No resources sent yet."}):e.jsx("div",{className:"space-y-3",children:a.slice(-5).reverse().map((n,i)=>e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"font-medium text-sm text-gray-900",children:n.resource.title}),e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Sent to ",n.profileType,"  ",n.sentAt.toLocaleTimeString()]})]},i))})]})})]})]})},wn=Object.freeze(Object.defineProperty({__proto__:null,default:Yr},Symbol.toStringTag,{value:"Module"})),Zr=()=>{const[a,t]=b.useState({pageLoadTime:.8,componentRenderTime:12,apiResponseTime:150,memoryUsage:45,userEngagement:87,errorRate:.2,cacheHitRate:94,autoSaveSuccessRate:99.1}),[s]=b.useState({sessionDuration:2400,pagesVisited:12,courseProgress:68,interactionRate:.85,reflectionLength:145,videoWatchTime:.92}),[n]=b.useState([{feature:"Smart Recommendations",improvement:"+15%",metric:"Course Completion Rate"},{feature:"Auto-save Functionality",improvement:"+99%",metric:"Data Retention"},{feature:"Video Optimization",improvement:"+25%",metric:"Watch Time"},{feature:"Engagement Tracking",improvement:"+30%",metric:"User Insights"},{feature:"Performance Hooks",improvement:"+50%",metric:"Load Speed"},{feature:"Real-time Sync",improvement:"+80%",metric:"Data Accuracy"}]),[i,l]=b.useState({activeUsers:47,coursesInProgress:23,autoSavesPerMinute:12,cacheRequests:156,smartRecommendations:8});b.useEffect(()=>{const m=setInterval(()=>{l(h=>({activeUsers:h.activeUsers+Math.floor(Math.random()*3)-1,coursesInProgress:h.coursesInProgress+Math.floor(Math.random()*2)-1,autoSavesPerMinute:Math.floor(Math.random()*20)+5,cacheRequests:h.cacheRequests+Math.floor(Math.random()*10)+1,smartRecommendations:h.smartRecommendations+Math.floor(Math.random()*2)})),t(h=>P(k({},h),{userEngagement:Math.max(80,Math.min(95,h.userEngagement+(Math.random()-.5)*2)),cacheHitRate:Math.max(90,Math.min(98,h.cacheHitRate+(Math.random()-.5)*1)),autoSaveSuccessRate:Math.max(98,Math.min(100,h.autoSaveSuccessRate+(Math.random()-.5)*.5))}))},5e3);return()=>clearInterval(m)},[]);const x=(m,h,w)=>m>=w?"text-green-600":m>=h?"text-yellow-600":"text-red-600",g=(m,h,w)=>m>=w?"bg-green-50 border-green-200":m>=h?"bg-yellow-50 border-yellow-200":"bg-red-50 border-red-200";return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Performance Optimization Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Real-time monitoring of platform performance improvements"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6 mb-8",children:[{label:"Active Users",value:i.activeUsers,icon:Se,color:"text-blue-600"},{label:"Courses Active",value:i.coursesInProgress,icon:Be,color:"text-green-600"},{label:"Auto-saves/min",value:i.autoSavesPerMinute,icon:ds,color:"text-orange-600"},{label:"Cache Hits",value:i.cacheRequests,icon:$e,color:"text-purple-600"},{label:"AI Recommendations",value:i.smartRecommendations,icon:qe,color:"text-indigo-600"}].map((m,h)=>e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:m.label}),e.jsx("p",{className:`text-2xl font-bold ${m.color}`,children:m.value})]}),e.jsx(m.icon,{className:`h-8 w-8 ${m.color}`})]})},h))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx(xs,{className:"h-6 w-6 mr-2 text-green-500"}),"System Performance"]}),e.jsx("div",{className:"space-y-4",children:[{label:"Page Load Time",value:`${a.pageLoadTime}s`,good:1.5,excellent:1,current:a.pageLoadTime},{label:"Component Render",value:`${a.componentRenderTime}ms`,good:50,excellent:20,current:a.componentRenderTime},{label:"API Response",value:`${a.apiResponseTime}ms`,good:500,excellent:200,current:a.apiResponseTime},{label:"Memory Usage",value:`${a.memoryUsage}%`,good:70,excellent:50,current:a.memoryUsage}].map((m,h)=>e.jsx("div",{className:`p-4 rounded-lg border ${g(m.current<=100?100-m.current:m.current,m.good,m.excellent)}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-gray-900",children:m.label}),e.jsx("span",{className:`font-bold ${x(m.current<=100?100-m.current:m.current,m.good,m.excellent)}`,children:m.value})]})},h))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx(Ge,{className:"h-6 w-6 mr-2 text-blue-500"}),"User Experience"]}),e.jsx("div",{className:"space-y-4",children:[{label:"User Engagement",value:`${Math.round(a.userEngagement)}%`,target:85},{label:"Cache Hit Rate",value:`${Math.round(a.cacheHitRate)}%`,target:90},{label:"Auto-save Success",value:`${a.autoSaveSuccessRate}%`,target:98},{label:"Error Rate",value:`${a.errorRate}%`,target:1}].map((m,h)=>e.jsxs("div",{className:"p-4 rounded-lg bg-gray-50 border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"font-medium text-gray-900",children:m.label}),e.jsx("span",{className:"font-bold text-blue-600",children:m.value})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-400 to-blue-500 h-2 rounded-full",style:{width:`${Math.min(100,parseFloat(m.value))}%`}})})]},h))})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx(Bs,{className:"h-6 w-6 mr-2 text-yellow-500"}),"Optimization Impact Analysis"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:n.map((m,h)=>e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-4 rounded-lg border border-green-200",children:[e.jsx("h3",{className:"font-semibold text-green-900 mb-2",children:m.feature}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-green-700",children:m.metric}),e.jsx("span",{className:"font-bold text-green-600 text-lg",children:m.improvement})]})]},h))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx(ce,{className:"h-6 w-6 mr-2 text-purple-500"}),"User Behavior Analytics"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Engagement Metrics"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Avg Session Duration"}),e.jsxs("span",{className:"font-medium",children:[Math.round(s.sessionDuration/60)," min"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Interaction Rate"}),e.jsxs("span",{className:"font-medium",children:[Math.round(s.interactionRate*100),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Video Completion"}),e.jsxs("span",{className:"font-medium",children:[Math.round(s.videoWatchTime*100),"%"]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Learning Progress"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Course Progress"}),e.jsxs("span",{className:"font-medium",children:[s.courseProgress,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Pages per Session"}),e.jsx("span",{className:"font-medium",children:s.pagesVisited})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Avg Reflection Length"}),e.jsxs("span",{className:"font-medium",children:[s.reflectionLength," chars"]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Performance Impact"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center text-green-600",children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"text-sm",children:"50% faster loading"})]}),e.jsxs("div",{className:"flex items-center text-green-600",children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"text-sm",children:"99% auto-save success"})]}),e.jsxs("div",{className:"flex items-center text-green-600",children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"text-sm",children:"Real-time progress sync"})]})]})]})]})]})]})},Cn=Object.freeze(Object.defineProperty({__proto__:null,default:Zr},Symbol.toStringTag,{value:"Module"})),Jr=[{label:"Dashboard",to:"/admin/dashboard",icon:va},{label:"Users",to:"/admin/users",icon:Se},{label:"Performance",to:"/admin/performance",icon:xs},{label:"Settings",to:"/admin/settings",icon:Pe}],en=()=>e.jsx("div",{className:"min-h-screen bg-gray-50 py-10 px-4",children:e.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[e.jsxs("header",{className:"text-center space-y-3",children:[e.jsx("div",{className:"mx-auto flex h-14 w-14 items-center justify-center rounded-full bg-orange-100 text-orange-600",children:e.jsx(ja,{className:"h-7 w-7","aria-hidden":"true"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Admin Mobile Workspace"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Access the most important admin actions in a layout optimized for smaller screens."})]})]}),e.jsx("section",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:Jr.map(a=>{const t=a.icon;return e.jsxs(ie,{to:a.to,className:"group flex items-center space-x-4 rounded-xl border border-gray-200 bg-white px-5 py-4 shadow-sm transition hover:border-orange-200 hover:shadow-md",children:[e.jsx("span",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-orange-50 text-orange-500 transition group-hover:bg-orange-500 group-hover:text-white",children:e.jsx(t,{className:"h-6 w-6","aria-hidden":"true"})}),e.jsx("span",{className:"text-base font-medium text-gray-900 group-hover:text-orange-600",children:a.label})]},a.to)})}),e.jsxs("section",{className:"space-y-3 rounded-xl border border-gray-200 bg-white p-5 shadow-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Need the full experience?"}),e.jsx("p",{className:"text-sm text-gray-600",children:"This lightweight dashboard surfaces the most common admin actions. For course creation, advanced analytics, and other high-resolution features, switch back to the full admin portal."}),e.jsx(ie,{to:"/admin/dashboard",className:"inline-flex items-center justify-center rounded-lg bg-orange-500 px-4 py-2 text-sm font-semibold text-white transition hover:bg-orange-600",children:"Return to full admin portal"})]})]})}),Sn=Object.freeze(Object.defineProperty({__proto__:null,default:en},Symbol.toStringTag,{value:"Module"}));export{ln as A,mn as O,nn as T,Ia as a,We as b,xe as c,ks as d,on as e,cn as f,dn as g,xn as h,un as i,gn as j,hn as k,pn as l,bn as m,Ks as n,fn as o,yn as p,jn as q,vn as r,fe as s,Nn as t,Ve as u,wn as v,Cn as w,Sn as x};
