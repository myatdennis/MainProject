var q=Object.defineProperty,P=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var A=(o,i,a)=>i in o?q(o,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[i]=a,b=(o,i)=>{for(var a in i||(i={}))F.call(i,a)&&A(o,a,i[a]);if(D)for(var a of D(i))K.call(i,a)&&A(o,a,i[a]);return o},j=(o,i)=>P(o,G(i));var k=(o,i,a)=>new Promise((v,c)=>{var p=l=>{try{n(a.next(l))}catch(g){c(g)}},u=l=>{try{n(a.throw(l))}catch(g){c(g)}},n=l=>l.done?v(l.value):Promise.resolve(l.value).then(p,u);n((a=a.apply(o,i)).next())});import{r,aF as O,j as e,ad as U,ai as V,bm as N,bn as Y,bo as X,ba as J,X as Q,x as Z,at as _}from"./vendor-react-DvkU9ZSQ.js";import{g as ee}from"./admin-surveys-BPgUp-RX.js";import"./supabase-CqkleIqs.js";import"./vendor-Dox2Yl3q.js";import"./vendor-react-dom-Dki47u2n.js";import"./admin-secondary-DnwfLwy7.js";import"./admin-courses-Othof8Q0.js";const de=()=>{const[o,i]=r.useState(!1),[a,v]=r.useState(!1),[c,p]=r.useState(""),[u,n]=r.useState([]),[l,g]=r.useState(!1),S=r.useRef(null),I=O(),[R,W]=r.useState(!1),y=I.pathname.startsWith("/admin"),x=I.pathname.startsWith("/lms"),z=()=>{var s;(s=S.current)==null||s.scrollIntoView({behavior:"smooth"})};r.useEffect(()=>{z()},[u]),r.useEffect(()=>{if(o&&u.length===0){const s=C();n([{id:"1",type:"bot",content:s.message,timestamp:new Date,suggestions:s.suggestions}])}},[o,y,x]),r.useEffect(()=>{u.length>50&&n(s=>s.slice(s.length-50))},[u]);const C=()=>y?{message:"Hi Mya! I'm your AI assistant for The Huddle Co. admin portal. I can help you with analytics, user management, course insights, and more. What would you like to know?",suggestions:["Show me users at risk of dropping out","What's our completion rate this month?","Which modules need improvement?","Generate a progress report"]}:x?{message:"Hello! I'm here to help with your learning journey. I can answer questions about course content, provide study tips, remind you of deadlines, and suggest next steps. How can I assist you today?",suggestions:["What should I focus on next?","Explain inclusive leadership principles","How do I handle difficult conversations?","Show my progress summary"]}:{message:"Welcome to The Huddle Co.! I'm here to help you learn about our DEI consulting services, training programs, and how we can support your organization. What would you like to know?",suggestions:["Tell me about your services","How does the training work?","What results do clients see?","Schedule a discovery call"]},T=()=>k(void 0,null,function*(){if(!c.trim())return;const s={id:Date.now().toString(),type:"user",content:c,timestamp:new Date};n(t=>[...t,s]),p(""),g(!0),setTimeout(()=>{const t=M(c);n(m=>[...m,{id:(Date.now()+1).toString(),type:"bot",content:t.message,timestamp:new Date,suggestions:t.suggestions}]),g(!1)},1500)}),M=s=>{const t=s.toLowerCase();if(y){if(t.includes("survey")||t.includes("climate")||t.includes("inclusion")||t.includes("equity")){const m=`fetch-${Date.now()}`;return n(f=>[...f,{id:m,type:"bot",content:"Fetching analytics...",timestamp:new Date}].slice(-50)),k(void 0,null,function*(){var f;try{const E=((f=s.match(/([a-z0-9\-]+-?\d{0,4})/i))==null?void 0:f[0])||"climate-2025-q1",d=yield ee(E),h=`Survey ${d.surveyId} — ${d.title}
Responses: ${d.totalResponses}, Completion Rate: ${d.completionRate}%, Avg Time: ${d.avgCompletionTime} min. Key insights: ${d.insights.join("; ")}`;n(H=>H.map(w=>w.id===m?j(b({},w),{content:h,suggestions:["Export report","Create huddle report","Drill into question analytics"]}):w).slice(-50))}catch(E){n(d=>d.map(h=>h.id===m?j(b({},h),{content:"Error retrieving survey analytics. Supabase may not be configured or an error occurred."}):h))}}),{message:"I'm fetching the latest survey analytics — I'll post a summary here in a moment.",suggestions:["Show executive summary","Export report","Compare organizations"]}}if(t.includes("completion rate")||t.includes("progress"))return{message:"Based on current data, your overall completion rate is 87% this month, up 5% from last month. The 'Foundations of Inclusive Leadership' module has the highest completion rate at 94%, while 'Courageous Conversations' is at 78%. Would you like me to identify specific users who might need support?",suggestions:["Show me struggling learners","Compare by organization","Export detailed report","Send reminder emails"]};if(t.includes("at risk")||t.includes("dropping out"))return{message:"I've identified 23 learners at risk of dropping out based on engagement patterns. They haven't logged in for 7+ days and have completion rates below 40%. The main risk factors are: low initial engagement, long gaps between sessions, and incomplete first modules. Should I create targeted intervention campaigns?",suggestions:["Create intervention campaign","Show detailed risk analysis","Schedule coaching calls","Send personalized reminders"]};if(t.includes("module")||t.includes("improvement"))return{message:"The 'Conversation Planning Template' in Module 4 shows the lowest engagement (68% completion). User feedback indicates it's too text-heavy. I recommend breaking it into smaller, interactive segments. The 'Empathy Case Study' performs best with 92% completion and 4.9/5 rating.",suggestions:["Redesign low-performing content","Replicate successful formats","View detailed feedback","A/B test improvements"]}}else if(x){if(t.includes("progress")||t.includes("summary"))return{message:"Great progress, Sarah! You've completed 3 out of 5 modules (60% complete). Your strongest area is 'Empathy in Action' where you scored 95%. I notice you haven't started 'Courageous Conversations' yet - this builds perfectly on your empathy skills. Would you like me to create a study plan?",suggestions:["Create personalized study plan","Review completed modules","Practice conversation scenarios","Schedule coaching session"]};if(t.includes("inclusive leadership")||t.includes("principles"))return{message:"Inclusive leadership centers on five core principles: 1) Psychological Safety - creating environments where people feel safe to speak up, 2) Active Listening - truly hearing diverse perspectives, 3) Empathy - understanding others' experiences, 4) Accountability - taking responsibility for inclusive outcomes, and 5) Growth Mindset - continuously learning and adapting. Which principle would you like to explore deeper?",suggestions:["Explore psychological safety","Practice active listening","Develop empathy skills","Learn accountability frameworks"]};if(t.includes("difficult conversation")||t.includes("courageous"))return{message:"Courageous conversations require preparation and skill. The BRIDGE framework helps: B-Build rapport, R-Respect perspectives, I-Inquire with curiosity, D-Discuss impact, G-Generate solutions, E-Establish next steps. Start with psychological safety, use 'I' statements, and focus on behaviors, not personalities. Would you like to practice with a scenario?",suggestions:["Practice with scenarios","Download conversation template","Learn de-escalation techniques","Schedule role-play session"]}}else{if(t.includes("service")||t.includes("training"))return{message:"The Huddle Co. offers three main services: 1) Inclusive Leadership Mini-Workshops (half-day intensive), 2) Courageous Conversations Facilitation (full-day workshop), and 3) Strategic DEI Planning (3-month engagement). All programs are customized for your organization's needs and include follow-up support. Which service interests you most?",suggestions:["Learn about workshops","Explore DEI planning","See client results","Schedule discovery call"]};if(t.includes("result")||t.includes("outcome"))return{message:"Our clients see measurable results: Pacific Coast University increased student engagement by 40%, Regional Fire Department reduced workplace complaints by 70%, and TechForward Solutions improved employee satisfaction by 45%. We track progress through engagement surveys, retention rates, and behavioral assessments. Would you like to see specific case studies?",suggestions:["View case studies","See testimonials","Download success stories","Book consultation"]}}return{message:"I'd be happy to help with that! Could you provide more specific details about what you're looking for? I can assist with course content, progress tracking, analytics, or general questions about The Huddle Co.'s services.",suggestions:["Ask about specific topics","Get help with navigation","Contact support team","View available resources"]}},L=s=>{p(s)},$=s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),T())},B=()=>{n([]);const s=C();n([{id:"1",type:"bot",content:s.message,timestamp:new Date,suggestions:s.suggestions}])};return o?e.jsxs("div",{className:`fixed bottom-6 right-6 bg-white rounded-2xl shadow-2xl border border-gray-200 z-50 transition-all duration-300 ${a?"w-80 h-16":"w-96 h-[600px]"}`,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-orange-50 to-red-50 rounded-t-2xl",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-400 to-red-500 p-2 rounded-full",children:e.jsx(N,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900",children:"AI Assistant"}),e.jsx("p",{className:"text-xs text-gray-600",children:y?"Admin Support":x?"Learning Coach":"The Huddle Co."})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>v(!a),className:"p-1 text-gray-400 hover:text-gray-600 rounded",children:a?e.jsx(Y,{className:"h-4 w-4"}):e.jsx(X,{className:"h-4 w-4"})}),e.jsx("button",{onClick:B,className:"p-1 text-gray-400 hover:text-gray-600 rounded",children:e.jsx(J,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>i(!1),className:"p-1 text-gray-400 hover:text-gray-600 rounded",children:e.jsx(Q,{className:"h-4 w-4"})})]})]}),!a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 h-96",children:[u.map(s=>e.jsx("div",{className:`flex ${s.type==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`flex items-start space-x-2 max-w-[80%] ${s.type==="user"?"flex-row-reverse space-x-reverse":""}`,children:[e.jsx("div",{className:`p-2 rounded-full ${s.type==="user"?"bg-orange-500":"bg-gray-100"}`,children:s.type==="user"?e.jsx(Z,{className:"h-4 w-4 text-white"}):e.jsx(N,{className:"h-4 w-4 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:`p-3 rounded-2xl ${s.type==="user"?"bg-gradient-to-r from-orange-400 to-red-500 text-white":"bg-gray-100 text-gray-900"}`,children:e.jsx("p",{className:"text-sm",children:s.content})}),s.suggestions&&s.suggestions.length>0&&e.jsx("div",{className:"mt-2 space-y-1",children:s.suggestions.map((t,m)=>e.jsx("button",{onClick:()=>L(t),className:"block w-full text-left text-xs text-blue-600 hover:text-blue-700 bg-blue-50 hover:bg-blue-100 px-2 py-1 rounded-lg transition-colors duration-200",children:t},m))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})},s.id)),l&&e.jsx("div",{className:"flex justify-start",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"p-2 rounded-full bg-gray-100",children:e.jsx(N,{className:"h-4 w-4 text-gray-600"})}),e.jsx("div",{className:"bg-gray-100 p-3 rounded-2xl",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})}),e.jsx("div",{ref:S})]}),e.jsx("div",{className:"p-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:c,onChange:s=>p(s.target.value),onKeyPress:$,placeholder:"Ask me anything...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-full focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm"}),e.jsx("button",{onClick:T,disabled:!c.trim(),className:"bg-gradient-to-r from-orange-400 to-red-500 text-white p-2 rounded-full hover:from-orange-500 hover:to-red-600 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(_,{className:"h-4 w-4"})})]})})]})]}):e.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col items-end space-y-2",children:[e.jsx("button",{onClick:()=>W(s=>!s),className:"bg-yellow-400 text-white p-3 rounded-full shadow-lg",title:"Tips & Shortcuts",children:e.jsx(U,{className:"h-6 w-6"})}),e.jsx("button",{onClick:()=>i(!0),className:"bg-gradient-to-r from-orange-400 to-red-500 text-white p-4 rounded-full shadow-lg hover:from-orange-500 hover:to-red-600 transition-all duration-200 transform hover:scale-110",title:"Open AI Assistant",children:e.jsx(V,{className:"h-6 w-6"})}),R&&e.jsxs("div",{className:"mt-2 w-64 bg-white rounded-lg shadow-lg p-3 border border-gray-200 text-sm text-gray-700",children:[e.jsx("div",{className:"font-semibold mb-1",children:"AI Tips"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[e.jsx("li",{children:"Ask for completion rates by org or course."}),e.jsx("li",{children:'Use "Show me users at risk" to get intervention lists.'}),e.jsx("li",{children:'Say "export report" to prepare summaries.'})]})]})]})};export{de as default};
